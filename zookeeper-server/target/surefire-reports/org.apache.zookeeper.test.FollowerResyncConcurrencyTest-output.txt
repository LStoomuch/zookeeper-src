2020-03-18 17:39:39,624 [myid:] - INFO  [main:JUnit4ZKTestRunner@51] - No test.method specified. using default methods.
2020-03-18 17:39:39,635 [myid:] - INFO  [main:JUnit4ZKTestRunner@51] - No test.method specified. using default methods.
2020-03-18 17:39:39,654 [myid:] - INFO  [main:ZKTestCase$1@86] - STARTING testResyncByTxnlogThenDiffAfterFollowerCrashes
2020-03-18 17:39:39,666 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@84] - RUNNING TEST METHOD testResyncByTxnlogThenDiffAfterFollowerCrashes
2020-03-18 17:39:39,872 [myid:] - INFO  [main:JMXEnv@58] - connecting to addr service:jmx:rmi://127.0.0.1/stub/rO0ABXNyAC5qYXZheC5tYW5hZ2VtZW50LnJlbW90ZS5ybWkuUk1JU2VydmVySW1wbF9TdHViAAAAAAAAAAICAAB4cgAaamF2YS5ybWkuc2VydmVyLlJlbW90ZVN0dWLp/tzJi+FlGgIAAHhyABxqYXZhLnJtaS5zZXJ2ZXIuUmVtb3RlT2JqZWN002G0kQxhMx4DAAB4cHc3AAtVbmljYXN0UmVmMgAADDE3Mi4xOC4xNC4zNAAAypvaCHOd96H4eef4H6IAAAFw7QNGc4ABAHg=
2020-03-18 17:39:39,945 [myid:] - INFO  [main:PortAssignment@154] - Test process 2/8 using ports from 13914 - 16606.
2020-03-18 17:39:39,946 [myid:] - INFO  [main:PortAssignment@87] - Assigned port 13915 from range 13914 - 16606.
2020-03-18 17:39:39,951 [myid:] - INFO  [main:PortAssignment@87] - Assigned port 13916 from range 13914 - 16606.
2020-03-18 17:39:39,953 [myid:] - INFO  [main:PortAssignment@87] - Assigned port 13917 from range 13914 - 16606.
2020-03-18 17:39:39,958 [myid:] - INFO  [main:PortAssignment@87] - Assigned port 13918 from range 13914 - 16606.
2020-03-18 17:39:39,959 [myid:] - INFO  [main:PortAssignment@87] - Assigned port 13919 from range 13914 - 16606.
2020-03-18 17:39:39,959 [myid:] - INFO  [main:PortAssignment@87] - Assigned port 13920 from range 13914 - 16606.
2020-03-18 17:39:39,961 [myid:] - INFO  [main:PortAssignment@87] - Assigned port 13921 from range 13914 - 16606.
2020-03-18 17:39:39,961 [myid:] - INFO  [main:PortAssignment@87] - Assigned port 13922 from range 13914 - 16606.
2020-03-18 17:39:39,961 [myid:] - INFO  [main:PortAssignment@87] - Assigned port 13923 from range 13914 - 16606.
2020-03-18 17:39:39,961 [myid:] - INFO  [main:QuorumUtil@118] - Creating QuorumPeer 1; public port 13915
2020-03-18 17:39:39,973 [myid:] - INFO  [main:QuorumPeer@752] - zookeeper.quorumCnxnTimeoutMs=-1
2020-03-18 17:39:39,987 [myid:] - INFO  [main:ServerCnxnFactory@169] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2020-03-18 17:39:39,988 [myid:] - WARN  [main:ServerCnxnFactory@309] - maxCnxns is not configured, using default value 0.
2020-03-18 17:39:39,990 [myid:] - INFO  [main:NIOServerCnxnFactory@666] - Configuring NIO connection handler with 10s sessionless connection timeout, 1 selector thread(s), 8 worker threads, and 64 kB direct buffers.
2020-03-18 17:39:40,007 [myid:] - INFO  [main:NIOServerCnxnFactory@674] - binding to port /127.0.0.1:13915
2020-03-18 17:39:40,020 [myid:] - INFO  [main:X509Util@77] - Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation
2020-03-18 17:39:40,023 [myid:] - INFO  [main:FileTxnSnapLog@124] - zookeeper.snapshot.trust.empty : false
2020-03-18 17:39:40,038 [myid:] - INFO  [main:ZookeeperBanner@42] - 
2020-03-18 17:39:40,038 [myid:] - INFO  [main:ZookeeperBanner@42] -   ______                  _                                          
2020-03-18 17:39:40,038 [myid:] - INFO  [main:ZookeeperBanner@42] -  |___  /                 | |                                         
2020-03-18 17:39:40,038 [myid:] - INFO  [main:ZookeeperBanner@42] -     / /    ___     ___   | | __   ___    ___   _ __     ___   _ __   
2020-03-18 17:39:40,038 [myid:] - INFO  [main:ZookeeperBanner@42] -    / /    / _ \   / _ \  | |/ /  / _ \  / _ \ | '_ \   / _ \ | '__|
2020-03-18 17:39:40,039 [myid:] - INFO  [main:ZookeeperBanner@42] -   / /__  | (_) | | (_) | |   <  |  __/ |  __/ | |_) | |  __/ | |    
2020-03-18 17:39:40,039 [myid:] - INFO  [main:ZookeeperBanner@42] -  /_____|  \___/   \___/  |_|\_\  \___|  \___| | .__/   \___| |_|
2020-03-18 17:39:40,039 [myid:] - INFO  [main:ZookeeperBanner@42] -                                               | |                     
2020-03-18 17:39:40,039 [myid:] - INFO  [main:ZookeeperBanner@42] -                                               |_|                     
2020-03-18 17:39:40,039 [myid:] - INFO  [main:ZookeeperBanner@42] - 
2020-03-18 17:39:40,043 [myid:] - INFO  [main:Environment@98] - Server environment:zookeeper.version=3.6.0--b4c89dc7f6083829e18fae6e446907ae0b1f22d7, built on 03/18/2020 09:36 GMT
2020-03-18 17:39:40,043 [myid:] - INFO  [main:Environment@98] - Server environment:host.name=172.18.14.34
2020-03-18 17:39:40,043 [myid:] - INFO  [main:Environment@98] - Server environment:java.version=1.8.0_191
2020-03-18 17:39:40,043 [myid:] - INFO  [main:Environment@98] - Server environment:java.vendor=Oracle Corporation
2020-03-18 17:39:40,044 [myid:] - INFO  [main:Environment@98] - Server environment:java.home=/Library/Java/JavaVirtualMachines/jdk1.8.0_191.jdk/Contents/Home/jre
2020-03-18 17:39:40,044 [myid:] - INFO  [main:Environment@98] - Server environment:java.class.path=/Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/test-classes:/Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/classes:/Users/liaosheng/.m2/repository/com/github/spotbugs/spotbugs-annotations/3.1.9/spotbugs-annotations-3.1.9.jar:/Users/liaosheng/.m2/repository/com/google/code/findbugs/jsr305/3.0.2/jsr305-3.0.2.jar:/Users/liaosheng/.m2/repository/org/hamcrest/hamcrest-all/1.3/hamcrest-all-1.3.jar:/Users/liaosheng/.m2/repository/commons-collections/commons-collections/3.2.2/commons-collections-3.2.2.jar:/Users/liaosheng/.m2/repository/commons-lang/commons-lang/2.6/commons-lang-2.6.jar:/Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-jute/target/zookeeper-jute-3.6.0.jar:/Users/liaosheng/.m2/repository/commons-cli/commons-cli/1.2/commons-cli-1.2.jar:/Users/liaosheng/.m2/repository/org/apache/yetus/audience-annotations/0.5.0/audience-annotations-0.5.0.jar:/Users/liaosheng/.m2/repository/io/netty/netty-handler/4.1.45.Final/netty-handler-4.1.45.Final.jar:/Users/liaosheng/.m2/repository/io/netty/netty-common/4.1.45.Final/netty-common-4.1.45.Final.jar:/Users/liaosheng/.m2/repository/io/netty/netty-buffer/4.1.45.Final/netty-buffer-4.1.45.Final.jar:/Users/liaosheng/.m2/repository/io/netty/netty-transport/4.1.45.Final/netty-transport-4.1.45.Final.jar:/Users/liaosheng/.m2/repository/io/netty/netty-resolver/4.1.45.Final/netty-resolver-4.1.45.Final.jar:/Users/liaosheng/.m2/repository/io/netty/netty-codec/4.1.45.Final/netty-codec-4.1.45.Final.jar:/Users/liaosheng/.m2/repository/io/netty/netty-transport-native-epoll/4.1.45.Final/netty-transport-native-epoll-4.1.45.Final.jar:/Users/liaosheng/.m2/repository/io/netty/netty-transport-native-unix-common/4.1.45.Final/netty-transport-native-unix-common-4.1.45.Final.jar:/Users/liaosheng/.m2/repository/org/slf4j/slf4j-api/1.7.25/slf4j-api-1.7.25.jar:/Users/liaosheng/.m2/repository/org/slf4j/slf4j-log4j12/1.7.25/slf4j-log4j12-1.7.25.jar:/Users/liaosheng/.m2/repository/org/eclipse/jetty/jetty-server/9.4.24.v20191120/jetty-server-9.4.24.v20191120.jar:/Users/liaosheng/.m2/repository/javax/servlet/javax.servlet-api/3.1.0/javax.servlet-api-3.1.0.jar:/Users/liaosheng/.m2/repository/org/eclipse/jetty/jetty-http/9.4.24.v20191120/jetty-http-9.4.24.v20191120.jar:/Users/liaosheng/.m2/repository/org/eclipse/jetty/jetty-util/9.4.24.v20191120/jetty-util-9.4.24.v20191120.jar:/Users/liaosheng/.m2/repository/org/eclipse/jetty/jetty-io/9.4.24.v20191120/jetty-io-9.4.24.v20191120.jar:/Users/liaosheng/.m2/repository/org/eclipse/jetty/jetty-servlet/9.4.24.v20191120/jetty-servlet-9.4.24.v20191120.jar:/Users/liaosheng/.m2/repository/org/eclipse/jetty/jetty-security/9.4.24.v20191120/jetty-security-9.4.24.v20191120.jar:/Users/liaosheng/.m2/repository/com/fasterxml/jackson/core/jackson-databind/2.9.10.3/jackson-databind-2.9.10.3.jar:/Users/liaosheng/.m2/repository/com/fasterxml/jackson/core/jackson-annotations/2.9.10/jackson-annotations-2.9.10.jar:/Users/liaosheng/.m2/repository/com/fasterxml/jackson/core/jackson-core/2.9.10/jackson-core-2.9.10.jar:/Users/liaosheng/.m2/repository/com/googlecode/json-simple/json-simple/1.1.1/json-simple-1.1.1.jar:/Users/liaosheng/.m2/repository/org/bouncycastle/bcprov-jdk15on/1.60/bcprov-jdk15on-1.60.jar:/Users/liaosheng/.m2/repository/org/bouncycastle/bcpkix-jdk15on/1.60/bcpkix-jdk15on-1.60.jar:/Users/liaosheng/.m2/repository/jline/jline/2.11/jline-2.11.jar:/Users/liaosheng/.m2/repository/io/dropwizard/metrics/metrics-core/3.2.5/metrics-core-3.2.5.jar:/Users/liaosheng/.m2/repository/log4j/log4j/1.2.17/log4j-1.2.17.jar:/Users/liaosheng/.m2/repository/org/apache/kerby/kerb-core/2.0.0/kerb-core-2.0.0.jar:/Users/liaosheng/.m2/repository/org/apache/kerby/kerby-pkix/2.0.0/kerby-pkix-2.0.0.jar:/Users/liaosheng/.m2/repository/org/apache/kerby/kerby-asn1/2.0.0/kerby-asn1-2.0.0.jar:/Users/liaosheng/.m2/repository/org/apache/kerby/kerby-util/2.0.0/kerby-util-2.0.0.jar:/Users/liaosheng/.m2/repository/org/apache/kerby/kerb-simplekdc/2.0.0/kerb-simplekdc-2.0.0.jar:/Users/liaosheng/.m2/repository/org/apache/kerby/kerb-client/2.0.0/kerb-client-2.0.0.jar:/Users/liaosheng/.m2/repository/org/apache/kerby/kerb-common/2.0.0/kerb-common-2.0.0.jar:/Users/liaosheng/.m2/repository/org/apache/kerby/kerb-crypto/2.0.0/kerb-crypto-2.0.0.jar:/Users/liaosheng/.m2/repository/commons-io/commons-io/2.6/commons-io-2.6.jar:/Users/liaosheng/.m2/repository/org/apache/kerby/kerb-util/2.0.0/kerb-util-2.0.0.jar:/Users/liaosheng/.m2/repository/org/apache/kerby/token-provider/2.0.0/token-provider-2.0.0.jar:/Users/liaosheng/.m2/repository/com/nimbusds/nimbus-jose-jwt/4.41.2/nimbus-jose-jwt-4.41.2.jar:/Users/liaosheng/.m2/repository/com/github/stephenc/jcip/jcip-annotations/1.0-1/jcip-annotations-1.0-1.jar:/Users/liaosheng/.m2/repository/net/minidev/json-smart/2.3/json-smart-2.3.jar:/Users/liaosheng/.m2/repository/net/minidev/accessors-smart/1.2/accessors-smart-1.2.jar:/Users/liaosheng/.m2/repository/org/ow2/asm/asm/5.0.4/asm-5.0.4.jar:/Users/liaosheng/.m2/repository/org/apache/kerby/kerb-admin/2.0.0/kerb-admin-2.0.0.jar:/Users/liaosheng/.m2/repository/org/apache/kerby/kerb-server/2.0.0/kerb-server-2.0.0.jar:/Users/liaosheng/.m2/repository/org/apache/kerby/kerb-identity/2.0.0/kerb-identity-2.0.0.jar:/Users/liaosheng/.m2/repository/org/apache/kerby/kerby-xdr/2.0.0/kerby-xdr-2.0.0.jar:/Users/liaosheng/.m2/repository/org/apache/kerby/kerby-config/2.0.0/kerby-config-2.0.0.jar:/Users/liaosheng/.m2/repository/org/mockito/mockito-core/2.27.0/mockito-core-2.27.0.jar:/Users/liaosheng/.m2/repository/net/bytebuddy/byte-buddy/1.9.10/byte-buddy-1.9.10.jar:/Users/liaosheng/.m2/repository/net/bytebuddy/byte-buddy-agent/1.9.10/byte-buddy-agent-1.9.10.jar:/Users/liaosheng/.m2/repository/org/objenesis/objenesis/2.6/objenesis-2.6.jar:/Users/liaosheng/.m2/repository/org/jmockit/jmockit/1.48/jmockit-1.48.jar:/Users/liaosheng/.m2/repository/junit/junit/4.12/junit-4.12.jar:/Users/liaosheng/.m2/repository/org/hamcrest/hamcrest-core/1.3/hamcrest-core-1.3.jar:/Users/liaosheng/.m2/repository/org/xerial/snappy/snappy-java/1.1.7/snappy-java-1.1.7.jar:
2020-03-18 17:39:40,044 [myid:] - INFO  [main:Environment@98] - Server environment:java.library.path=/Users/liaosheng/Library/Java/Extensions:/Library/Java/Extensions:/Network/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java:.
2020-03-18 17:39:40,044 [myid:] - INFO  [main:Environment@98] - Server environment:java.io.tmpdir=/var/folders/c9/j1lmbpys2t38k93k9_tlj4100000gp/T/
2020-03-18 17:39:40,044 [myid:] - INFO  [main:Environment@98] - Server environment:java.compiler=<NA>
2020-03-18 17:39:40,045 [myid:] - INFO  [main:Environment@98] - Server environment:os.name=Mac OS X
2020-03-18 17:39:40,045 [myid:] - INFO  [main:Environment@98] - Server environment:os.arch=x86_64
2020-03-18 17:39:40,045 [myid:] - INFO  [main:Environment@98] - Server environment:os.version=10.14.5
2020-03-18 17:39:40,045 [myid:] - INFO  [main:Environment@98] - Server environment:user.name=liaosheng
2020-03-18 17:39:40,045 [myid:] - INFO  [main:Environment@98] - Server environment:user.home=/Users/liaosheng
2020-03-18 17:39:40,045 [myid:] - INFO  [main:Environment@98] - Server environment:user.dir=/Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server
2020-03-18 17:39:40,045 [myid:] - INFO  [main:Environment@98] - Server environment:os.memory.free=113MB
2020-03-18 17:39:40,046 [myid:] - INFO  [main:Environment@98] - Server environment:os.memory.max=455MB
2020-03-18 17:39:40,046 [myid:] - INFO  [main:Environment@98] - Server environment:os.memory.total=123MB
2020-03-18 17:39:40,046 [myid:] - INFO  [main:ZooKeeperServer@128] - zookeeper.enableEagerACLCheck = false
2020-03-18 17:39:40,046 [myid:] - INFO  [main:ZooKeeperServer@136] - zookeeper.digest.enabled = true
2020-03-18 17:39:40,046 [myid:] - INFO  [main:ZooKeeperServer@140] - zookeeper.closeSessionTxn.enabled = true
2020-03-18 17:39:40,046 [myid:] - INFO  [main:ZooKeeperServer@1433] - zookeeper.flushDelay=0
2020-03-18 17:39:40,047 [myid:] - INFO  [main:ZooKeeperServer@1442] - zookeeper.maxWriteQueuePollTime=0
2020-03-18 17:39:40,047 [myid:] - INFO  [main:ZooKeeperServer@1451] - zookeeper.maxBatchSize=1000
2020-03-18 17:39:40,047 [myid:] - INFO  [main:ZooKeeperServer@241] - zookeeper.intBufferStartingSizeBytes = 1024
2020-03-18 17:39:40,053 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:39:40,053 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:39:40,053 [myid:] - INFO  [main:ZKDatabase@132] - zookeeper.snapshotSizeFactor = 0.33
2020-03-18 17:39:40,053 [myid:] - INFO  [main:ZKDatabase@152] - zookeeper.commitLogCount=500
2020-03-18 17:39:40,053 [myid:] - WARN  [main:QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:39:40,056 [myid:] - INFO  [main:QuorumUtil@118] - Creating QuorumPeer 2; public port 13918
2020-03-18 17:39:40,056 [myid:] - INFO  [main:ServerCnxnFactory@169] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2020-03-18 17:39:40,056 [myid:] - WARN  [main:ServerCnxnFactory@309] - maxCnxns is not configured, using default value 0.
2020-03-18 17:39:40,056 [myid:] - INFO  [main:NIOServerCnxnFactory@666] - Configuring NIO connection handler with 10s sessionless connection timeout, 1 selector thread(s), 8 worker threads, and 64 kB direct buffers.
2020-03-18 17:39:40,057 [myid:] - INFO  [main:NIOServerCnxnFactory@674] - binding to port /127.0.0.1:13918
2020-03-18 17:39:40,057 [myid:] - INFO  [main:FileTxnSnapLog@124] - zookeeper.snapshot.trust.empty : false
2020-03-18 17:39:40,057 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:39:40,058 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:39:40,058 [myid:] - INFO  [main:ZKDatabase@132] - zookeeper.snapshotSizeFactor = 0.33
2020-03-18 17:39:40,058 [myid:] - INFO  [main:ZKDatabase@152] - zookeeper.commitLogCount=500
2020-03-18 17:39:40,058 [myid:] - WARN  [main:QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:39:40,058 [myid:] - INFO  [main:QuorumUtil@118] - Creating QuorumPeer 3; public port 13921
2020-03-18 17:39:40,059 [myid:] - INFO  [main:ServerCnxnFactory@169] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2020-03-18 17:39:40,059 [myid:] - WARN  [main:ServerCnxnFactory@309] - maxCnxns is not configured, using default value 0.
2020-03-18 17:39:40,060 [myid:] - INFO  [main:NIOServerCnxnFactory@666] - Configuring NIO connection handler with 10s sessionless connection timeout, 1 selector thread(s), 8 worker threads, and 64 kB direct buffers.
2020-03-18 17:39:40,060 [myid:] - INFO  [main:NIOServerCnxnFactory@674] - binding to port /127.0.0.1:13921
2020-03-18 17:39:40,061 [myid:] - INFO  [main:FileTxnSnapLog@124] - zookeeper.snapshot.trust.empty : false
2020-03-18 17:39:40,061 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:39:40,062 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:39:40,062 [myid:] - INFO  [main:ZKDatabase@132] - zookeeper.snapshotSizeFactor = 0.33
2020-03-18 17:39:40,062 [myid:] - INFO  [main:ZKDatabase@152] - zookeeper.commitLogCount=500
2020-03-18 17:39:40,062 [myid:] - WARN  [main:QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:39:40,062 [myid:] - INFO  [main:QuorumUtil@250] - Shutting down quorum peer QuorumPeer
2020-03-18 17:39:40,066 [myid:] - INFO  [main:QuorumUtil@257] - No election available to shutdown QuorumPeer
2020-03-18 17:39:40,066 [myid:] - INFO  [main:QuorumUtil@259] - Waiting for QuorumPeer to exit thread
2020-03-18 17:39:40,066 [myid:] - INFO  [main:QuorumUtil@250] - Shutting down quorum peer QuorumPeer
2020-03-18 17:39:40,066 [myid:] - INFO  [main:QuorumUtil@257] - No election available to shutdown QuorumPeer
2020-03-18 17:39:40,066 [myid:] - INFO  [main:QuorumUtil@259] - Waiting for QuorumPeer to exit thread
2020-03-18 17:39:40,066 [myid:] - INFO  [main:QuorumUtil@250] - Shutting down quorum peer QuorumPeer
2020-03-18 17:39:40,067 [myid:] - INFO  [main:QuorumUtil@257] - No election available to shutdown QuorumPeer
2020-03-18 17:39:40,067 [myid:] - INFO  [main:QuorumUtil@259] - Waiting for QuorumPeer to exit thread
2020-03-18 17:39:40,069 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13915
2020-03-18 17:39:40,072 [myid:] - INFO  [main:QuorumUtil@243] - 127.0.0.1:13915 is no longer accepting client connections
2020-03-18 17:39:40,072 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13918
2020-03-18 17:39:40,072 [myid:] - INFO  [main:QuorumUtil@243] - 127.0.0.1:13918 is no longer accepting client connections
2020-03-18 17:39:40,072 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13921
2020-03-18 17:39:40,073 [myid:] - INFO  [main:QuorumUtil@243] - 127.0.0.1:13921 is no longer accepting client connections
2020-03-18 17:39:40,073 [myid:] - INFO  [main:QuorumUtil@204] - Creating QuorumPeer 1; public port 13915
2020-03-18 17:39:40,073 [myid:] - INFO  [main:ServerCnxnFactory@169] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2020-03-18 17:39:40,074 [myid:] - WARN  [main:ServerCnxnFactory@309] - maxCnxns is not configured, using default value 0.
2020-03-18 17:39:40,074 [myid:] - INFO  [main:NIOServerCnxnFactory@666] - Configuring NIO connection handler with 10s sessionless connection timeout, 1 selector thread(s), 8 worker threads, and 64 kB direct buffers.
2020-03-18 17:39:40,074 [myid:] - INFO  [main:NIOServerCnxnFactory@674] - binding to port /127.0.0.1:13915
2020-03-18 17:39:40,074 [myid:] - INFO  [main:FileTxnSnapLog@124] - zookeeper.snapshot.trust.empty : false
2020-03-18 17:39:40,075 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:39:40,075 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:39:40,075 [myid:] - INFO  [main:ZKDatabase@132] - zookeeper.snapshotSizeFactor = 0.33
2020-03-18 17:39:40,075 [myid:] - INFO  [main:ZKDatabase@152] - zookeeper.commitLogCount=500
2020-03-18 17:39:40,075 [myid:] - WARN  [main:QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:39:40,135 [myid:] - INFO  [main:FileTxnSnapLog@251] - Initialize file found, an empty database will not block voting participation
2020-03-18 17:39:40,158 [myid:] - INFO  [main:SnapStream@61] - zookeeper.snapshot.compression.method = CHECKED
2020-03-18 17:39:40,158 [myid:] - INFO  [main:FileTxnSnapLog@470] - Snapshotting: 0x0 to /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test1595495288663900759.junit.dir/version-2/snapshot.0
2020-03-18 17:39:40,183 [myid:] - INFO  [main:ZKDatabase@289] - Snapshot loaded in 108 ms, highest zxid is 0x0, digest is 1371985504
2020-03-18 17:39:40,184 [myid:] - INFO  [main:QuorumPeer@1102] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2020-03-18 17:39:40,191 [myid:] - INFO  [main:QuorumPeer@1122] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2020-03-18 17:39:40,197 [myid:] - INFO  [main:QuorumPeer@2503] - Using 6000ms as the quorum cnxn socket timeout
2020-03-18 17:39:40,207 [myid:] - INFO  [main:QuorumCnxManager$Listener@906] - Election port bind maximum retries is 3
2020-03-18 17:39:40,216 [myid:] - INFO  [main:FastLeaderElection@87] - zookeeper.fastleader.minNotificationInterval=200
2020-03-18 17:39:40,216 [myid:] - INFO  [main:FastLeaderElection@89] - zookeeper.fastleader.maxNotificationInterval=60000
2020-03-18 17:39:40,221 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13917:QuorumCnxManager$Listener$ListenerHandler@1047] - My election bind port: /127.0.0.1:13917
2020-03-18 17:39:40,222 [myid:] - INFO  [main:QuorumUtil@146] - Started QuorumPeer 1
2020-03-18 17:39:40,223 [myid:] - INFO  [main:QuorumUtil@204] - Creating QuorumPeer 2; public port 13918
2020-03-18 17:39:40,224 [myid:] - INFO  [main:ServerCnxnFactory@169] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2020-03-18 17:39:40,224 [myid:] - WARN  [main:ServerCnxnFactory@309] - maxCnxns is not configured, using default value 0.
2020-03-18 17:39:40,225 [myid:] - INFO  [main:NIOServerCnxnFactory@666] - Configuring NIO connection handler with 10s sessionless connection timeout, 1 selector thread(s), 8 worker threads, and 64 kB direct buffers.
2020-03-18 17:39:40,225 [myid:] - INFO  [main:NIOServerCnxnFactory@674] - binding to port /127.0.0.1:13918
2020-03-18 17:39:40,225 [myid:] - INFO  [main:FileTxnSnapLog@124] - zookeeper.snapshot.trust.empty : false
2020-03-18 17:39:40,226 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:39:40,226 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:39:40,227 [myid:] - INFO  [main:ZKDatabase@132] - zookeeper.snapshotSizeFactor = 0.33
2020-03-18 17:39:40,227 [myid:] - INFO  [main:ZKDatabase@152] - zookeeper.commitLogCount=500
2020-03-18 17:39:40,227 [myid:] - WARN  [main:QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:39:40,228 [myid:] - INFO  [main:FileTxnSnapLog@251] - Initialize file found, an empty database will not block voting participation
2020-03-18 17:39:40,229 [myid:] - INFO  [main:FileTxnSnapLog@470] - Snapshotting: 0x0 to /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test5940842853387238221.junit.dir/version-2/snapshot.0
2020-03-18 17:39:40,230 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):QuorumPeer@1371] - LOOKING
2020-03-18 17:39:40,230 [myid:] - INFO  [main:ZKDatabase@289] - Snapshot loaded in 3 ms, highest zxid is 0x0, digest is 1371985504
2020-03-18 17:39:40,231 [myid:] - INFO  [main:QuorumPeer@1102] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2020-03-18 17:39:40,231 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):FastLeaderElection@931] - New election. My id = 1, proposed zxid=0x0
2020-03-18 17:39:40,232 [myid:] - INFO  [main:QuorumPeer@1122] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2020-03-18 17:39:40,241 [myid:] - INFO  [main:QuorumPeer@2503] - Using 6000ms as the quorum cnxn socket timeout
2020-03-18 17:39:40,242 [myid:] - INFO  [main:QuorumCnxManager$Listener@906] - Election port bind maximum retries is 3
2020-03-18 17:39:40,245 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13920:QuorumCnxManager$Listener$ListenerHandler@1047] - My election bind port: /127.0.0.1:13920
2020-03-18 17:39:40,245 [myid:] - INFO  [main:QuorumUtil@146] - Started QuorumPeer 2
2020-03-18 17:39:40,245 [myid:] - INFO  [main:QuorumUtil@204] - Creating QuorumPeer 3; public port 13921
2020-03-18 17:39:40,246 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13918)(secure=disabled):QuorumPeer@1371] - LOOKING
2020-03-18 17:39:40,246 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13918)(secure=disabled):FastLeaderElection@931] - New election. My id = 2, proposed zxid=0x0
2020-03-18 17:39:40,246 [myid:] - INFO  [main:ServerCnxnFactory@169] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2020-03-18 17:39:40,257 [myid:] - INFO  [WorkerSender[myid=1]:QuorumCnxManager@462] - Have smaller server identifier, so dropping the connection: (2, 1)
2020-03-18 17:39:40,256 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13917:QuorumCnxManager$Listener$ListenerHandler@1052] - Received connection request /127.0.0.1:51904
2020-03-18 17:39:40,259 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:1, n.state:LOOKING, n.leader:1, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:39:40,256 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13920:QuorumCnxManager$Listener$ListenerHandler@1052] - Received connection request /127.0.0.1:51905
2020-03-18 17:39:40,261 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:39:40,261 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 1 my id = 2
2020-03-18 17:39:40,262 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13917:QuorumCnxManager$Listener$ListenerHandler@1052] - Received connection request /127.0.0.1:51906
2020-03-18 17:39:40,262 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:2, n.state:LOOKING, n.leader:2, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:39:40,262 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 2, my id = 1
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:39:40,263 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:39:40,263 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:2, n.state:LOOKING, n.leader:2, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:39:40,263 [myid:] - WARN  [WorkerSender[myid=2]:QuorumCnxManager@716] - Cannot open channel to 3 at election address /127.0.0.1:13923
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:677)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:748)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:644)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:503)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:487)
	at java.lang.Thread.run(Thread.java:748)
2020-03-18 17:39:40,262 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:39:40,264 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@716] - Cannot open channel to 3 at election address /127.0.0.1:13923
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:677)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:748)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:644)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:503)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:487)
	at java.lang.Thread.run(Thread.java:748)
2020-03-18 17:39:40,264 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:1, n.state:LOOKING, n.leader:1, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:39:40,264 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 2 my id = 1
2020-03-18 17:39:40,266 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:1, n.state:LOOKING, n.leader:2, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:39:40,267 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:1, n.state:LOOKING, n.leader:2, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:39:40,269 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@716] - Cannot open channel to 3 at election address /127.0.0.1:13923
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:677)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:748)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:644)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:503)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:487)
	at java.lang.Thread.run(Thread.java:748)
2020-03-18 17:39:40,277 [myid:] - WARN  [main:ServerCnxnFactory@309] - maxCnxns is not configured, using default value 0.
2020-03-18 17:39:40,278 [myid:] - INFO  [main:NIOServerCnxnFactory@666] - Configuring NIO connection handler with 10s sessionless connection timeout, 1 selector thread(s), 8 worker threads, and 64 kB direct buffers.
2020-03-18 17:39:40,278 [myid:] - INFO  [main:NIOServerCnxnFactory@674] - binding to port /127.0.0.1:13921
2020-03-18 17:39:40,278 [myid:] - INFO  [main:FileTxnSnapLog@124] - zookeeper.snapshot.trust.empty : false
2020-03-18 17:39:40,279 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:39:40,279 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:39:40,279 [myid:] - INFO  [main:ZKDatabase@132] - zookeeper.snapshotSizeFactor = 0.33
2020-03-18 17:39:40,280 [myid:] - INFO  [main:ZKDatabase@152] - zookeeper.commitLogCount=500
2020-03-18 17:39:40,280 [myid:] - WARN  [main:QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:39:40,280 [myid:] - INFO  [main:FileTxnSnapLog@251] - Initialize file found, an empty database will not block voting participation
2020-03-18 17:39:40,281 [myid:] - INFO  [main:FileTxnSnapLog@470] - Snapshotting: 0x0 to /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test7878326932341888535.junit.dir/version-2/snapshot.0
2020-03-18 17:39:40,283 [myid:] - INFO  [main:ZKDatabase@289] - Snapshot loaded in 3 ms, highest zxid is 0x0, digest is 1371985504
2020-03-18 17:39:40,284 [myid:] - INFO  [main:QuorumPeer@1102] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2020-03-18 17:39:40,289 [myid:] - INFO  [main:QuorumPeer@1122] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2020-03-18 17:39:40,293 [myid:] - INFO  [main:QuorumPeer@2503] - Using 6000ms as the quorum cnxn socket timeout
2020-03-18 17:39:40,293 [myid:] - INFO  [main:QuorumCnxManager$Listener@906] - Election port bind maximum retries is 3
2020-03-18 17:39:40,294 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13923:QuorumCnxManager$Listener$ListenerHandler@1047] - My election bind port: /127.0.0.1:13923
2020-03-18 17:39:40,295 [myid:] - INFO  [main:QuorumUtil@146] - Started QuorumPeer 3
2020-03-18 17:39:40,295 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13921)(secure=disabled):QuorumPeer@1371] - LOOKING
2020-03-18 17:39:40,295 [myid:] - INFO  [main:QuorumUtil@149] - Checking ports 127.0.0.1:13915,127.0.0.1:13918,127.0.0.1:13921
2020-03-18 17:39:40,296 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13921)(secure=disabled):FastLeaderElection@931] - New election. My id = 3, proposed zxid=0x0
2020-03-18 17:39:40,296 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13915
2020-03-18 17:39:40,297 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13917:QuorumCnxManager$Listener$ListenerHandler@1052] - Received connection request /127.0.0.1:51912
2020-03-18 17:39:40,298 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:3, n.state:LOOKING, n.leader:3, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:39:40,298 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13920:QuorumCnxManager$Listener$ListenerHandler@1052] - Received connection request /127.0.0.1:51913
2020-03-18 17:39:40,299 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:1, n.state:LOOKING, n.leader:2, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:39:40,300 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:2, n.state:LOOKING, n.leader:2, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:39:40,301 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:3, n.state:LOOKING, n.leader:3, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:39:40,301 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:3, n.state:LOOKING, n.leader:3, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:39:40,313 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:2, n.state:LOOKING, n.leader:3, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:39:40,313 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:2, n.state:LOOKING, n.leader:3, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:39:40,314 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:2, n.state:LOOKING, n.leader:3, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:39:40,321 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:1, n.state:LOOKING, n.leader:3, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:39:40,321 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:1, n.state:LOOKING, n.leader:3, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:39:40,322 [myid:] - INFO  [NIOWorkerThread-1:FourLetterCommands@223] - The list of known four letter word commands is : [{1936881266=srvr, 1937006964=stat, 2003003491=wchc, 1685417328=dump, 1668445044=crst, 1936880500=srst, 1701738089=envi, 1668247142=conf, -720899=telnet close, 1751217000=hash, 2003003507=wchs, 2003003504=wchp, 1684632179=dirs, 1668247155=cons, 1835955314=mntr, 1769173615=isro, 1920298859=ruok, 1735683435=gtmk, 1937010027=stmk}]
2020-03-18 17:39:40,323 [myid:] - INFO  [NIOWorkerThread-1:FourLetterCommands@224] - The list of enabled four letter word commands is : [[wchs, stat, wchp, dirs, stmk, conf, ruok, mntr, srvr, wchc, envi, srst, isro, dump, gtmk, telnet close, crst, hash, cons]]
2020-03-18 17:39:40,324 [myid:] - INFO  [NIOWorkerThread-1:NIOServerCnxn@507] - Processing stat command from /127.0.0.1:51911
2020-03-18 17:39:40,326 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:1, n.state:LOOKING, n.leader:3, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:39:40,524 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13918)(secure=disabled):QuorumPeer@857] - Peer state changed: following
2020-03-18 17:39:40,524 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):QuorumPeer@857] - Peer state changed: following
2020-03-18 17:39:40,525 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13918)(secure=disabled):QuorumPeer@1453] - FOLLOWING
2020-03-18 17:39:40,525 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):QuorumPeer@1453] - FOLLOWING
2020-03-18 17:39:40,529 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13921)(secure=disabled):QuorumPeer@857] - Peer state changed: leading
2020-03-18 17:39:40,529 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13918)(secure=disabled):Learner@117] - leaderConnectDelayDuringRetryMs: 100
2020-03-18 17:39:40,530 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13918)(secure=disabled):Learner@118] - TCP NoDelay set to: true
2020-03-18 17:39:40,530 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13921)(secure=disabled):QuorumPeer@1465] - LEADING
2020-03-18 17:39:40,532 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):BlueThrottle@141] - Weighed connection throttling is disabled
2020-03-18 17:39:40,532 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13921)(secure=disabled):LearnerMaster@47] - zookeeper.leader.maxConcurrentSnapSyncs = 10
2020-03-18 17:39:40,532 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13921)(secure=disabled):LearnerMaster@50] - zookeeper.leader.maxConcurrentDiffSyncs = 100
2020-03-18 17:39:40,532 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13921)(secure=disabled):Leader@84] - TCP NoDelay set to: true
2020-03-18 17:39:40,533 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13921)(secure=disabled):Leader@105] - zookeeper.leader.ackLoggingFrequency = 1000
2020-03-18 17:39:40,533 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13921)(secure=disabled):Leader@1351] - zookeeper.leader.maxTimeToWaitForEpoch = -1ms
2020-03-18 17:39:40,533 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13918)(secure=disabled):ZooKeeperServer@1246] - minSessionTimeout set to 4000
2020-03-18 17:39:40,533 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):ZooKeeperServer@1246] - minSessionTimeout set to 4000
2020-03-18 17:39:40,534 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13918)(secure=disabled):ZooKeeperServer@1255] - maxSessionTimeout set to 40000
2020-03-18 17:39:40,534 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):ZooKeeperServer@1255] - maxSessionTimeout set to 40000
2020-03-18 17:39:40,534 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13921)(secure=disabled):ZooKeeperServer@1246] - minSessionTimeout set to 4000
2020-03-18 17:39:40,534 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13921)(secure=disabled):ZooKeeperServer@1255] - maxSessionTimeout set to 40000
2020-03-18 17:39:40,536 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):ResponseCache@45] - Response cache size is initialized with value 400.
2020-03-18 17:39:40,536 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13918)(secure=disabled):ResponseCache@45] - Response cache size is initialized with value 400.
2020-03-18 17:39:40,536 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13921)(secure=disabled):ResponseCache@45] - Response cache size is initialized with value 400.
2020-03-18 17:39:40,536 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13918)(secure=disabled):ResponseCache@45] - Response cache size is initialized with value 400.
2020-03-18 17:39:40,536 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):ResponseCache@45] - Response cache size is initialized with value 400.
2020-03-18 17:39:40,536 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13921)(secure=disabled):ResponseCache@45] - Response cache size is initialized with value 400.
2020-03-18 17:39:40,538 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13918)(secure=disabled):RequestPathMetricsCollector@111] - zookeeper.pathStats.slotCapacity = 60
2020-03-18 17:39:40,538 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13921)(secure=disabled):RequestPathMetricsCollector@111] - zookeeper.pathStats.slotCapacity = 60
2020-03-18 17:39:40,538 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):RequestPathMetricsCollector@111] - zookeeper.pathStats.slotCapacity = 60
2020-03-18 17:39:40,538 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13921)(secure=disabled):RequestPathMetricsCollector@112] - zookeeper.pathStats.slotDuration = 15
2020-03-18 17:39:40,538 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13918)(secure=disabled):RequestPathMetricsCollector@112] - zookeeper.pathStats.slotDuration = 15
2020-03-18 17:39:40,539 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13921)(secure=disabled):RequestPathMetricsCollector@113] - zookeeper.pathStats.maxDepth = 6
2020-03-18 17:39:40,538 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):RequestPathMetricsCollector@112] - zookeeper.pathStats.slotDuration = 15
2020-03-18 17:39:40,539 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13921)(secure=disabled):RequestPathMetricsCollector@114] - zookeeper.pathStats.initialDelay = 5
2020-03-18 17:39:40,539 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13918)(secure=disabled):RequestPathMetricsCollector@113] - zookeeper.pathStats.maxDepth = 6
2020-03-18 17:39:40,539 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13921)(secure=disabled):RequestPathMetricsCollector@115] - zookeeper.pathStats.delay = 5
2020-03-18 17:39:40,539 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):RequestPathMetricsCollector@113] - zookeeper.pathStats.maxDepth = 6
2020-03-18 17:39:40,540 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13921)(secure=disabled):RequestPathMetricsCollector@116] - zookeeper.pathStats.enabled = false
2020-03-18 17:39:40,539 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13918)(secure=disabled):RequestPathMetricsCollector@114] - zookeeper.pathStats.initialDelay = 5
2020-03-18 17:39:40,540 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):RequestPathMetricsCollector@114] - zookeeper.pathStats.initialDelay = 5
2020-03-18 17:39:40,540 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13918)(secure=disabled):RequestPathMetricsCollector@115] - zookeeper.pathStats.delay = 5
2020-03-18 17:39:40,540 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):RequestPathMetricsCollector@115] - zookeeper.pathStats.delay = 5
2020-03-18 17:39:40,540 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13918)(secure=disabled):RequestPathMetricsCollector@116] - zookeeper.pathStats.enabled = false
2020-03-18 17:39:40,540 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):RequestPathMetricsCollector@116] - zookeeper.pathStats.enabled = false
2020-03-18 17:39:40,542 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):ZooKeeperServer@1470] - The max bytes for all large requests are set to 104857600
2020-03-18 17:39:40,542 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13918)(secure=disabled):ZooKeeperServer@1470] - The max bytes for all large requests are set to 104857600
2020-03-18 17:39:40,542 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13921)(secure=disabled):ZooKeeperServer@1470] - The max bytes for all large requests are set to 104857600
2020-03-18 17:39:40,542 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13921)(secure=disabled):ZooKeeperServer@1484] - The large request threshold is set to -1
2020-03-18 17:39:40,542 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13921)(secure=disabled):ZooKeeperServer@329] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 clientPortListenBacklog -1 datadir /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test7878326932341888535.junit.dir/version-2 snapdir /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test7878326932341888535.junit.dir/version-2
2020-03-18 17:39:40,542 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13918)(secure=disabled):ZooKeeperServer@1484] - The large request threshold is set to -1
2020-03-18 17:39:40,543 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13918)(secure=disabled):ZooKeeperServer@329] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 clientPortListenBacklog -1 datadir /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test5940842853387238221.junit.dir/version-2 snapdir /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test5940842853387238221.junit.dir/version-2
2020-03-18 17:39:40,542 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):ZooKeeperServer@1484] - The large request threshold is set to -1
2020-03-18 17:39:40,544 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):ZooKeeperServer@329] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 clientPortListenBacklog -1 datadir /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test1595495288663900759.junit.dir/version-2 snapdir /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test1595495288663900759.junit.dir/version-2
2020-03-18 17:39:40,545 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13918)(secure=disabled):Follower@75] - FOLLOWING - LEADER ELECTION TOOK - 299 MS
2020-03-18 17:39:40,545 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):Follower@75] - FOLLOWING - LEADER ELECTION TOOK - 314 MS
2020-03-18 17:39:40,548 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13918)(secure=disabled):QuorumPeer@863] - Peer state changed: following - discovery
2020-03-18 17:39:40,548 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):QuorumPeer@863] - Peer state changed: following - discovery
2020-03-18 17:39:40,548 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13921)(secure=disabled):Leader@581] - LEADING - LEADER ELECTION TOOK - 252 MS
2020-03-18 17:39:40,550 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13921)(secure=disabled):QuorumPeer@863] - Peer state changed: leading - discovery
2020-03-18 17:39:40,550 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13921)(secure=disabled):FileTxnSnapLog@470] - Snapshotting: 0x0 to /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test7878326932341888535.junit.dir/version-2/snapshot.0
2020-03-18 17:39:40,552 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13921)(secure=disabled):ZooKeeperServer@519] - Snapshot taken in 2 ms
2020-03-18 17:39:40,555 [myid:] - INFO  [LeaderConnector-/127.0.0.1:13922:Learner$LeaderConnector@328] - Successfully connected to leader, using address: /127.0.0.1:13922
2020-03-18 17:39:40,555 [myid:] - INFO  [LeaderConnector-/127.0.0.1:13922:Learner$LeaderConnector@328] - Successfully connected to leader, using address: /127.0.0.1:13922
2020-03-18 17:39:40,563 [myid:] - INFO  [LearnerHandler-/127.0.0.1:51964:LearnerHandler@504] - Follower sid: 2 : info : 127.0.0.1:13919:13920:participant;127.0.0.1:13918
2020-03-18 17:39:40,563 [myid:] - INFO  [LearnerHandler-/127.0.0.1:51966:LearnerHandler@504] - Follower sid: 1 : info : 127.0.0.1:13916:13917:participant;127.0.0.1:13915
2020-03-18 17:39:40,567 [myid:] - WARN  [QuorumPeer[myid=3](plain=127.0.0.1:13921)(secure=disabled):QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:39:40,567 [myid:] - INFO  [LearnerHandler-/127.0.0.1:51966:ZKDatabase@345] - On disk txn sync enabled with snapshotSizeFactor 0.33
2020-03-18 17:39:40,568 [myid:] - INFO  [LearnerHandler-/127.0.0.1:51966:LearnerHandler@800] - Synchronizing with Learner sid: 1 maxCommittedLog=0x0 minCommittedLog=0x0 lastProcessedZxid=0x0 peerLastZxid=0x0
2020-03-18 17:39:40,568 [myid:] - INFO  [LearnerHandler-/127.0.0.1:51966:LearnerHandler@845] - Sending DIFF zxid=0x0 for peer sid: 1
2020-03-18 17:39:40,567 [myid:] - INFO  [LearnerHandler-/127.0.0.1:51964:ZKDatabase@345] - On disk txn sync enabled with snapshotSizeFactor 0.33
2020-03-18 17:39:40,568 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):QuorumPeer@863] - Peer state changed: following - synchronization
2020-03-18 17:39:40,568 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13918)(secure=disabled):QuorumPeer@863] - Peer state changed: following - synchronization
2020-03-18 17:39:40,569 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13921)(secure=disabled):QuorumPeer@863] - Peer state changed: leading - synchronization
2020-03-18 17:39:40,568 [myid:] - INFO  [LearnerHandler-/127.0.0.1:51964:LearnerHandler@800] - Synchronizing with Learner sid: 2 maxCommittedLog=0x0 minCommittedLog=0x0 lastProcessedZxid=0x0 peerLastZxid=0x0
2020-03-18 17:39:40,569 [myid:] - INFO  [LearnerHandler-/127.0.0.1:51964:LearnerHandler@845] - Sending DIFF zxid=0x0 for peer sid: 2
2020-03-18 17:39:40,570 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):Learner@509] - Getting a diff from the leader 0x0
2020-03-18 17:39:40,570 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13918)(secure=disabled):Learner@509] - Getting a diff from the leader 0x0
2020-03-18 17:39:40,570 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):QuorumPeer@868] - Peer state changed: following - synchronization - diff
2020-03-18 17:39:40,570 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13918)(secure=disabled):QuorumPeer@868] - Peer state changed: following - synchronization - diff
2020-03-18 17:39:40,580 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13918)(secure=disabled):Learner@675] - Learner received NEWLEADER message
2020-03-18 17:39:40,580 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):Learner@675] - Learner received NEWLEADER message
2020-03-18 17:39:40,580 [myid:] - WARN  [QuorumPeer[myid=2](plain=127.0.0.1:13918)(secure=disabled):QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:39:40,580 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:39:40,582 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13921)(secure=disabled):Leader@1501] - Have quorum of supporters, sids: [[1, 3],[1, 3]]; starting up and setting last processed zxid: 0x100000000
2020-03-18 17:39:40,589 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13915
2020-03-18 17:39:40,590 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13921)(secure=disabled):CommitProcessor@476] - Configuring CommitProcessor with readBatchSize -1 commitBatchSize 1
2020-03-18 17:39:40,591 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13921)(secure=disabled):CommitProcessor@438] - Configuring CommitProcessor with 4 worker threads.
2020-03-18 17:39:40,592 [myid:] - INFO  [NIOWorkerThread-2:NIOServerCnxn@507] - Processing stat command from /127.0.0.1:51967
2020-03-18 17:39:40,604 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13921)(secure=disabled):ContainerManager@83] - Using checkIntervalMs=60000 maxPerMinute=10000 maxNeverUsedIntervalMs=0
2020-03-18 17:39:40,605 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13921)(secure=disabled):RequestThrottler@74] - zookeeper.request_throttler.shutdownTimeout = 10000
2020-03-18 17:39:40,621 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13921)(secure=disabled):QuorumPeer@863] - Peer state changed: leading - broadcast
2020-03-18 17:39:40,621 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):Learner@659] - Learner received UPTODATE message
2020-03-18 17:39:40,621 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13918)(secure=disabled):Learner@659] - Learner received UPTODATE message
2020-03-18 17:39:40,622 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):QuorumPeer@868] - Peer state changed: following - synchronization
2020-03-18 17:39:40,622 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13918)(secure=disabled):QuorumPeer@868] - Peer state changed: following - synchronization
2020-03-18 17:39:40,622 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):CommitProcessor@476] - Configuring CommitProcessor with readBatchSize -1 commitBatchSize 1
2020-03-18 17:39:40,622 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13918)(secure=disabled):CommitProcessor@476] - Configuring CommitProcessor with readBatchSize -1 commitBatchSize 1
2020-03-18 17:39:40,622 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):CommitProcessor@438] - Configuring CommitProcessor with 4 worker threads.
2020-03-18 17:39:40,622 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13918)(secure=disabled):CommitProcessor@438] - Configuring CommitProcessor with 4 worker threads.
2020-03-18 17:39:40,627 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):QuorumPeer@863] - Peer state changed: following - broadcast
2020-03-18 17:39:40,627 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13918)(secure=disabled):QuorumPeer@863] - Peer state changed: following - broadcast
2020-03-18 17:39:40,845 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13915
2020-03-18 17:39:40,846 [myid:] - INFO  [NIOWorkerThread-3:NIOServerCnxn@507] - Processing stat command from /127.0.0.1:51970
2020-03-18 17:39:40,847 [myid:] - INFO  [NIOWorkerThread-3:StatCommand@52] - Stat command output
2020-03-18 17:39:40,848 [myid:] - INFO  [main:QuorumUtil@152] - 127.0.0.1:13915 is accepting client connections
2020-03-18 17:39:40,848 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13918
2020-03-18 17:39:40,850 [myid:] - INFO  [NIOWorkerThread-1:NIOServerCnxn@507] - Processing stat command from /127.0.0.1:51971
2020-03-18 17:39:40,850 [myid:] - INFO  [NIOWorkerThread-1:StatCommand@52] - Stat command output
2020-03-18 17:39:40,851 [myid:] - INFO  [main:QuorumUtil@152] - 127.0.0.1:13918 is accepting client connections
2020-03-18 17:39:40,851 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13921
2020-03-18 17:39:40,855 [myid:] - INFO  [NIOWorkerThread-1:NIOServerCnxn@507] - Processing stat command from /127.0.0.1:51972
2020-03-18 17:39:40,855 [myid:] - INFO  [NIOWorkerThread-1:StatCommand@52] - Stat command output
2020-03-18 17:39:40,856 [myid:] - INFO  [main:QuorumUtil@152] - 127.0.0.1:13921 is accepting client connections
2020-03-18 17:39:40,856 [myid:] - INFO  [main:JMXEnv@191] - JMXEnv.dump() follows
2020-03-18 17:39:40,863 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.2
2020-03-18 17:39:40,863 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.3,name2=Leader,name3=Learner_Connections,name4="127.0.0.1:51966",name5="id:1"
2020-03-18 17:39:40,878 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1
2020-03-18 17:39:40,878 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1,name2=Follower,name3=InMemoryDataTree
2020-03-18 17:39:40,878 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.3
2020-03-18 17:39:40,878 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.3
2020-03-18 17:39:40,879 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id1
2020-03-18 17:39:40,879 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.2
2020-03-18 17:39:40,879 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id2
2020-03-18 17:39:40,879 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.1
2020-03-18 17:39:40,880 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3
2020-03-18 17:39:40,880 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.2,name2=Follower,name3=InMemoryDataTree
2020-03-18 17:39:40,880 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.3,name2=Leader
2020-03-18 17:39:40,880 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.2
2020-03-18 17:39:40,880 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.3,name2=Leader,name3=Learner_Connections,name4="127.0.0.1:51964",name5="id:2"
2020-03-18 17:39:40,880 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.1
2020-03-18 17:39:40,881 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.3
2020-03-18 17:39:40,881 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.3,name2=Leader,name3=InMemoryDataTree
2020-03-18 17:39:40,881 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1,name2=Follower
2020-03-18 17:39:40,881 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.2,name2=Follower
2020-03-18 17:39:40,888 [myid:] - INFO  [main:JMXEnv@116] - expect:InMemoryDataTree
2020-03-18 17:39:40,890 [myid:] - INFO  [main:JMXEnv@119] - found:InMemoryDataTree org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1,name2=Follower,name3=InMemoryDataTree
2020-03-18 17:39:40,890 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id1,name1=replica.1,name2=
2020-03-18 17:39:40,893 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id1,name1=replica.1,name2= org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1,name2=Follower
2020-03-18 17:39:40,894 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id2,name1=replica.2,name2=
2020-03-18 17:39:40,894 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id2,name1=replica.2,name2= org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.2,name2=Follower,name3=InMemoryDataTree
2020-03-18 17:39:40,895 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id3,name1=replica.3,name2=
2020-03-18 17:39:40,895 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id3,name1=replica.3,name2= org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.3,name2=Leader,name3=Learner_Connections,name4="127.0.0.1:51966",name5="id:1"
2020-03-18 17:39:40,895 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id1,name1=replica.1
2020-03-18 17:39:40,895 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id1,name1=replica.1 org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1
2020-03-18 17:39:40,896 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id1,name1=replica.2
2020-03-18 17:39:40,896 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id1,name1=replica.2 org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.2
2020-03-18 17:39:40,896 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id1,name1=replica.3
2020-03-18 17:39:40,896 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id1,name1=replica.3 org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.3
2020-03-18 17:39:40,896 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id2,name1=replica.1
2020-03-18 17:39:40,896 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id2,name1=replica.1 org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.1
2020-03-18 17:39:40,897 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id2,name1=replica.2
2020-03-18 17:39:40,897 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id2,name1=replica.2 org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.2
2020-03-18 17:39:40,897 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id2,name1=replica.3
2020-03-18 17:39:40,897 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id2,name1=replica.3 org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.3
2020-03-18 17:39:40,897 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id3,name1=replica.1
2020-03-18 17:39:40,897 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id3,name1=replica.1 org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.1
2020-03-18 17:39:40,898 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id3,name1=replica.2
2020-03-18 17:39:40,898 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id3,name1=replica.2 org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.2
2020-03-18 17:39:40,898 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id3,name1=replica.3
2020-03-18 17:39:40,899 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id3,name1=replica.3 org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.3,name2=Leader
2020-03-18 17:39:40,899 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id1
2020-03-18 17:39:40,899 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id1 org.apache.ZooKeeperService:name0=ReplicatedServer_id1
2020-03-18 17:39:40,900 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id2
2020-03-18 17:39:40,900 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id2 org.apache.ZooKeeperService:name0=ReplicatedServer_id2
2020-03-18 17:39:40,900 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id3
2020-03-18 17:39:40,901 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id3 org.apache.ZooKeeperService:name0=ReplicatedServer_id3
2020-03-18 17:39:40,901 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@220] - Connecting to follower: 1
2020-03-18 17:39:40,901 [myid:] - INFO  [main:QuorumUtil@250] - Shutting down quorum peer QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled)
2020-03-18 17:39:40,902 [myid:] - INFO  [main:Follower@292] - shutdown Follower
2020-03-18 17:39:40,903 [myid:] - ERROR [LearnerHandler-/127.0.0.1:51966:LearnerHandler@707] - Unexpected exception causing shutdown while sock still open
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:96)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:134)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:643)
2020-03-18 17:39:40,903 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):Follower@129] - Exception when following the leader
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:96)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:134)
	at org.apache.zookeeper.server.quorum.Learner.readPacket(Learner.java:182)
	at org.apache.zookeeper.server.quorum.Follower.followLeader(Follower.java:125)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:1455)
2020-03-18 17:39:40,903 [myid:] - WARN  [LearnerHandler-/127.0.0.1:51966:LearnerHandler@730] - ******* GOODBYE /127.0.0.1:51966 ********
2020-03-18 17:39:40,904 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):Follower@143] - Disconnected from leader (with address: /127.0.0.1:13922). Was connected for 348ms. Sync state: true
2020-03-18 17:39:40,904 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):Follower@292] - shutdown Follower
2020-03-18 17:39:40,905 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):LearnerZooKeeperServer@160] - Shutting down
2020-03-18 17:39:40,905 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):ZooKeeperServer@784] - shutting down
2020-03-18 17:39:40,905 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):RequestThrottler@244] - Shutting down
2020-03-18 17:39:40,905 [myid:] - INFO  [RequestThrottler:RequestThrottler@205] - Draining request throttler queue
2020-03-18 17:39:40,905 [myid:] - INFO  [RequestThrottler:RequestThrottler@181] - RequestThrottler shutdown. Dropped 0 requests
2020-03-18 17:39:40,905 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):FollowerRequestProcessor@148] - Shutting down
2020-03-18 17:39:40,905 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):CommitProcessor@617] - Shutting down
2020-03-18 17:39:40,905 [myid:] - INFO  [FollowerRequestProcessor:1:FollowerRequestProcessor@112] - FollowerRequestProcessor exited loop!
2020-03-18 17:39:40,906 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):FinalRequestProcessor@662] - shutdown of request processor complete
2020-03-18 17:39:40,906 [myid:] - INFO  [CommitProcessor:1:CommitProcessor@406] - CommitProcessor exited loop!
2020-03-18 17:39:40,906 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):SyncRequestProcessor@256] - Shutting down
2020-03-18 17:39:40,906 [myid:] - INFO  [SyncThread:1:SyncRequestProcessor@225] - SyncRequestProcessor exited!
2020-03-18 17:39:40,906 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):QuorumPeer@863] - Peer state changed: looking
2020-03-18 17:39:40,906 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):QuorumPeer@1501] - PeerState set to LOOKING
2020-03-18 17:39:40,906 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):QuorumPeer@1483] - QuorumPeer main thread exited
2020-03-18 17:39:40,909 [myid:] - INFO  [NIOServerCxnFactory.AcceptThread:/127.0.0.1:13915:NIOServerCnxnFactory$AcceptThread@209] - accept thread exitted run method
2020-03-18 17:39:40,909 [myid:] - INFO  [NIOServerCxnFactory.SelectorThread-0:NIOServerCnxnFactory$SelectorThread@411] - selector thread exitted run method
2020-03-18 17:39:40,909 [myid:] - INFO  [ConnnectionExpirer:NIOServerCnxnFactory$ConnectionExpirerThread@578] - ConnnectionExpirerThread interrupted
2020-03-18 17:39:40,910 [myid:] - INFO  [QuorumPeerListener:QuorumCnxManager$Listener@961] - Leaving listener
2020-03-18 17:39:40,910 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 1, my id = 2
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:39:40,911 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:39:40,911 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:39:40,911 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 1 my id = 2
2020-03-18 17:39:40,911 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:39:40,911 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 2, my id = 1
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:39:40,911 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:39:40,911 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 2 my id = 1
2020-03-18 17:39:40,912 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 1, my id = 3
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:39:40,912 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:39:40,912 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 3, my id = 1
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:39:40,912 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:39:40,912 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:39:40,912 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 1 my id = 3
2020-03-18 17:39:40,912 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:39:40,913 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 3 my id = 1
2020-03-18 17:39:40,912 [myid:] - INFO  [main:QuorumUtil@254] - Shutting down leader election QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled)
2020-03-18 17:39:40,913 [myid:] - INFO  [main:QuorumUtil@259] - Waiting for QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled) to exit thread
2020-03-18 17:39:40,920 [myid:] - INFO  [main:Environment@98] - Client environment:zookeeper.version=3.6.0--b4c89dc7f6083829e18fae6e446907ae0b1f22d7, built on 03/18/2020 09:36 GMT
2020-03-18 17:39:40,920 [myid:] - INFO  [main:Environment@98] - Client environment:host.name=172.18.14.34
2020-03-18 17:39:40,920 [myid:] - INFO  [main:Environment@98] - Client environment:java.version=1.8.0_191
2020-03-18 17:39:40,920 [myid:] - INFO  [main:Environment@98] - Client environment:java.vendor=Oracle Corporation
2020-03-18 17:39:40,920 [myid:] - INFO  [main:Environment@98] - Client environment:java.home=/Library/Java/JavaVirtualMachines/jdk1.8.0_191.jdk/Contents/Home/jre
2020-03-18 17:39:40,920 [myid:] - INFO  [main:Environment@98] - Client environment:java.class.path=/Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/test-classes:/Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/classes:/Users/liaosheng/.m2/repository/com/github/spotbugs/spotbugs-annotations/3.1.9/spotbugs-annotations-3.1.9.jar:/Users/liaosheng/.m2/repository/com/google/code/findbugs/jsr305/3.0.2/jsr305-3.0.2.jar:/Users/liaosheng/.m2/repository/org/hamcrest/hamcrest-all/1.3/hamcrest-all-1.3.jar:/Users/liaosheng/.m2/repository/commons-collections/commons-collections/3.2.2/commons-collections-3.2.2.jar:/Users/liaosheng/.m2/repository/commons-lang/commons-lang/2.6/commons-lang-2.6.jar:/Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-jute/target/zookeeper-jute-3.6.0.jar:/Users/liaosheng/.m2/repository/commons-cli/commons-cli/1.2/commons-cli-1.2.jar:/Users/liaosheng/.m2/repository/org/apache/yetus/audience-annotations/0.5.0/audience-annotations-0.5.0.jar:/Users/liaosheng/.m2/repository/io/netty/netty-handler/4.1.45.Final/netty-handler-4.1.45.Final.jar:/Users/liaosheng/.m2/repository/io/netty/netty-common/4.1.45.Final/netty-common-4.1.45.Final.jar:/Users/liaosheng/.m2/repository/io/netty/netty-buffer/4.1.45.Final/netty-buffer-4.1.45.Final.jar:/Users/liaosheng/.m2/repository/io/netty/netty-transport/4.1.45.Final/netty-transport-4.1.45.Final.jar:/Users/liaosheng/.m2/repository/io/netty/netty-resolver/4.1.45.Final/netty-resolver-4.1.45.Final.jar:/Users/liaosheng/.m2/repository/io/netty/netty-codec/4.1.45.Final/netty-codec-4.1.45.Final.jar:/Users/liaosheng/.m2/repository/io/netty/netty-transport-native-epoll/4.1.45.Final/netty-transport-native-epoll-4.1.45.Final.jar:/Users/liaosheng/.m2/repository/io/netty/netty-transport-native-unix-common/4.1.45.Final/netty-transport-native-unix-common-4.1.45.Final.jar:/Users/liaosheng/.m2/repository/org/slf4j/slf4j-api/1.7.25/slf4j-api-1.7.25.jar:/Users/liaosheng/.m2/repository/org/slf4j/slf4j-log4j12/1.7.25/slf4j-log4j12-1.7.25.jar:/Users/liaosheng/.m2/repository/org/eclipse/jetty/jetty-server/9.4.24.v20191120/jetty-server-9.4.24.v20191120.jar:/Users/liaosheng/.m2/repository/javax/servlet/javax.servlet-api/3.1.0/javax.servlet-api-3.1.0.jar:/Users/liaosheng/.m2/repository/org/eclipse/jetty/jetty-http/9.4.24.v20191120/jetty-http-9.4.24.v20191120.jar:/Users/liaosheng/.m2/repository/org/eclipse/jetty/jetty-util/9.4.24.v20191120/jetty-util-9.4.24.v20191120.jar:/Users/liaosheng/.m2/repository/org/eclipse/jetty/jetty-io/9.4.24.v20191120/jetty-io-9.4.24.v20191120.jar:/Users/liaosheng/.m2/repository/org/eclipse/jetty/jetty-servlet/9.4.24.v20191120/jetty-servlet-9.4.24.v20191120.jar:/Users/liaosheng/.m2/repository/org/eclipse/jetty/jetty-security/9.4.24.v20191120/jetty-security-9.4.24.v20191120.jar:/Users/liaosheng/.m2/repository/com/fasterxml/jackson/core/jackson-databind/2.9.10.3/jackson-databind-2.9.10.3.jar:/Users/liaosheng/.m2/repository/com/fasterxml/jackson/core/jackson-annotations/2.9.10/jackson-annotations-2.9.10.jar:/Users/liaosheng/.m2/repository/com/fasterxml/jackson/core/jackson-core/2.9.10/jackson-core-2.9.10.jar:/Users/liaosheng/.m2/repository/com/googlecode/json-simple/json-simple/1.1.1/json-simple-1.1.1.jar:/Users/liaosheng/.m2/repository/org/bouncycastle/bcprov-jdk15on/1.60/bcprov-jdk15on-1.60.jar:/Users/liaosheng/.m2/repository/org/bouncycastle/bcpkix-jdk15on/1.60/bcpkix-jdk15on-1.60.jar:/Users/liaosheng/.m2/repository/jline/jline/2.11/jline-2.11.jar:/Users/liaosheng/.m2/repository/io/dropwizard/metrics/metrics-core/3.2.5/metrics-core-3.2.5.jar:/Users/liaosheng/.m2/repository/log4j/log4j/1.2.17/log4j-1.2.17.jar:/Users/liaosheng/.m2/repository/org/apache/kerby/kerb-core/2.0.0/kerb-core-2.0.0.jar:/Users/liaosheng/.m2/repository/org/apache/kerby/kerby-pkix/2.0.0/kerby-pkix-2.0.0.jar:/Users/liaosheng/.m2/repository/org/apache/kerby/kerby-asn1/2.0.0/kerby-asn1-2.0.0.jar:/Users/liaosheng/.m2/repository/org/apache/kerby/kerby-util/2.0.0/kerby-util-2.0.0.jar:/Users/liaosheng/.m2/repository/org/apache/kerby/kerb-simplekdc/2.0.0/kerb-simplekdc-2.0.0.jar:/Users/liaosheng/.m2/repository/org/apache/kerby/kerb-client/2.0.0/kerb-client-2.0.0.jar:/Users/liaosheng/.m2/repository/org/apache/kerby/kerb-common/2.0.0/kerb-common-2.0.0.jar:/Users/liaosheng/.m2/repository/org/apache/kerby/kerb-crypto/2.0.0/kerb-crypto-2.0.0.jar:/Users/liaosheng/.m2/repository/commons-io/commons-io/2.6/commons-io-2.6.jar:/Users/liaosheng/.m2/repository/org/apache/kerby/kerb-util/2.0.0/kerb-util-2.0.0.jar:/Users/liaosheng/.m2/repository/org/apache/kerby/token-provider/2.0.0/token-provider-2.0.0.jar:/Users/liaosheng/.m2/repository/com/nimbusds/nimbus-jose-jwt/4.41.2/nimbus-jose-jwt-4.41.2.jar:/Users/liaosheng/.m2/repository/com/github/stephenc/jcip/jcip-annotations/1.0-1/jcip-annotations-1.0-1.jar:/Users/liaosheng/.m2/repository/net/minidev/json-smart/2.3/json-smart-2.3.jar:/Users/liaosheng/.m2/repository/net/minidev/accessors-smart/1.2/accessors-smart-1.2.jar:/Users/liaosheng/.m2/repository/org/ow2/asm/asm/5.0.4/asm-5.0.4.jar:/Users/liaosheng/.m2/repository/org/apache/kerby/kerb-admin/2.0.0/kerb-admin-2.0.0.jar:/Users/liaosheng/.m2/repository/org/apache/kerby/kerb-server/2.0.0/kerb-server-2.0.0.jar:/Users/liaosheng/.m2/repository/org/apache/kerby/kerb-identity/2.0.0/kerb-identity-2.0.0.jar:/Users/liaosheng/.m2/repository/org/apache/kerby/kerby-xdr/2.0.0/kerby-xdr-2.0.0.jar:/Users/liaosheng/.m2/repository/org/apache/kerby/kerby-config/2.0.0/kerby-config-2.0.0.jar:/Users/liaosheng/.m2/repository/org/mockito/mockito-core/2.27.0/mockito-core-2.27.0.jar:/Users/liaosheng/.m2/repository/net/bytebuddy/byte-buddy/1.9.10/byte-buddy-1.9.10.jar:/Users/liaosheng/.m2/repository/net/bytebuddy/byte-buddy-agent/1.9.10/byte-buddy-agent-1.9.10.jar:/Users/liaosheng/.m2/repository/org/objenesis/objenesis/2.6/objenesis-2.6.jar:/Users/liaosheng/.m2/repository/org/jmockit/jmockit/1.48/jmockit-1.48.jar:/Users/liaosheng/.m2/repository/junit/junit/4.12/junit-4.12.jar:/Users/liaosheng/.m2/repository/org/hamcrest/hamcrest-core/1.3/hamcrest-core-1.3.jar:/Users/liaosheng/.m2/repository/org/xerial/snappy/snappy-java/1.1.7/snappy-java-1.1.7.jar:
2020-03-18 17:39:40,921 [myid:] - INFO  [main:Environment@98] - Client environment:java.library.path=/Users/liaosheng/Library/Java/Extensions:/Library/Java/Extensions:/Network/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java:.
2020-03-18 17:39:40,921 [myid:] - INFO  [main:Environment@98] - Client environment:java.io.tmpdir=/var/folders/c9/j1lmbpys2t38k93k9_tlj4100000gp/T/
2020-03-18 17:39:40,921 [myid:] - INFO  [main:Environment@98] - Client environment:java.compiler=<NA>
2020-03-18 17:39:40,921 [myid:] - INFO  [main:Environment@98] - Client environment:os.name=Mac OS X
2020-03-18 17:39:40,921 [myid:] - INFO  [main:Environment@98] - Client environment:os.arch=x86_64
2020-03-18 17:39:40,921 [myid:] - INFO  [main:Environment@98] - Client environment:os.version=10.14.5
2020-03-18 17:39:40,921 [myid:] - INFO  [main:Environment@98] - Client environment:user.name=liaosheng
2020-03-18 17:39:40,921 [myid:] - INFO  [main:Environment@98] - Client environment:user.home=/Users/liaosheng
2020-03-18 17:39:40,921 [myid:] - INFO  [main:Environment@98] - Client environment:user.dir=/Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server
2020-03-18 17:39:40,922 [myid:] - INFO  [main:Environment@98] - Client environment:os.memory.free=113MB
2020-03-18 17:39:40,922 [myid:] - INFO  [main:Environment@98] - Client environment:os.memory.max=455MB
2020-03-18 17:39:40,922 [myid:] - INFO  [main:Environment@98] - Client environment:os.memory.total=123MB
2020-03-18 17:39:40,925 [myid:] - INFO  [main:ZooKeeper@1005] - Initiating client connection, connectString=127.0.0.1:13921 sessionTimeout=30000 watcher=org.apache.zookeeper.test.ClientBase$CountdownWatcher@543c6f6d
2020-03-18 17:39:40,931 [myid:] - INFO  [main:ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes
2020-03-18 17:39:40,940 [myid:] - INFO  [main:ClientCnxn@1703] - zookeeper.request.timeout value is 0. feature enabled=false
2020-03-18 17:39:40,948 [myid:127.0.0.1:13921] - INFO  [main-SendThread(127.0.0.1:13921):ClientCnxn$SendThread@1154] - Opening socket connection to server localhost/127.0.0.1:13921.
2020-03-18 17:39:40,948 [myid:127.0.0.1:13921] - INFO  [main-SendThread(127.0.0.1:13921):ClientCnxn$SendThread@1156] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2020-03-18 17:39:40,952 [myid:127.0.0.1:13921] - INFO  [main-SendThread(127.0.0.1:13921):ClientCnxn$SendThread@986] - Socket connection established, initiating session, client: /127.0.0.1:51974, server: localhost/127.0.0.1:13921
2020-03-18 17:39:40,958 [myid:] - INFO  [SyncThread:3:FileTxnLog@284] - Creating new log file: log.100000001
2020-03-18 17:39:40,959 [myid:] - WARN  [QuorumPeer[myid=2](plain=127.0.0.1:13918)(secure=disabled):Follower@170] - Got zxid 0x100000001 expected 0x1
2020-03-18 17:39:40,959 [myid:] - INFO  [SyncThread:2:FileTxnLog@284] - Creating new log file: log.100000001
2020-03-18 17:39:40,970 [myid:] - INFO  [CommitProcessor:3:LeaderSessionTracker@104] - Committing global session 0x300015dacf00000
2020-03-18 17:39:40,970 [myid:] - INFO  [CommitProcessor:2:LearnerSessionTracker@116] - Committing global session 0x300015dacf00000
2020-03-18 17:39:40,974 [myid:] - INFO  [CommitProcessor:3:ZKAuditProvider@42] - ZooKeeper audit is disabled.
2020-03-18 17:39:40,978 [myid:127.0.0.1:13921] - INFO  [main-SendThread(127.0.0.1:13921):ClientCnxn$SendThread@1420] - Session establishment complete on server localhost/127.0.0.1:13921, session id = 0x300015dacf00000, negotiated timeout = 30000
2020-03-18 17:39:40,981 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@225] - zk3 has session id 0x300015dacf00000
2020-03-18 17:39:40,996 [myid:] - INFO  [main:QuorumUtil@204] - Creating QuorumPeer 1; public port 13915
2020-03-18 17:39:40,997 [myid:] - INFO  [main:ServerCnxnFactory@169] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2020-03-18 17:39:40,997 [myid:] - WARN  [main:ServerCnxnFactory@309] - maxCnxns is not configured, using default value 0.
2020-03-18 17:39:40,997 [myid:] - INFO  [main:NIOServerCnxnFactory@666] - Configuring NIO connection handler with 10s sessionless connection timeout, 1 selector thread(s), 8 worker threads, and 64 kB direct buffers.
2020-03-18 17:39:40,997 [myid:] - INFO  [main:NIOServerCnxnFactory@674] - binding to port /127.0.0.1:13915
2020-03-18 17:39:40,998 [myid:] - INFO  [main:FileTxnSnapLog@124] - zookeeper.snapshot.trust.empty : false
2020-03-18 17:39:40,998 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:39:40,999 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:39:40,999 [myid:] - INFO  [main:ZKDatabase@132] - zookeeper.snapshotSizeFactor = 0.33
2020-03-18 17:39:40,999 [myid:] - INFO  [main:ZKDatabase@152] - zookeeper.commitLogCount=500
2020-03-18 17:39:40,999 [myid:] - WARN  [main:QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:39:41,001 [myid:] - INFO  [main:FileSnap@85] - Reading snapshot /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test1595495288663900759.junit.dir/version-2/snapshot.0
2020-03-18 17:39:41,002 [myid:] - INFO  [main:DataTree@1737] - The digest value is empty in snapshot
2020-03-18 17:39:41,003 [myid:] - INFO  [main:ZKDatabase@289] - Snapshot loaded in 3 ms, highest zxid is 0x0, digest is 1371985504
2020-03-18 17:39:41,005 [myid:] - INFO  [main:QuorumPeer@2503] - Using 6000ms as the quorum cnxn socket timeout
2020-03-18 17:39:41,006 [myid:] - INFO  [main:QuorumCnxManager$Listener@906] - Election port bind maximum retries is 3
2020-03-18 17:39:41,007 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13917:QuorumCnxManager$Listener$ListenerHandler@1047] - My election bind port: /127.0.0.1:13917
2020-03-18 17:39:41,007 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13915
2020-03-18 17:39:41,008 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):QuorumPeer@1371] - LOOKING
2020-03-18 17:39:41,008 [myid:] - INFO  [NIOWorkerThread-1:NIOServerCnxn@507] - Processing stat command from /127.0.0.1:51975
2020-03-18 17:39:41,009 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):FastLeaderElection@931] - New election. My id = 1, proposed zxid=0x0
2020-03-18 17:39:41,010 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:1, n.state:LOOKING, n.leader:1, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:39:41,010 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13920:QuorumCnxManager$Listener$ListenerHandler@1052] - Received connection request /127.0.0.1:51976
2020-03-18 17:39:41,010 [myid:] - INFO  [WorkerSender[myid=1]:QuorumCnxManager@462] - Have smaller server identifier, so dropping the connection: (2, 1)
2020-03-18 17:39:41,011 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13917:QuorumCnxManager$Listener$ListenerHandler@1052] - Received connection request /127.0.0.1:51977
2020-03-18 17:39:41,011 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13923:QuorumCnxManager$Listener$ListenerHandler@1052] - Received connection request /127.0.0.1:51978
2020-03-18 17:39:41,011 [myid:] - INFO  [WorkerSender[myid=1]:QuorumCnxManager@462] - Have smaller server identifier, so dropping the connection: (3, 1)
2020-03-18 17:39:41,012 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13917:QuorumCnxManager$Listener$ListenerHandler@1052] - Received connection request /127.0.0.1:51979
2020-03-18 17:39:41,012 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:2, n.state:LOOKING, n.leader:3, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:39:41,012 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:FOLLOWING; n.sid:1, n.state:LOOKING, n.leader:1, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:39:41,013 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:3, n.state:LOOKING, n.leader:3, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:39:41,013 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LEADING; n.sid:1, n.state:LOOKING, n.leader:1, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:39:41,014 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:2, n.state:FOLLOWING, n.leader:3, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:39:41,015 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:3, n.state:LEADING, n.leader:3, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:39:41,015 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):QuorumPeer@857] - Peer state changed: following
2020-03-18 17:39:41,015 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):QuorumPeer@1453] - FOLLOWING
2020-03-18 17:39:41,015 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):ZooKeeperServer@1246] - minSessionTimeout set to 4000
2020-03-18 17:39:41,015 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):ZooKeeperServer@1255] - maxSessionTimeout set to 40000
2020-03-18 17:39:41,016 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):ResponseCache@45] - Response cache size is initialized with value 400.
2020-03-18 17:39:41,016 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):ResponseCache@45] - Response cache size is initialized with value 400.
2020-03-18 17:39:41,016 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):RequestPathMetricsCollector@111] - zookeeper.pathStats.slotCapacity = 60
2020-03-18 17:39:41,016 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):RequestPathMetricsCollector@112] - zookeeper.pathStats.slotDuration = 15
2020-03-18 17:39:41,016 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):RequestPathMetricsCollector@113] - zookeeper.pathStats.maxDepth = 6
2020-03-18 17:39:41,016 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):RequestPathMetricsCollector@114] - zookeeper.pathStats.initialDelay = 5
2020-03-18 17:39:41,016 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):RequestPathMetricsCollector@115] - zookeeper.pathStats.delay = 5
2020-03-18 17:39:41,016 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):RequestPathMetricsCollector@116] - zookeeper.pathStats.enabled = false
2020-03-18 17:39:41,016 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):ZooKeeperServer@1470] - The max bytes for all large requests are set to 104857600
2020-03-18 17:39:41,016 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):ZooKeeperServer@1484] - The large request threshold is set to -1
2020-03-18 17:39:41,017 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):ZooKeeperServer@329] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 clientPortListenBacklog -1 datadir /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test1595495288663900759.junit.dir/version-2 snapdir /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test1595495288663900759.junit.dir/version-2
2020-03-18 17:39:41,017 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):Follower@75] - FOLLOWING - LEADER ELECTION TOOK - 9 MS
2020-03-18 17:39:41,017 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):QuorumPeer@863] - Peer state changed: following - discovery
2020-03-18 17:39:41,018 [myid:] - INFO  [LeaderConnector-/127.0.0.1:13922:Learner$LeaderConnector@328] - Successfully connected to leader, using address: /127.0.0.1:13922
2020-03-18 17:39:41,019 [myid:] - INFO  [LearnerHandler-/127.0.0.1:51986:LearnerHandler@504] - Follower sid: 1 : info : 127.0.0.1:13916:13917:participant;127.0.0.1:13915
2020-03-18 17:39:41,019 [myid:] - INFO  [LearnerHandler-/127.0.0.1:51986:ZKDatabase@345] - On disk txn sync enabled with snapshotSizeFactor 1000.0
2020-03-18 17:39:41,019 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):QuorumPeer@863] - Peer state changed: following - synchronization
2020-03-18 17:39:41,020 [myid:] - INFO  [LearnerHandler-/127.0.0.1:51986:LearnerHandler@800] - Synchronizing with Learner sid: 1 maxCommittedLog=0x100000002 minCommittedLog=0x100000001 lastProcessedZxid=0x100000002 peerLastZxid=0x0
2020-03-18 17:39:41,021 [myid:] - WARN  [LearnerHandler-/127.0.0.1:51986:ZKDatabase@387] - Unable to find proposals from txnlog for zxid: 0x0
2020-03-18 17:39:41,022 [myid:] - INFO  [LearnerHandler-/127.0.0.1:51986:LearnerHandler@565] - Sending snapshot last zxid of peer is 0x0, zxid of leader is 0x100000002, send zxid of db as 0x100000002, 1 concurrent snapshot sync, snapshot sync was exempt from throttle
2020-03-18 17:39:41,022 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):QuorumPeer@868] - Peer state changed: following - synchronization - snap
2020-03-18 17:39:41,022 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):Learner@514] - Getting a snapshot from leader 0x100000002
2020-03-18 17:39:41,023 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:39:41,023 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:39:41,024 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):Learner@675] - Learner received NEWLEADER message
2020-03-18 17:39:41,025 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:39:41,025 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):FileTxnSnapLog@470] - Snapshotting: 0x100000002 to /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test1595495288663900759.junit.dir/version-2/snapshot.100000002
2020-03-18 17:39:41,026 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):ZooKeeperServer@519] - Snapshot taken in 1 ms
2020-03-18 17:39:41,028 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):Learner@659] - Learner received UPTODATE message
2020-03-18 17:39:41,028 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):QuorumPeer@868] - Peer state changed: following - synchronization
2020-03-18 17:39:41,028 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):CommitProcessor@476] - Configuring CommitProcessor with readBatchSize -1 commitBatchSize 1
2020-03-18 17:39:41,028 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):CommitProcessor@438] - Configuring CommitProcessor with 4 worker threads.
2020-03-18 17:39:41,030 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):QuorumPeer@863] - Peer state changed: following - broadcast
2020-03-18 17:39:41,262 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13915
2020-03-18 17:39:41,264 [myid:] - INFO  [NIOWorkerThread-2:NIOServerCnxn@507] - Processing stat command from /127.0.0.1:51989
2020-03-18 17:39:41,265 [myid:] - INFO  [NIOWorkerThread-2:StatCommand@52] - Stat command output
2020-03-18 17:39:41,265 [myid:] - INFO  [main:ZooKeeper@1005] - Initiating client connection, connectString=127.0.0.1:13915 sessionTimeout=30000 watcher=org.apache.zookeeper.test.ClientBase$CountdownWatcher@3891771e
2020-03-18 17:39:41,265 [myid:] - INFO  [main:ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes
2020-03-18 17:39:41,266 [myid:] - INFO  [main:ClientCnxn@1703] - zookeeper.request.timeout value is 0. feature enabled=false
2020-03-18 17:39:41,267 [myid:127.0.0.1:13915] - INFO  [main-SendThread(127.0.0.1:13915):ClientCnxn$SendThread@1154] - Opening socket connection to server localhost/127.0.0.1:13915.
2020-03-18 17:39:41,267 [myid:127.0.0.1:13915] - INFO  [main-SendThread(127.0.0.1:13915):ClientCnxn$SendThread@1156] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2020-03-18 17:39:41,267 [myid:127.0.0.1:13915] - INFO  [main-SendThread(127.0.0.1:13915):ClientCnxn$SendThread@986] - Socket connection established, initiating session, client: /127.0.0.1:51990, server: localhost/127.0.0.1:13915
2020-03-18 17:39:41,269 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):Follower@170] - Got zxid 0x100000003 expected 0x1
2020-03-18 17:39:41,269 [myid:] - INFO  [SyncThread:1:FileTxnLog@284] - Creating new log file: log.100000003
2020-03-18 17:39:41,269 [myid:] - INFO  [CommitProcessor:3:LeaderSessionTracker@104] - Committing global session 0x100015daeaa0000
2020-03-18 17:39:41,269 [myid:] - INFO  [CommitProcessor:1:LearnerSessionTracker@116] - Committing global session 0x100015daeaa0000
2020-03-18 17:39:41,269 [myid:] - INFO  [CommitProcessor:2:LearnerSessionTracker@116] - Committing global session 0x100015daeaa0000
2020-03-18 17:39:41,270 [myid:127.0.0.1:13915] - INFO  [main-SendThread(127.0.0.1:13915):ClientCnxn$SendThread@1420] - Session establishment complete on server localhost/127.0.0.1:13915, session id = 0x100015daeaa0000, negotiated timeout = 30000
2020-03-18 17:39:41,270 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@232] - zk1 has session id 0x100015daeaa0000
2020-03-18 17:39:41,271 [myid:] - INFO  [main:ZooKeeper@1005] - Initiating client connection, connectString=127.0.0.1:13915 sessionTimeout=30000 watcher=org.apache.zookeeper.test.ClientBase$CountdownWatcher@2de8284b
2020-03-18 17:39:41,271 [myid:] - INFO  [main:ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes
2020-03-18 17:39:41,272 [myid:] - INFO  [main:ClientCnxn@1703] - zookeeper.request.timeout value is 0. feature enabled=false
2020-03-18 17:39:41,273 [myid:127.0.0.1:13915] - INFO  [main-SendThread(127.0.0.1:13915):ClientCnxn$SendThread@1154] - Opening socket connection to server localhost/127.0.0.1:13915.
2020-03-18 17:39:41,274 [myid:127.0.0.1:13915] - INFO  [main-SendThread(127.0.0.1:13915):ClientCnxn$SendThread@1156] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2020-03-18 17:39:41,274 [myid:127.0.0.1:13915] - INFO  [main-SendThread(127.0.0.1:13915):ClientCnxn$SendThread@986] - Socket connection established, initiating session, client: /127.0.0.1:51992, server: localhost/127.0.0.1:13915
2020-03-18 17:39:41,276 [myid:] - INFO  [CommitProcessor:3:LeaderSessionTracker@104] - Committing global session 0x100015daeaa0001
2020-03-18 17:39:41,276 [myid:] - INFO  [CommitProcessor:1:LearnerSessionTracker@116] - Committing global session 0x100015daeaa0001
2020-03-18 17:39:41,276 [myid:] - INFO  [CommitProcessor:2:LearnerSessionTracker@116] - Committing global session 0x100015daeaa0001
2020-03-18 17:39:41,277 [myid:127.0.0.1:13915] - INFO  [main-SendThread(127.0.0.1:13915):ClientCnxn$SendThread@1420] - Session establishment complete on server localhost/127.0.0.1:13915, session id = 0x100015daeaa0001, negotiated timeout = 30000
2020-03-18 17:39:41,277 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@235] - zk2 has session id 0x100015daeaa0001
2020-03-18 17:39:43,321 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@458] - WorkerReceiver is down
2020-03-18 17:39:43,329 [myid:] - INFO  [WorkerSender[myid=1]:FastLeaderElection$Messenger$WorkerSender@492] - WorkerSender is down
2020-03-18 17:39:46,325 [myid:] - INFO  [main:QuorumUtil@250] - Shutting down quorum peer QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled)
2020-03-18 17:39:46,325 [myid:] - INFO  [main:Follower@292] - shutdown Follower
2020-03-18 17:39:46,326 [myid:] - INFO  [main:LearnerZooKeeperServer@160] - Shutting down
2020-03-18 17:39:46,326 [myid:] - INFO  [main:ZooKeeperServer@784] - shutting down
2020-03-18 17:39:46,326 [myid:] - INFO  [main:RequestThrottler@244] - Shutting down
2020-03-18 17:39:46,326 [myid:] - INFO  [RequestThrottler:RequestThrottler@205] - Draining request throttler queue
2020-03-18 17:39:46,327 [myid:] - INFO  [RequestThrottler:RequestThrottler@181] - RequestThrottler shutdown. Dropped 0 requests
2020-03-18 17:39:46,326 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):Follower@143] - Disconnected from leader (with address: /127.0.0.1:13922). Was connected for 5307ms. Sync state: true
2020-03-18 17:39:46,327 [myid:127.0.0.1:13915] - WARN  [main-SendThread(127.0.0.1:13915):ClientCnxn$SendThread@1272] - Session 0x100015daeaa0001 for sever localhost/127.0.0.1:13915, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
EndOfStreamException: Unable to read additional data from server sessionid 0x100015daeaa0001, likely server has closed socket
	at org.apache.zookeeper.ClientCnxnSocketNIO.doIO(ClientCnxnSocketNIO.java:75)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:348)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1262)
2020-03-18 17:39:46,327 [myid:] - ERROR [FollowerRequestProcessor:1:ZooKeeperCriticalThread@49] - Severe unrecoverable error, from thread : FollowerRequestProcessor:1
java.net.SocketException: Socket closed
	at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:118)
	at java.net.SocketOutputStream.write(SocketOutputStream.java:155)
	at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:82)
	at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:140)
	at org.apache.zookeeper.server.quorum.Learner.writePacket(Learner.java:168)
	at org.apache.zookeeper.server.quorum.Learner.request(Learner.java:217)
	at org.apache.zookeeper.server.quorum.FollowerRequestProcessor.run(FollowerRequestProcessor.java:98)
2020-03-18 17:39:46,327 [myid:] - WARN  [SyncThread:1:SendAckRequestProcessor@65] - Closing connection to leader, exception during packet send
java.net.SocketException: Socket closed
	at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:118)
	at java.net.SocketOutputStream.write(SocketOutputStream.java:155)
	at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:82)
	at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:140)
	at org.apache.zookeeper.server.quorum.Learner.writePacket(Learner.java:168)
	at org.apache.zookeeper.server.quorum.SendAckRequestProcessor.flush(SendAckRequestProcessor.java:63)
	at org.apache.zookeeper.server.SyncRequestProcessor.flush(SyncRequestProcessor.java:249)
	at org.apache.zookeeper.server.SyncRequestProcessor.run(SyncRequestProcessor.java:169)
2020-03-18 17:39:46,327 [myid:] - INFO  [main:FollowerRequestProcessor@148] - Shutting down
2020-03-18 17:39:46,328 [myid:] - INFO  [main:CommitProcessor@617] - Shutting down
2020-03-18 17:39:46,329 [myid:] - INFO  [main:FinalRequestProcessor@662] - shutdown of request processor complete
2020-03-18 17:39:46,332 [myid:] - INFO  [FollowerRequestProcessor:1:ZooKeeperServerListenerImpl@43] - Thread FollowerRequestProcessor:1 exits, error code 1
2020-03-18 17:39:46,332 [myid:] - INFO  [FollowerRequestProcessor:1:FollowerRequestProcessor@112] - FollowerRequestProcessor exited loop!
2020-03-18 17:39:46,327 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):Follower@292] - shutdown Follower
2020-03-18 17:39:46,339 [myid:] - INFO  [CommitProcessor:1:CommitProcessor@406] - CommitProcessor exited loop!
2020-03-18 17:39:46,327 [myid:] - WARN  [Sender-/127.0.0.1:51986:LearnerHandler@361] - Unexpected exception at LearnerHandler Socket[addr=/127.0.0.1,port=51986,localport=13922] tickOfNextAckDeadline:5 synced?:true queuedPacketLength:5
java.net.SocketException: Broken pipe (Write failed)
	at java.net.SocketOutputStream.socketWrite0(Native Method)
	at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:111)
	at java.net.SocketOutputStream.write(SocketOutputStream.java:155)
	at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:82)
	at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:140)
	at org.apache.zookeeper.server.quorum.LearnerHandler.sendPackets(LearnerHandler.java:324)
	at org.apache.zookeeper.server.quorum.LearnerHandler.access$200(LearnerHandler.java:62)
	at org.apache.zookeeper.server.quorum.LearnerHandler$1.run(LearnerHandler.java:746)
2020-03-18 17:39:46,327 [myid:127.0.0.1:13915] - WARN  [main-SendThread(127.0.0.1:13915):ClientCnxn$SendThread@1272] - Session 0x100015daeaa0000 for sever localhost/127.0.0.1:13915, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
EndOfStreamException: Unable to read additional data from server sessionid 0x100015daeaa0000, likely server has closed socket
	at org.apache.zookeeper.ClientCnxnSocketNIO.doIO(ClientCnxnSocketNIO.java:75)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:348)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1262)
2020-03-18 17:39:46,327 [myid:] - ERROR [LearnerHandler-/127.0.0.1:51986:LearnerHandler@707] - Unexpected exception causing shutdown while sock still open
java.net.SocketException: Connection reset
	at java.net.SocketInputStream.read(SocketInputStream.java:210)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:96)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:134)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:643)
2020-03-18 17:39:46,346 [myid:] - WARN  [LearnerHandler-/127.0.0.1:51986:LearnerHandler@730] - ******* GOODBYE /127.0.0.1:51986 ********
2020-03-18 17:39:46,348 [myid:] - INFO  [main:FileTxnSnapLog@363] - 3 txns loaded in 0 ms
2020-03-18 17:39:46,348 [myid:] - INFO  [main:SyncRequestProcessor@256] - Shutting down
2020-03-18 17:39:46,349 [myid:] - INFO  [SyncThread:1:SyncRequestProcessor@225] - SyncRequestProcessor exited!
2020-03-18 17:39:46,349 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):LearnerZooKeeperServer@160] - Shutting down
2020-03-18 17:39:46,349 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):ZooKeeperServer@784] - shutting down
2020-03-18 17:39:46,349 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):RequestThrottler@244] - Shutting down
2020-03-18 17:39:46,349 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):FollowerRequestProcessor@148] - Shutting down
2020-03-18 17:39:46,349 [myid:] - INFO  [NIOServerCxnFactory.AcceptThread:/127.0.0.1:13915:NIOServerCnxnFactory$AcceptThread@209] - accept thread exitted run method
2020-03-18 17:39:46,349 [myid:] - INFO  [NIOServerCxnFactory.SelectorThread-0:NIOServerCnxnFactory$SelectorThread@411] - selector thread exitted run method
2020-03-18 17:39:46,349 [myid:] - INFO  [ConnnectionExpirer:NIOServerCnxnFactory$ConnectionExpirerThread@578] - ConnnectionExpirerThread interrupted
2020-03-18 17:39:46,349 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):CommitProcessor@617] - Shutting down
2020-03-18 17:39:46,350 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):FinalRequestProcessor@662] - shutdown of request processor complete
2020-03-18 17:39:46,352 [myid:] - INFO  [QuorumPeerListener:QuorumCnxManager$Listener@961] - Leaving listener
2020-03-18 17:39:46,353 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 1, my id = 2
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:39:46,353 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:39:46,353 [myid:] - INFO  [main:QuorumUtil@254] - Shutting down leader election QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled)
2020-03-18 17:39:46,353 [myid:] - INFO  [main:QuorumUtil@259] - Waiting for QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled) to exit thread
2020-03-18 17:39:46,353 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:39:46,354 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:39:46,354 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 1 my id = 2
2020-03-18 17:39:46,353 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 2, my id = 1
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:39:46,355 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:39:46,354 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 2 my id = 1
2020-03-18 17:39:46,354 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 1, my id = 3
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:39:46,356 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:39:46,354 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:39:46,356 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 3 my id = 1
2020-03-18 17:39:46,354 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 3, my id = 1
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:39:46,357 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:39:46,356 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:39:46,358 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 1 my id = 3
2020-03-18 17:39:46,360 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):SyncRequestProcessor@256] - Shutting down
2020-03-18 17:39:46,360 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):QuorumPeer@863] - Peer state changed: looking
2020-03-18 17:39:46,360 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):QuorumPeer@1501] - PeerState set to LOOKING
2020-03-18 17:39:46,360 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):QuorumPeer@1483] - QuorumPeer main thread exited
2020-03-18 17:39:46,361 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@294] - Shutting down s1
2020-03-18 17:39:47,013 [myid:] - INFO  [WorkerSender[myid=1]:FastLeaderElection$Messenger$WorkerSender@492] - WorkerSender is down
2020-03-18 17:39:47,020 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@458] - WorkerReceiver is down
2020-03-18 17:39:47,457 [myid:127.0.0.1:13915] - INFO  [main-SendThread(127.0.0.1:13915):ClientCnxn$SendThread@1154] - Opening socket connection to server localhost/127.0.0.1:13915.
2020-03-18 17:39:47,457 [myid:127.0.0.1:13915] - INFO  [main-SendThread(127.0.0.1:13915):ClientCnxn$SendThread@1156] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2020-03-18 17:39:47,458 [myid:127.0.0.1:13915] - WARN  [main-SendThread(127.0.0.1:13915):ClientCnxn$SendThread@1272] - Session 0x100015daeaa0000 for sever localhost/127.0.0.1:13915, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:717)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:342)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1262)
2020-03-18 17:39:48,051 [myid:127.0.0.1:13915] - INFO  [main-SendThread(127.0.0.1:13915):ClientCnxn$SendThread@1154] - Opening socket connection to server localhost/127.0.0.1:13915.
2020-03-18 17:39:48,052 [myid:127.0.0.1:13915] - INFO  [main-SendThread(127.0.0.1:13915):ClientCnxn$SendThread@1156] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2020-03-18 17:39:48,052 [myid:127.0.0.1:13915] - WARN  [main-SendThread(127.0.0.1:13915):ClientCnxn$SendThread@1272] - Session 0x100015daeaa0001 for sever localhost/127.0.0.1:13915, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:717)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:342)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1262)
2020-03-18 17:39:48,965 [myid:127.0.0.1:13915] - INFO  [main-SendThread(127.0.0.1:13915):ClientCnxn$SendThread@1154] - Opening socket connection to server localhost/127.0.0.1:13915.
2020-03-18 17:39:48,965 [myid:127.0.0.1:13915] - INFO  [main-SendThread(127.0.0.1:13915):ClientCnxn$SendThread@1156] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2020-03-18 17:39:48,966 [myid:127.0.0.1:13915] - WARN  [main-SendThread(127.0.0.1:13915):ClientCnxn$SendThread@1272] - Session 0x100015daeaa0000 for sever localhost/127.0.0.1:13915, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:717)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:342)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1262)
2020-03-18 17:39:49,581 [myid:127.0.0.1:13915] - INFO  [main-SendThread(127.0.0.1:13915):ClientCnxn$SendThread@1154] - Opening socket connection to server localhost/127.0.0.1:13915.
2020-03-18 17:39:49,582 [myid:127.0.0.1:13915] - INFO  [main-SendThread(127.0.0.1:13915):ClientCnxn$SendThread@1156] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2020-03-18 17:39:49,582 [myid:127.0.0.1:13915] - WARN  [main-SendThread(127.0.0.1:13915):ClientCnxn$SendThread@1272] - Session 0x100015daeaa0001 for sever localhost/127.0.0.1:13915, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:717)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:342)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1262)
2020-03-18 17:39:50,630 [myid:127.0.0.1:13915] - INFO  [main-SendThread(127.0.0.1:13915):ClientCnxn$SendThread@1154] - Opening socket connection to server localhost/127.0.0.1:13915.
2020-03-18 17:39:50,630 [myid:127.0.0.1:13915] - INFO  [main-SendThread(127.0.0.1:13915):ClientCnxn$SendThread@1156] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2020-03-18 17:39:50,630 [myid:127.0.0.1:13915] - WARN  [main-SendThread(127.0.0.1:13915):ClientCnxn$SendThread@1272] - Session 0x100015daeaa0000 for sever localhost/127.0.0.1:13915, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:717)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:342)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1262)
2020-03-18 17:39:51,097 [myid:127.0.0.1:13915] - INFO  [main-SendThread(127.0.0.1:13915):ClientCnxn$SendThread@1154] - Opening socket connection to server localhost/127.0.0.1:13915.
2020-03-18 17:39:51,097 [myid:127.0.0.1:13915] - INFO  [main-SendThread(127.0.0.1:13915):ClientCnxn$SendThread@1156] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2020-03-18 17:39:51,098 [myid:127.0.0.1:13915] - WARN  [main-SendThread(127.0.0.1:13915):ClientCnxn$SendThread@1272] - Session 0x100015daeaa0001 for sever localhost/127.0.0.1:13915, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:717)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:342)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1262)
2020-03-18 17:39:51,744 [myid:127.0.0.1:13915] - INFO  [main-SendThread(127.0.0.1:13915):ClientCnxn$SendThread@1154] - Opening socket connection to server localhost/127.0.0.1:13915.
2020-03-18 17:39:51,744 [myid:127.0.0.1:13915] - INFO  [main-SendThread(127.0.0.1:13915):ClientCnxn$SendThread@1156] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2020-03-18 17:39:51,744 [myid:127.0.0.1:13915] - WARN  [main-SendThread(127.0.0.1:13915):ClientCnxn$SendThread@1272] - Session 0x100015daeaa0000 for sever localhost/127.0.0.1:13915, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:717)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:342)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1262)
2020-03-18 17:39:52,448 [myid:127.0.0.1:13915] - INFO  [main-SendThread(127.0.0.1:13915):ClientCnxn$SendThread@1154] - Opening socket connection to server localhost/127.0.0.1:13915.
2020-03-18 17:39:52,448 [myid:127.0.0.1:13915] - INFO  [main-SendThread(127.0.0.1:13915):ClientCnxn$SendThread@1156] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2020-03-18 17:39:52,449 [myid:127.0.0.1:13915] - WARN  [main-SendThread(127.0.0.1:13915):ClientCnxn$SendThread@1272] - Session 0x100015daeaa0001 for sever localhost/127.0.0.1:13915, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:717)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:342)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1262)
2020-03-18 17:39:53,154 [myid:127.0.0.1:13915] - INFO  [main-SendThread(127.0.0.1:13915):ClientCnxn$SendThread@1154] - Opening socket connection to server localhost/127.0.0.1:13915.
2020-03-18 17:39:53,154 [myid:127.0.0.1:13915] - INFO  [main-SendThread(127.0.0.1:13915):ClientCnxn$SendThread@1156] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2020-03-18 17:39:53,155 [myid:127.0.0.1:13915] - WARN  [main-SendThread(127.0.0.1:13915):ClientCnxn$SendThread@1272] - Session 0x100015daeaa0000 for sever localhost/127.0.0.1:13915, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:717)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:342)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1262)
2020-03-18 17:39:53,378 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@302] - Restarting follower: 1
2020-03-18 17:39:53,378 [myid:] - INFO  [main:QuorumUtil@204] - Creating QuorumPeer 1; public port 13915
2020-03-18 17:39:53,378 [myid:] - INFO  [main:ServerCnxnFactory@169] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2020-03-18 17:39:53,379 [myid:] - WARN  [main:ServerCnxnFactory@309] - maxCnxns is not configured, using default value 0.
2020-03-18 17:39:53,379 [myid:] - INFO  [main:NIOServerCnxnFactory@666] - Configuring NIO connection handler with 10s sessionless connection timeout, 1 selector thread(s), 8 worker threads, and 64 kB direct buffers.
2020-03-18 17:39:53,379 [myid:] - INFO  [main:NIOServerCnxnFactory@674] - binding to port /127.0.0.1:13915
2020-03-18 17:39:53,380 [myid:] - INFO  [main:FileTxnSnapLog@124] - zookeeper.snapshot.trust.empty : false
2020-03-18 17:39:53,381 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:39:53,382 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:39:53,382 [myid:] - INFO  [main:ZKDatabase@132] - zookeeper.snapshotSizeFactor = 0.33
2020-03-18 17:39:53,382 [myid:] - INFO  [main:ZKDatabase@152] - zookeeper.commitLogCount=500
2020-03-18 17:39:53,382 [myid:] - WARN  [main:QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:39:53,383 [myid:] - INFO  [main:FileSnap@85] - Reading snapshot /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test1595495288663900759.junit.dir/version-2/snapshot.100000002
2020-03-18 17:39:53,383 [myid:] - INFO  [main:DataTree@1737] - The digest value is empty in snapshot
2020-03-18 17:39:53,542 [myid:] - INFO  [main:FileTxnSnapLog@363] - 4087 txns loaded in 156 ms
2020-03-18 17:39:53,542 [myid:] - INFO  [main:ZKDatabase@289] - Snapshot loaded in 160 ms, highest zxid is 0x100000ff9, digest is 8902303713588
2020-03-18 17:39:53,548 [myid:] - INFO  [main:QuorumPeer@2503] - Using 6000ms as the quorum cnxn socket timeout
2020-03-18 17:39:53,548 [myid:] - INFO  [main:QuorumCnxManager$Listener@906] - Election port bind maximum retries is 3
2020-03-18 17:39:53,549 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13917:QuorumCnxManager$Listener$ListenerHandler@1047] - My election bind port: /127.0.0.1:13917
2020-03-18 17:39:53,551 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):QuorumPeer@1371] - LOOKING
2020-03-18 17:39:53,552 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):FastLeaderElection@931] - New election. My id = 1, proposed zxid=0x100000ff9
2020-03-18 17:39:53,553 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13920:QuorumCnxManager$Listener$ListenerHandler@1052] - Received connection request /127.0.0.1:52714
2020-03-18 17:39:53,553 [myid:] - INFO  [WorkerSender[myid=1]:QuorumCnxManager@462] - Have smaller server identifier, so dropping the connection: (2, 1)
2020-03-18 17:39:53,554 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13917:QuorumCnxManager$Listener$ListenerHandler@1052] - Received connection request /127.0.0.1:52715
2020-03-18 17:39:53,554 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13923:QuorumCnxManager$Listener$ListenerHandler@1052] - Received connection request /127.0.0.1:52716
2020-03-18 17:39:53,554 [myid:] - INFO  [WorkerSender[myid=1]:QuorumCnxManager@462] - Have smaller server identifier, so dropping the connection: (3, 1)
2020-03-18 17:39:53,554 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:1, n.state:LOOKING, n.leader:1, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x100000ff9, message format version:0x2, n.config version:0x0
2020-03-18 17:39:53,557 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13915
2020-03-18 17:39:53,573 [myid:] - INFO  [NIOWorkerThread-1:NIOServerCnxn@507] - Processing stat command from /127.0.0.1:52718
2020-03-18 17:39:53,573 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13917:QuorumCnxManager$Listener$ListenerHandler@1052] - Received connection request /127.0.0.1:52717
2020-03-18 17:39:53,573 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:2, n.state:FOLLOWING, n.leader:3, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:39:53,573 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:FOLLOWING; n.sid:1, n.state:LOOKING, n.leader:1, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x100000ff9, message format version:0x2, n.config version:0x0
2020-03-18 17:39:53,574 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LEADING; n.sid:1, n.state:LOOKING, n.leader:1, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x100000ff9, message format version:0x2, n.config version:0x0
2020-03-18 17:39:53,574 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:3, n.state:LEADING, n.leader:3, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:39:53,575 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:2, n.state:FOLLOWING, n.leader:3, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:39:53,575 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):QuorumPeer@857] - Peer state changed: following
2020-03-18 17:39:53,576 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):QuorumPeer@1453] - FOLLOWING
2020-03-18 17:39:53,576 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:FOLLOWING; n.sid:3, n.state:LEADING, n.leader:3, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:39:53,576 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):ZooKeeperServer@1246] - minSessionTimeout set to 4000
2020-03-18 17:39:53,576 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):ZooKeeperServer@1255] - maxSessionTimeout set to 40000
2020-03-18 17:39:53,576 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):ResponseCache@45] - Response cache size is initialized with value 400.
2020-03-18 17:39:53,576 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):ResponseCache@45] - Response cache size is initialized with value 400.
2020-03-18 17:39:53,576 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):RequestPathMetricsCollector@111] - zookeeper.pathStats.slotCapacity = 60
2020-03-18 17:39:53,576 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):RequestPathMetricsCollector@112] - zookeeper.pathStats.slotDuration = 15
2020-03-18 17:39:53,576 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):RequestPathMetricsCollector@113] - zookeeper.pathStats.maxDepth = 6
2020-03-18 17:39:53,576 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):RequestPathMetricsCollector@114] - zookeeper.pathStats.initialDelay = 5
2020-03-18 17:39:53,576 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):RequestPathMetricsCollector@115] - zookeeper.pathStats.delay = 5
2020-03-18 17:39:53,576 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):RequestPathMetricsCollector@116] - zookeeper.pathStats.enabled = false
2020-03-18 17:39:53,576 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):ZooKeeperServer@1470] - The max bytes for all large requests are set to 104857600
2020-03-18 17:39:53,576 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):ZooKeeperServer@1484] - The large request threshold is set to -1
2020-03-18 17:39:53,577 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):ZooKeeperServer@329] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 clientPortListenBacklog -1 datadir /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test1595495288663900759.junit.dir/version-2 snapdir /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test1595495288663900759.junit.dir/version-2
2020-03-18 17:39:53,577 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):Follower@75] - FOLLOWING - LEADER ELECTION TOOK - 25 MS
2020-03-18 17:39:53,577 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):QuorumPeer@863] - Peer state changed: following - discovery
2020-03-18 17:39:53,579 [myid:] - INFO  [LeaderConnector-/127.0.0.1:13922:Learner$LeaderConnector@328] - Successfully connected to leader, using address: /127.0.0.1:13922
2020-03-18 17:39:53,580 [myid:] - INFO  [LearnerHandler-/127.0.0.1:52722:LearnerHandler@504] - Follower sid: 1 : info : 127.0.0.1:13916:13917:participant;127.0.0.1:13915
2020-03-18 17:39:53,580 [myid:] - INFO  [LearnerHandler-/127.0.0.1:52722:ZKDatabase@345] - On disk txn sync enabled with snapshotSizeFactor 1000.0
2020-03-18 17:39:53,580 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):QuorumPeer@863] - Peer state changed: following - synchronization
2020-03-18 17:39:53,580 [myid:] - INFO  [LearnerHandler-/127.0.0.1:52722:LearnerHandler@800] - Synchronizing with Learner sid: 1 maxCommittedLog=0x100002f44 minCommittedLog=0x100002d50 lastProcessedZxid=0x100002f44 peerLastZxid=0x100000ff9
2020-03-18 17:39:53,581 [myid:] - INFO  [LearnerHandler-/127.0.0.1:52722:LearnerHandler@877] - Use txnlog and committedLog for peer sid: 1
2020-03-18 17:39:53,599 [myid:] - INFO  [LearnerHandler-/127.0.0.1:52722:LearnerHandler@972] - Sending DIFF zxid=0x100002f44  for peer sid: 1
2020-03-18 17:39:53,683 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):Learner@509] - Getting a diff from the leader 0x100002f44
2020-03-18 17:39:53,683 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):QuorumPeer@868] - Peer state changed: following - synchronization - diff
2020-03-18 17:39:53,684 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):Learner@575] - Got zxid 0x100000ffa expected 0x1
2020-03-18 17:39:53,712 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):Learner@675] - Learner received NEWLEADER message
2020-03-18 17:39:53,713 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:39:53,715 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):Learner@659] - Learner received UPTODATE message
2020-03-18 17:39:53,716 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):QuorumPeer@868] - Peer state changed: following - synchronization
2020-03-18 17:39:53,716 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):CommitProcessor@476] - Configuring CommitProcessor with readBatchSize -1 commitBatchSize 1
2020-03-18 17:39:53,716 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):CommitProcessor@438] - Configuring CommitProcessor with 4 worker threads.
2020-03-18 17:39:53,718 [myid:] - INFO  [SyncThread:1:FileTxnLog@284] - Creating new log file: log.100000ffa
2020-03-18 17:39:53,730 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):QuorumPeer@863] - Peer state changed: following - broadcast
2020-03-18 17:39:53,757 [myid:127.0.0.1:13915] - INFO  [main-SendThread(127.0.0.1:13915):ClientCnxn$SendThread@1154] - Opening socket connection to server localhost/127.0.0.1:13915.
2020-03-18 17:39:53,757 [myid:127.0.0.1:13915] - INFO  [main-SendThread(127.0.0.1:13915):ClientCnxn$SendThread@1156] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2020-03-18 17:39:53,758 [myid:127.0.0.1:13915] - INFO  [main-SendThread(127.0.0.1:13915):ClientCnxn$SendThread@986] - Socket connection established, initiating session, client: /127.0.0.1:52723, server: localhost/127.0.0.1:13915
2020-03-18 17:39:53,758 [myid:] - INFO  [NIOWorkerThread-2:Learner@137] - Revalidating client: 0x100015daeaa0001
2020-03-18 17:39:53,765 [myid:127.0.0.1:13915] - INFO  [main-SendThread(127.0.0.1:13915):ClientCnxn$SendThread@1420] - Session establishment complete on server localhost/127.0.0.1:13915, session id = 0x100015daeaa0001, negotiated timeout = 30000
2020-03-18 17:39:53,767 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):Follower@170] - Got zxid 0x100002f59 expected 0x1
2020-03-18 17:39:53,825 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13915
2020-03-18 17:39:53,826 [myid:] - INFO  [NIOWorkerThread-8:NIOServerCnxn@507] - Processing stat command from /127.0.0.1:52725
2020-03-18 17:39:53,826 [myid:] - INFO  [NIOWorkerThread-8:StatCommand@52] - Stat command output
2020-03-18 17:39:54,128 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@305] - Shutdown follower: 1
2020-03-18 17:39:54,128 [myid:] - INFO  [main:QuorumUtil@250] - Shutting down quorum peer QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled)
2020-03-18 17:39:54,129 [myid:] - INFO  [main:Follower@292] - shutdown Follower
2020-03-18 17:39:54,129 [myid:127.0.0.1:13915] - WARN  [main-SendThread(127.0.0.1:13915):ClientCnxn$SendThread@1272] - Session 0x100015daeaa0001 for sever localhost/127.0.0.1:13915, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
EndOfStreamException: Unable to read additional data from server sessionid 0x100015daeaa0001, likely server has closed socket
	at org.apache.zookeeper.ClientCnxnSocketNIO.doIO(ClientCnxnSocketNIO.java:75)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:348)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1262)
2020-03-18 17:39:54,129 [myid:] - INFO  [main:LearnerZooKeeperServer@160] - Shutting down
2020-03-18 17:39:54,131 [myid:] - INFO  [main:ZooKeeperServer@784] - shutting down
2020-03-18 17:39:54,131 [myid:] - INFO  [main:RequestThrottler@244] - Shutting down
2020-03-18 17:39:54,131 [myid:] - INFO  [RequestThrottler:RequestThrottler@205] - Draining request throttler queue
2020-03-18 17:39:54,131 [myid:] - INFO  [RequestThrottler:RequestThrottler@181] - RequestThrottler shutdown. Dropped 0 requests
2020-03-18 17:39:54,131 [myid:] - INFO  [main:FollowerRequestProcessor@148] - Shutting down
2020-03-18 17:39:54,132 [myid:] - INFO  [FollowerRequestProcessor:1:FollowerRequestProcessor@112] - FollowerRequestProcessor exited loop!
2020-03-18 17:39:54,131 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):Follower@129] - Exception when following the leader
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:96)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:134)
	at org.apache.zookeeper.server.quorum.Learner.readPacket(Learner.java:182)
	at org.apache.zookeeper.server.quorum.Follower.followLeader(Follower.java:125)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:1455)
2020-03-18 17:39:54,131 [myid:] - ERROR [LearnerHandler-/127.0.0.1:52722:LearnerHandler@707] - Unexpected exception causing shutdown while sock still open
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:96)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:134)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:643)
2020-03-18 17:39:54,133 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):Follower@143] - Disconnected from leader (with address: /127.0.0.1:13922). Was connected for 552ms. Sync state: true
2020-03-18 17:39:54,133 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):Follower@292] - shutdown Follower
2020-03-18 17:39:54,132 [myid:] - INFO  [main:CommitProcessor@617] - Shutting down
2020-03-18 17:39:54,133 [myid:] - WARN  [LearnerHandler-/127.0.0.1:52722:LearnerHandler@730] - ******* GOODBYE /127.0.0.1:52722 ********
2020-03-18 17:39:54,133 [myid:] - INFO  [main:FinalRequestProcessor@662] - shutdown of request processor complete
2020-03-18 17:39:54,134 [myid:] - INFO  [CommitProcessor:1:CommitProcessor@406] - CommitProcessor exited loop!
2020-03-18 17:39:54,156 [myid:] - INFO  [main:SyncRequestProcessor@256] - Shutting down
2020-03-18 17:39:54,156 [myid:] - INFO  [SyncThread:1:SyncRequestProcessor@225] - SyncRequestProcessor exited!
2020-03-18 17:39:54,157 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):QuorumPeer@863] - Peer state changed: looking
2020-03-18 17:39:54,157 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):QuorumPeer@1501] - PeerState set to LOOKING
2020-03-18 17:39:54,157 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):QuorumPeer@1483] - QuorumPeer main thread exited
2020-03-18 17:39:54,157 [myid:] - INFO  [ConnnectionExpirer:NIOServerCnxnFactory$ConnectionExpirerThread@578] - ConnnectionExpirerThread interrupted
2020-03-18 17:39:54,157 [myid:] - INFO  [NIOServerCxnFactory.SelectorThread-0:NIOServerCnxnFactory$SelectorThread@411] - selector thread exitted run method
2020-03-18 17:39:54,158 [myid:] - INFO  [NIOServerCxnFactory.AcceptThread:/127.0.0.1:13915:NIOServerCnxnFactory$AcceptThread@209] - accept thread exitted run method
2020-03-18 17:39:54,160 [myid:] - INFO  [QuorumPeerListener:QuorumCnxManager$Listener@961] - Leaving listener
2020-03-18 17:39:54,160 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:39:54,160 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 1, my id = 2
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:39:54,161 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:39:54,160 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 2 my id = 1
2020-03-18 17:39:54,160 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 2, my id = 1
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:39:54,161 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:39:54,161 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:39:54,162 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 1 my id = 2
2020-03-18 17:39:54,162 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 3, my id = 1
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:39:54,162 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:39:54,162 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 1, my id = 3
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:39:54,162 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:39:54,162 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:39:54,163 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 3 my id = 1
2020-03-18 17:39:54,163 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:39:54,163 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 1 my id = 3
2020-03-18 17:39:54,164 [myid:] - INFO  [main:QuorumUtil@254] - Shutting down leader election QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled)
2020-03-18 17:39:54,164 [myid:] - INFO  [main:QuorumUtil@259] - Waiting for QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled) to exit thread
2020-03-18 17:39:54,464 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@308] - Restarting follower: 1
2020-03-18 17:39:54,464 [myid:] - INFO  [main:QuorumUtil@204] - Creating QuorumPeer 1; public port 13915
2020-03-18 17:39:54,465 [myid:] - INFO  [main:ServerCnxnFactory@169] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2020-03-18 17:39:54,465 [myid:] - WARN  [main:ServerCnxnFactory@309] - maxCnxns is not configured, using default value 0.
2020-03-18 17:39:54,465 [myid:] - INFO  [main:NIOServerCnxnFactory@666] - Configuring NIO connection handler with 10s sessionless connection timeout, 1 selector thread(s), 8 worker threads, and 64 kB direct buffers.
2020-03-18 17:39:54,465 [myid:] - INFO  [main:NIOServerCnxnFactory@674] - binding to port /127.0.0.1:13915
2020-03-18 17:39:54,466 [myid:] - INFO  [main:FileTxnSnapLog@124] - zookeeper.snapshot.trust.empty : false
2020-03-18 17:39:54,466 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:39:54,466 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:39:54,467 [myid:] - INFO  [main:ZKDatabase@132] - zookeeper.snapshotSizeFactor = 0.33
2020-03-18 17:39:54,467 [myid:] - INFO  [main:ZKDatabase@152] - zookeeper.commitLogCount=500
2020-03-18 17:39:54,467 [myid:] - WARN  [main:QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:39:54,468 [myid:] - INFO  [main:FileSnap@85] - Reading snapshot /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test1595495288663900759.junit.dir/version-2/snapshot.100000002
2020-03-18 17:39:54,468 [myid:] - INFO  [main:DataTree@1737] - The digest value is empty in snapshot
2020-03-18 17:39:54,643 [myid:127.0.0.1:13915] - INFO  [main-SendThread(127.0.0.1:13915):ClientCnxn$SendThread@1154] - Opening socket connection to server localhost/127.0.0.1:13915.
2020-03-18 17:39:54,643 [myid:127.0.0.1:13915] - INFO  [main-SendThread(127.0.0.1:13915):ClientCnxn$SendThread@1156] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2020-03-18 17:39:54,644 [myid:127.0.0.1:13915] - INFO  [main-SendThread(127.0.0.1:13915):ClientCnxn$SendThread@986] - Socket connection established, initiating session, client: /127.0.0.1:52765, server: localhost/127.0.0.1:13915
2020-03-18 17:39:54,849 [myid:] - INFO  [main:FileTxnSnapLog@363] - 12178 txns loaded in 379 ms
2020-03-18 17:39:54,849 [myid:] - INFO  [main:ZKDatabase@289] - Snapshot loaded in 381 ms, highest zxid is 0x100002f94, digest is 26160067137899
2020-03-18 17:39:54,863 [myid:] - WARN  [NIOWorkerThread-1:NIOServerCnxn@373] - Close of session 0x0
java.io.IOException: ZooKeeperServer not running
	at org.apache.zookeeper.server.NIOServerCnxn.readLength(NIOServerCnxn.java:544)
	at org.apache.zookeeper.server.NIOServerCnxn.doIO(NIOServerCnxn.java:332)
	at org.apache.zookeeper.server.NIOServerCnxnFactory$IOWorkRequest.doWork(NIOServerCnxnFactory.java:522)
	at org.apache.zookeeper.server.WorkerService$ScheduledWorkRequest.run(WorkerService.java:154)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2020-03-18 17:39:54,864 [myid:127.0.0.1:13915] - WARN  [main-SendThread(127.0.0.1:13915):ClientCnxn$SendThread@1272] - Session 0x100015daeaa0000 for sever localhost/127.0.0.1:13915, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
EndOfStreamException: Unable to read additional data from server sessionid 0x100015daeaa0000, likely server has closed socket
	at org.apache.zookeeper.ClientCnxnSocketNIO.doIO(ClientCnxnSocketNIO.java:75)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:348)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1262)
2020-03-18 17:39:54,864 [myid:] - INFO  [main:QuorumPeer@2503] - Using 6000ms as the quorum cnxn socket timeout
2020-03-18 17:39:54,864 [myid:] - INFO  [main:QuorumCnxManager$Listener@906] - Election port bind maximum retries is 3
2020-03-18 17:39:54,866 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13917:QuorumCnxManager$Listener$ListenerHandler@1047] - My election bind port: /127.0.0.1:13917
2020-03-18 17:39:54,868 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13915
2020-03-18 17:39:54,869 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):QuorumPeer@1371] - LOOKING
2020-03-18 17:39:54,870 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):FastLeaderElection@931] - New election. My id = 1, proposed zxid=0x100002f94
2020-03-18 17:39:54,871 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:1, n.state:LOOKING, n.leader:1, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x100002f94, message format version:0x2, n.config version:0x0
2020-03-18 17:39:54,871 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13920:QuorumCnxManager$Listener$ListenerHandler@1052] - Received connection request /127.0.0.1:52800
2020-03-18 17:39:54,871 [myid:] - INFO  [WorkerSender[myid=1]:QuorumCnxManager@462] - Have smaller server identifier, so dropping the connection: (2, 1)
2020-03-18 17:39:54,872 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13917:QuorumCnxManager$Listener$ListenerHandler@1052] - Received connection request /127.0.0.1:52801
2020-03-18 17:39:54,872 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13923:QuorumCnxManager$Listener$ListenerHandler@1052] - Received connection request /127.0.0.1:52802
2020-03-18 17:39:54,872 [myid:] - INFO  [WorkerSender[myid=1]:QuorumCnxManager@462] - Have smaller server identifier, so dropping the connection: (3, 1)
2020-03-18 17:39:54,873 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13917:QuorumCnxManager$Listener$ListenerHandler@1052] - Received connection request /127.0.0.1:52803
2020-03-18 17:39:54,873 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:2, n.state:FOLLOWING, n.leader:3, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:39:54,873 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:FOLLOWING; n.sid:1, n.state:LOOKING, n.leader:1, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x100002f94, message format version:0x2, n.config version:0x0
2020-03-18 17:39:54,877 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LEADING; n.sid:1, n.state:LOOKING, n.leader:1, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x100002f94, message format version:0x2, n.config version:0x0
2020-03-18 17:39:54,877 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:3, n.state:LEADING, n.leader:3, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:39:54,878 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:2, n.state:FOLLOWING, n.leader:3, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:39:54,878 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):QuorumPeer@857] - Peer state changed: following
2020-03-18 17:39:54,878 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:FOLLOWING; n.sid:3, n.state:LEADING, n.leader:3, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:39:54,878 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):QuorumPeer@1453] - FOLLOWING
2020-03-18 17:39:54,878 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):ZooKeeperServer@1246] - minSessionTimeout set to 4000
2020-03-18 17:39:54,879 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):ZooKeeperServer@1255] - maxSessionTimeout set to 40000
2020-03-18 17:39:54,879 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):ResponseCache@45] - Response cache size is initialized with value 400.
2020-03-18 17:39:54,879 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):ResponseCache@45] - Response cache size is initialized with value 400.
2020-03-18 17:39:54,879 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):RequestPathMetricsCollector@111] - zookeeper.pathStats.slotCapacity = 60
2020-03-18 17:39:54,879 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):RequestPathMetricsCollector@112] - zookeeper.pathStats.slotDuration = 15
2020-03-18 17:39:54,879 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):RequestPathMetricsCollector@113] - zookeeper.pathStats.maxDepth = 6
2020-03-18 17:39:54,879 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):RequestPathMetricsCollector@114] - zookeeper.pathStats.initialDelay = 5
2020-03-18 17:39:54,879 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):RequestPathMetricsCollector@115] - zookeeper.pathStats.delay = 5
2020-03-18 17:39:54,879 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):RequestPathMetricsCollector@116] - zookeeper.pathStats.enabled = false
2020-03-18 17:39:54,879 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):ZooKeeperServer@1470] - The max bytes for all large requests are set to 104857600
2020-03-18 17:39:54,879 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):ZooKeeperServer@1484] - The large request threshold is set to -1
2020-03-18 17:39:54,879 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):ZooKeeperServer@329] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 clientPortListenBacklog -1 datadir /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test1595495288663900759.junit.dir/version-2 snapdir /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test1595495288663900759.junit.dir/version-2
2020-03-18 17:39:54,879 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):Follower@75] - FOLLOWING - LEADER ELECTION TOOK - 9 MS
2020-03-18 17:39:54,880 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):QuorumPeer@863] - Peer state changed: following - discovery
2020-03-18 17:39:54,881 [myid:] - INFO  [LeaderConnector-/127.0.0.1:13922:Learner$LeaderConnector@328] - Successfully connected to leader, using address: /127.0.0.1:13922
2020-03-18 17:39:54,882 [myid:] - INFO  [LearnerHandler-/127.0.0.1:52808:LearnerHandler@504] - Follower sid: 1 : info : 127.0.0.1:13916:13917:participant;127.0.0.1:13915
2020-03-18 17:39:54,882 [myid:] - INFO  [LearnerHandler-/127.0.0.1:52808:ZKDatabase@345] - On disk txn sync enabled with snapshotSizeFactor 1000.0
2020-03-18 17:39:54,882 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):QuorumPeer@863] - Peer state changed: following - synchronization
2020-03-18 17:39:54,882 [myid:] - INFO  [LearnerHandler-/127.0.0.1:52808:LearnerHandler@800] - Synchronizing with Learner sid: 1 maxCommittedLog=0x100002fda minCommittedLog=0x100002de6 lastProcessedZxid=0x100002fda peerLastZxid=0x100002f94
2020-03-18 17:39:54,882 [myid:] - INFO  [LearnerHandler-/127.0.0.1:52808:LearnerHandler@864] - Using committedLog for peer sid: 1
2020-03-18 17:39:54,883 [myid:] - INFO  [LearnerHandler-/127.0.0.1:52808:LearnerHandler@972] - Sending DIFF zxid=0x100002fda  for peer sid: 1
2020-03-18 17:39:54,885 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):Learner@509] - Getting a diff from the leader 0x100002fda
2020-03-18 17:39:54,885 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):QuorumPeer@868] - Peer state changed: following - synchronization - diff
2020-03-18 17:39:54,885 [myid:] - INFO  [NIOWorkerThread-2:NIOServerCnxn@507] - Processing stat command from /127.0.0.1:52806
2020-03-18 17:39:54,885 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):Learner@575] - Got zxid 0x100002f95 expected 0x1
2020-03-18 17:39:54,886 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):Learner@675] - Learner received NEWLEADER message
2020-03-18 17:39:54,886 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:39:54,888 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):Learner@659] - Learner received UPTODATE message
2020-03-18 17:39:54,888 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):QuorumPeer@868] - Peer state changed: following - synchronization
2020-03-18 17:39:54,888 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):CommitProcessor@476] - Configuring CommitProcessor with readBatchSize -1 commitBatchSize 1
2020-03-18 17:39:54,889 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):CommitProcessor@438] - Configuring CommitProcessor with 4 worker threads.
2020-03-18 17:39:54,890 [myid:] - INFO  [SyncThread:1:FileTxnLog@284] - Creating new log file: log.100002f95
2020-03-18 17:39:54,890 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):QuorumPeer@863] - Peer state changed: following - broadcast
2020-03-18 17:39:54,899 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):Follower@170] - Got zxid 0x100002fdb expected 0x1
2020-03-18 17:39:55,139 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13915
2020-03-18 17:39:55,141 [myid:] - INFO  [NIOWorkerThread-3:NIOServerCnxn@507] - Processing stat command from /127.0.0.1:52819
2020-03-18 17:39:55,141 [myid:] - INFO  [NIOWorkerThread-3:StatCommand@52] - Stat command output
2020-03-18 17:39:55,142 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@310] - Setting up server: 1
2020-03-18 17:39:55,809 [myid:127.0.0.1:13915] - INFO  [main-SendThread(127.0.0.1:13915):ClientCnxn$SendThread@1154] - Opening socket connection to server localhost/127.0.0.1:13915.
2020-03-18 17:39:55,809 [myid:127.0.0.1:13915] - INFO  [main-SendThread(127.0.0.1:13915):ClientCnxn$SendThread@1156] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2020-03-18 17:39:55,810 [myid:127.0.0.1:13915] - INFO  [main-SendThread(127.0.0.1:13915):ClientCnxn$SendThread@986] - Socket connection established, initiating session, client: /127.0.0.1:52860, server: localhost/127.0.0.1:13915
2020-03-18 17:39:55,810 [myid:] - INFO  [NIOWorkerThread-4:Learner@137] - Revalidating client: 0x100015daeaa0001
2020-03-18 17:39:55,812 [myid:127.0.0.1:13915] - INFO  [main-SendThread(127.0.0.1:13915):ClientCnxn$SendThread@1420] - Session establishment complete on server localhost/127.0.0.1:13915, session id = 0x100015daeaa0001, negotiated timeout = 30000
2020-03-18 17:39:56,559 [myid:] - INFO  [WorkerSender[myid=1]:FastLeaderElection$Messenger$WorkerSender@492] - WorkerSender is down
2020-03-18 17:39:56,576 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@458] - WorkerReceiver is down
2020-03-18 17:39:56,890 [myid:127.0.0.1:13915] - INFO  [main-SendThread(127.0.0.1:13915):ClientCnxn$SendThread@1154] - Opening socket connection to server localhost/127.0.0.1:13915.
2020-03-18 17:39:56,890 [myid:127.0.0.1:13915] - INFO  [main-SendThread(127.0.0.1:13915):ClientCnxn$SendThread@1156] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2020-03-18 17:39:56,890 [myid:127.0.0.1:13915] - INFO  [main-SendThread(127.0.0.1:13915):ClientCnxn$SendThread@986] - Socket connection established, initiating session, client: /127.0.0.1:52866, server: localhost/127.0.0.1:13915
2020-03-18 17:39:56,891 [myid:] - INFO  [NIOWorkerThread-5:Learner@137] - Revalidating client: 0x100015daeaa0000
2020-03-18 17:39:56,892 [myid:127.0.0.1:13915] - INFO  [main-SendThread(127.0.0.1:13915):ClientCnxn$SendThread@1420] - Session establishment complete on server localhost/127.0.0.1:13915, session id = 0x100015daeaa0000, negotiated timeout = 30000
2020-03-18 17:40:23,829 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@540] - Wait for pending requests: 9
2020-03-18 17:40:24,832 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@555] - Wait for server to sync
2020-03-18 17:40:24,832 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@594] - Verifying state
2020-03-18 17:40:24,833 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@615] - Validating ephemeral for session id 0x100015daeaa0001
2020-03-18 17:40:24,833 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@615] - Validating ephemeral for session id 0x300015dacf00000
2020-03-18 17:40:24,870 [myid:] - INFO  [RequestThrottler:QuorumZooKeeperServer@158] - Submitting global closeSession request for session 0x100015daeaa0000
2020-03-18 17:40:24,976 [myid:] - INFO  [main:ZooKeeper@1618] - Session: 0x100015daeaa0000 closed
2020-03-18 17:40:24,976 [myid:] - INFO  [main-EventThread:ClientCnxn$EventThread@566] - EventThread shut down for session: 0x100015daeaa0000
2020-03-18 17:40:24,977 [myid:] - INFO  [RequestThrottler:QuorumZooKeeperServer@158] - Submitting global closeSession request for session 0x100015daeaa0001
2020-03-18 17:40:24,989 [myid:127.0.0.1:13915] - WARN  [main-SendThread(127.0.0.1:13915):ClientCnxn$SendThread@1266] - An exception was thrown while closing send thread for session 0x100015daeaa0001.
EndOfStreamException: Unable to read additional data from server sessionid 0x100015daeaa0001, likely server has closed socket
	at org.apache.zookeeper.ClientCnxnSocketNIO.doIO(ClientCnxnSocketNIO.java:75)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:348)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1262)
2020-03-18 17:40:25,093 [myid:] - INFO  [main-EventThread:ClientCnxn$EventThread@566] - EventThread shut down for session: 0x100015daeaa0001
2020-03-18 17:40:25,093 [myid:] - INFO  [main:ZooKeeper@1618] - Session: 0x100015daeaa0001 closed
2020-03-18 17:40:25,093 [myid:] - INFO  [RequestThrottler:QuorumZooKeeperServer@158] - Submitting global closeSession request for session 0x300015dacf00000
2020-03-18 17:40:25,385 [myid:] - INFO  [main:ZooKeeper@1618] - Session: 0x300015dacf00000 closed
2020-03-18 17:40:25,385 [myid:] - INFO  [main-EventThread:ClientCnxn$EventThread@566] - EventThread shut down for session: 0x300015dacf00000
2020-03-18 17:40:25,385 [myid:] - INFO  [main:QuorumUtil@250] - Shutting down quorum peer QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled)
2020-03-18 17:40:25,385 [myid:] - INFO  [main:Follower@292] - shutdown Follower
2020-03-18 17:40:25,385 [myid:] - INFO  [main:LearnerZooKeeperServer@160] - Shutting down
2020-03-18 17:40:25,386 [myid:] - INFO  [main:ZooKeeperServer@784] - shutting down
2020-03-18 17:40:25,386 [myid:] - ERROR [LearnerHandler-/127.0.0.1:52808:LearnerHandler@707] - Unexpected exception causing shutdown while sock still open
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:96)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:134)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:643)
2020-03-18 17:40:25,386 [myid:] - INFO  [main:RequestThrottler@244] - Shutting down
2020-03-18 17:40:25,386 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):Follower@129] - Exception when following the leader
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:96)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:134)
	at org.apache.zookeeper.server.quorum.Learner.readPacket(Learner.java:182)
	at org.apache.zookeeper.server.quorum.Follower.followLeader(Follower.java:125)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:1455)
2020-03-18 17:40:25,386 [myid:] - INFO  [RequestThrottler:RequestThrottler@205] - Draining request throttler queue
2020-03-18 17:40:25,386 [myid:] - WARN  [LearnerHandler-/127.0.0.1:52808:LearnerHandler@730] - ******* GOODBYE /127.0.0.1:52808 ********
2020-03-18 17:40:25,386 [myid:] - INFO  [RequestThrottler:RequestThrottler@181] - RequestThrottler shutdown. Dropped 0 requests
2020-03-18 17:40:25,386 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):Follower@143] - Disconnected from leader (with address: /127.0.0.1:13922). Was connected for 30504ms. Sync state: true
2020-03-18 17:40:25,386 [myid:] - INFO  [main:FollowerRequestProcessor@148] - Shutting down
2020-03-18 17:40:25,387 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):Follower@292] - shutdown Follower
2020-03-18 17:40:25,387 [myid:] - INFO  [FollowerRequestProcessor:1:FollowerRequestProcessor@112] - FollowerRequestProcessor exited loop!
2020-03-18 17:40:25,387 [myid:] - INFO  [main:CommitProcessor@617] - Shutting down
2020-03-18 17:40:25,388 [myid:] - INFO  [main:FinalRequestProcessor@662] - shutdown of request processor complete
2020-03-18 17:40:25,388 [myid:] - INFO  [CommitProcessor:1:CommitProcessor@406] - CommitProcessor exited loop!
2020-03-18 17:40:25,402 [myid:] - INFO  [main:SyncRequestProcessor@256] - Shutting down
2020-03-18 17:40:25,402 [myid:] - INFO  [SyncThread:1:SyncRequestProcessor@225] - SyncRequestProcessor exited!
2020-03-18 17:40:25,402 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):QuorumPeer@863] - Peer state changed: looking
2020-03-18 17:40:25,402 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):QuorumPeer@1501] - PeerState set to LOOKING
2020-03-18 17:40:25,402 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled):QuorumPeer@1483] - QuorumPeer main thread exited
2020-03-18 17:40:25,402 [myid:] - INFO  [ConnnectionExpirer:NIOServerCnxnFactory$ConnectionExpirerThread@578] - ConnnectionExpirerThread interrupted
2020-03-18 17:40:25,403 [myid:] - INFO  [NIOServerCxnFactory.AcceptThread:/127.0.0.1:13915:NIOServerCnxnFactory$AcceptThread@209] - accept thread exitted run method
2020-03-18 17:40:25,402 [myid:] - INFO  [NIOServerCxnFactory.SelectorThread-0:NIOServerCnxnFactory$SelectorThread@411] - selector thread exitted run method
2020-03-18 17:40:25,404 [myid:] - INFO  [QuorumPeerListener:QuorumCnxManager$Listener@961] - Leaving listener
2020-03-18 17:40:25,405 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:40:25,405 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:40:25,405 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 3, my id = 1
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:40:25,406 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:40:25,405 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 2 my id = 1
2020-03-18 17:40:25,405 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 1, my id = 3
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:40:25,406 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:40:25,405 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 2, my id = 1
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:40:25,407 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:40:25,405 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 1, my id = 2
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:40:25,407 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:40:25,406 [myid:] - INFO  [main:QuorumUtil@254] - Shutting down leader election QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled)
2020-03-18 17:40:25,406 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 3 my id = 1
2020-03-18 17:40:25,408 [myid:] - INFO  [main:QuorumUtil@259] - Waiting for QuorumPeer[myid=1](plain=127.0.0.1:13915)(secure=disabled) to exit thread
2020-03-18 17:40:25,408 [myid:] - INFO  [main:QuorumUtil@250] - Shutting down quorum peer QuorumPeer[myid=2](plain=127.0.0.1:13918)(secure=disabled)
2020-03-18 17:40:25,408 [myid:] - INFO  [main:Follower@292] - shutdown Follower
2020-03-18 17:40:25,407 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 1 my id = 3
2020-03-18 17:40:25,408 [myid:] - INFO  [main:LearnerZooKeeperServer@160] - Shutting down
2020-03-18 17:40:25,408 [myid:] - INFO  [main:ZooKeeperServer@784] - shutting down
2020-03-18 17:40:25,407 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:40:25,408 [myid:] - INFO  [main:RequestThrottler@244] - Shutting down
2020-03-18 17:40:25,408 [myid:] - WARN  [QuorumPeer[myid=2](plain=127.0.0.1:13918)(secure=disabled):Follower@129] - Exception when following the leader
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:96)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:134)
	at org.apache.zookeeper.server.quorum.Learner.readPacket(Learner.java:182)
	at org.apache.zookeeper.server.quorum.Follower.followLeader(Follower.java:125)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:1455)
2020-03-18 17:40:25,408 [myid:] - ERROR [LearnerHandler-/127.0.0.1:51964:LearnerHandler@707] - Unexpected exception causing shutdown while sock still open
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:96)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:134)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:643)
2020-03-18 17:40:25,410 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13918)(secure=disabled):Follower@143] - Disconnected from leader (with address: /127.0.0.1:13922). Was connected for 44854ms. Sync state: true
2020-03-18 17:40:25,409 [myid:] - INFO  [RequestThrottler:RequestThrottler@205] - Draining request throttler queue
2020-03-18 17:40:25,409 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:40:25,410 [myid:] - INFO  [RequestThrottler:RequestThrottler@181] - RequestThrottler shutdown. Dropped 0 requests
2020-03-18 17:40:25,410 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13918)(secure=disabled):Follower@292] - shutdown Follower
2020-03-18 17:40:25,410 [myid:] - WARN  [LearnerHandler-/127.0.0.1:51964:LearnerHandler@730] - ******* GOODBYE /127.0.0.1:51964 ********
2020-03-18 17:40:25,410 [myid:] - INFO  [main:FollowerRequestProcessor@148] - Shutting down
2020-03-18 17:40:25,410 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 1 my id = 2
2020-03-18 17:40:25,410 [myid:] - INFO  [main:CommitProcessor@617] - Shutting down
2020-03-18 17:40:25,410 [myid:] - INFO  [FollowerRequestProcessor:2:FollowerRequestProcessor@112] - FollowerRequestProcessor exited loop!
2020-03-18 17:40:25,411 [myid:] - INFO  [main:FinalRequestProcessor@662] - shutdown of request processor complete
2020-03-18 17:40:25,411 [myid:] - INFO  [CommitProcessor:2:CommitProcessor@406] - CommitProcessor exited loop!
2020-03-18 17:40:25,445 [myid:] - INFO  [main:SyncRequestProcessor@256] - Shutting down
2020-03-18 17:40:25,445 [myid:] - INFO  [SyncThread:2:SyncRequestProcessor@225] - SyncRequestProcessor exited!
2020-03-18 17:40:25,446 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13918)(secure=disabled):QuorumPeer@863] - Peer state changed: looking
2020-03-18 17:40:25,446 [myid:] - WARN  [QuorumPeer[myid=2](plain=127.0.0.1:13918)(secure=disabled):QuorumPeer@1501] - PeerState set to LOOKING
2020-03-18 17:40:25,446 [myid:] - WARN  [QuorumPeer[myid=2](plain=127.0.0.1:13918)(secure=disabled):QuorumPeer@1483] - QuorumPeer main thread exited
2020-03-18 17:40:25,446 [myid:] - INFO  [ConnnectionExpirer:NIOServerCnxnFactory$ConnectionExpirerThread@578] - ConnnectionExpirerThread interrupted
2020-03-18 17:40:25,446 [myid:] - INFO  [NIOServerCxnFactory.SelectorThread-0:NIOServerCnxnFactory$SelectorThread@411] - selector thread exitted run method
2020-03-18 17:40:25,446 [myid:] - INFO  [NIOServerCxnFactory.AcceptThread:/127.0.0.1:13918:NIOServerCnxnFactory$AcceptThread@209] - accept thread exitted run method
2020-03-18 17:40:25,447 [myid:] - INFO  [QuorumPeerListener:QuorumCnxManager$Listener@961] - Leaving listener
2020-03-18 17:40:25,447 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:40:25,447 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 3 my id = 2
2020-03-18 17:40:25,447 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 2, my id = 3
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:40:25,447 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:40:25,447 [myid:] - INFO  [main:QuorumUtil@254] - Shutting down leader election QuorumPeer[myid=2](plain=127.0.0.1:13918)(secure=disabled)
2020-03-18 17:40:25,447 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 3, my id = 2
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:40:25,448 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:40:25,448 [myid:] - INFO  [main:QuorumUtil@259] - Waiting for QuorumPeer[myid=2](plain=127.0.0.1:13918)(secure=disabled) to exit thread
2020-03-18 17:40:25,448 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:40:25,448 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 2 my id = 3
2020-03-18 17:40:25,448 [myid:] - INFO  [main:QuorumUtil@250] - Shutting down quorum peer QuorumPeer[myid=3](plain=127.0.0.1:13921)(secure=disabled)
2020-03-18 17:40:25,449 [myid:] - INFO  [main:Leader@792] - Shutting down
2020-03-18 17:40:25,449 [myid:] - INFO  [main:Leader@798] - Shutdown called. For the reason quorum Peer shutdown
2020-03-18 17:40:25,449 [myid:] - WARN  [LearnerCnxAcceptorHandler-/127.0.0.1:13922:Leader$LearnerCnxAcceptor$LearnerCnxAcceptorHandler@523] - Exception while shutting down acceptor.
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.Leader$LearnerCnxAcceptor$LearnerCnxAcceptorHandler.acceptConnections(Leader.java:510)
	at org.apache.zookeeper.server.quorum.Leader$LearnerCnxAcceptor$LearnerCnxAcceptorHandler.run(Leader.java:493)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2020-03-18 17:40:25,449 [myid:] - INFO  [main:ZooKeeperServer@784] - shutting down
2020-03-18 17:40:25,449 [myid:] - INFO  [main:RequestThrottler@244] - Shutting down
2020-03-18 17:40:25,449 [myid:] - INFO  [RequestThrottler:RequestThrottler@205] - Draining request throttler queue
2020-03-18 17:40:25,450 [myid:] - INFO  [RequestThrottler:RequestThrottler@181] - RequestThrottler shutdown. Dropped 0 requests
2020-03-18 17:40:25,450 [myid:] - INFO  [main:SessionTrackerImpl@247] - Shutting down
2020-03-18 17:40:25,450 [myid:] - INFO  [main:LeaderRequestProcessor@79] - Shutting down
2020-03-18 17:40:25,450 [myid:] - INFO  [main:PrepRequestProcessor@1047] - Shutting down
2020-03-18 17:40:25,450 [myid:] - INFO  [main:ProposalRequestProcessor@87] - Shutting down
2020-03-18 17:40:25,450 [myid:] - INFO  [main:CommitProcessor@617] - Shutting down
2020-03-18 17:40:25,450 [myid:] - INFO  [ProcessThread(sid:3 cport:-1)::PrepRequestProcessor@159] - PrepRequestProcessor exited loop!
2020-03-18 17:40:25,450 [myid:] - INFO  [main:Leader$ToBeAppliedRequestProcessor@1106] - Shutting down
2020-03-18 17:40:25,450 [myid:] - INFO  [main:FinalRequestProcessor@662] - shutdown of request processor complete
2020-03-18 17:40:25,450 [myid:] - INFO  [CommitProcessor:3:CommitProcessor@406] - CommitProcessor exited loop!
2020-03-18 17:40:25,450 [myid:] - INFO  [main:SyncRequestProcessor@256] - Shutting down
2020-03-18 17:40:25,451 [myid:] - INFO  [SyncThread:3:SyncRequestProcessor@225] - SyncRequestProcessor exited!
2020-03-18 17:40:25,479 [myid:] - INFO  [NIOServerCxnFactory.AcceptThread:/127.0.0.1:13921:NIOServerCnxnFactory$AcceptThread@209] - accept thread exitted run method
2020-03-18 17:40:25,480 [myid:] - INFO  [NIOServerCxnFactory.SelectorThread-0:NIOServerCnxnFactory$SelectorThread@411] - selector thread exitted run method
2020-03-18 17:40:25,480 [myid:] - INFO  [ConnnectionExpirer:NIOServerCnxnFactory$ConnectionExpirerThread@578] - ConnnectionExpirerThread interrupted
2020-03-18 17:40:25,481 [myid:] - WARN  [QuorumPeer[myid=3](plain=127.0.0.1:13921)(secure=disabled):QuorumPeer@1471] - Unexpected exception
java.lang.InterruptedException
	at java.lang.Object.wait(Native Method)
	at org.apache.zookeeper.server.quorum.Leader.lead(Leader.java:730)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:1468)
2020-03-18 17:40:25,481 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13921)(secure=disabled):Leader@792] - Shutting down
2020-03-18 17:40:25,481 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13921)(secure=disabled):QuorumPeer@863] - Peer state changed: looking
2020-03-18 17:40:25,482 [myid:] - WARN  [QuorumPeer[myid=3](plain=127.0.0.1:13921)(secure=disabled):QuorumPeer@1501] - PeerState set to LOOKING
2020-03-18 17:40:25,482 [myid:] - WARN  [QuorumPeer[myid=3](plain=127.0.0.1:13921)(secure=disabled):QuorumPeer@1483] - QuorumPeer main thread exited
2020-03-18 17:40:25,481 [myid:] - INFO  [QuorumPeerListener:QuorumCnxManager$Listener@961] - Leaving listener
2020-03-18 17:40:25,482 [myid:] - INFO  [main:QuorumUtil@254] - Shutting down leader election QuorumPeer[myid=3](plain=127.0.0.1:13921)(secure=disabled)
2020-03-18 17:40:25,482 [myid:] - INFO  [main:QuorumUtil@259] - Waiting for QuorumPeer[myid=3](plain=127.0.0.1:13921)(secure=disabled) to exit thread
2020-03-18 17:40:25,482 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13915
2020-03-18 17:40:25,483 [myid:] - INFO  [main:QuorumUtil@243] - 127.0.0.1:13915 is no longer accepting client connections
2020-03-18 17:40:25,483 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13918
2020-03-18 17:40:25,483 [myid:] - INFO  [main:QuorumUtil@243] - 127.0.0.1:13918 is no longer accepting client connections
2020-03-18 17:40:25,483 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13921
2020-03-18 17:40:25,483 [myid:] - INFO  [main:QuorumUtil@243] - 127.0.0.1:13921 is no longer accepting client connections
2020-03-18 17:40:25,489 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@89] - Memory used 107677
2020-03-18 17:40:25,490 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@94] - Number of threads 28
2020-03-18 17:40:25,490 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@109] - FINISHED TEST METHOD testResyncByTxnlogThenDiffAfterFollowerCrashes
2020-03-18 17:40:25,490 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@76] - Error count 140
2020-03-18 17:40:25,491 [myid:] - INFO  [main:ZKTestCase$1@96] - SUCCEEDED testResyncByTxnlogThenDiffAfterFollowerCrashes
2020-03-18 17:40:25,491 [myid:] - INFO  [main:ZKTestCase$1@91] - FINISHED testResyncByTxnlogThenDiffAfterFollowerCrashes
2020-03-18 17:40:25,492 [myid:] - INFO  [main:ZKTestCase$1@86] - STARTING testLaggingFollowerResyncsUnderNewEpoch
2020-03-18 17:40:25,493 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@84] - RUNNING TEST METHOD testLaggingFollowerResyncsUnderNewEpoch
2020-03-18 17:40:25,494 [myid:] - INFO  [main:JMXEnv@58] - connecting to addr service:jmx:rmi://127.0.0.1/stub/rO0ABXNyAC5qYXZheC5tYW5hZ2VtZW50LnJlbW90ZS5ybWkuUk1JU2VydmVySW1wbF9TdHViAAAAAAAAAAICAAB4cgAaamF2YS5ybWkuc2VydmVyLlJlbW90ZVN0dWLp/tzJi+FlGgIAAHhyABxqYXZhLnJtaS5zZXJ2ZXIuUmVtb3RlT2JqZWN002G0kQxhMx4DAAB4cHc3AAtVbmljYXN0UmVmMgAADDE3Mi4xOC4xNC4zNAAAyptT6dNb2dQWNef4H6IAAAFw7QNGc4ALAHg=
2020-03-18 17:40:25,563 [myid:] - INFO  [main:PortAssignment@87] - Assigned port 13924 from range 13914 - 16606.
2020-03-18 17:40:25,564 [myid:] - INFO  [main:PortAssignment@87] - Assigned port 13925 from range 13914 - 16606.
2020-03-18 17:40:25,564 [myid:] - INFO  [main:PortAssignment@87] - Assigned port 13926 from range 13914 - 16606.
2020-03-18 17:40:25,565 [myid:] - INFO  [main:PortAssignment@87] - Assigned port 13927 from range 13914 - 16606.
2020-03-18 17:40:25,566 [myid:] - INFO  [main:PortAssignment@87] - Assigned port 13928 from range 13914 - 16606.
2020-03-18 17:40:25,566 [myid:] - INFO  [main:PortAssignment@87] - Assigned port 13929 from range 13914 - 16606.
2020-03-18 17:40:25,567 [myid:] - INFO  [main:PortAssignment@87] - Assigned port 13930 from range 13914 - 16606.
2020-03-18 17:40:25,567 [myid:] - INFO  [main:PortAssignment@87] - Assigned port 13931 from range 13914 - 16606.
2020-03-18 17:40:25,567 [myid:] - INFO  [main:PortAssignment@87] - Assigned port 13932 from range 13914 - 16606.
2020-03-18 17:40:25,567 [myid:] - INFO  [main:QuorumUtil@118] - Creating QuorumPeer 1; public port 13924
2020-03-18 17:40:25,567 [myid:] - INFO  [main:ServerCnxnFactory@169] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2020-03-18 17:40:25,568 [myid:] - WARN  [main:ServerCnxnFactory@309] - maxCnxns is not configured, using default value 0.
2020-03-18 17:40:25,568 [myid:] - INFO  [main:NIOServerCnxnFactory@666] - Configuring NIO connection handler with 10s sessionless connection timeout, 1 selector thread(s), 8 worker threads, and 64 kB direct buffers.
2020-03-18 17:40:25,570 [myid:] - INFO  [main:NIOServerCnxnFactory@674] - binding to port /127.0.0.1:13924
2020-03-18 17:40:25,570 [myid:] - INFO  [main:FileTxnSnapLog@124] - zookeeper.snapshot.trust.empty : false
2020-03-18 17:40:25,572 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:25,573 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:25,573 [myid:] - INFO  [main:ZKDatabase@132] - zookeeper.snapshotSizeFactor = 0.33
2020-03-18 17:40:25,573 [myid:] - INFO  [main:ZKDatabase@152] - zookeeper.commitLogCount=500
2020-03-18 17:40:25,573 [myid:] - WARN  [main:QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:40:25,573 [myid:] - INFO  [main:QuorumUtil@118] - Creating QuorumPeer 2; public port 13927
2020-03-18 17:40:25,576 [myid:] - INFO  [main:ServerCnxnFactory@169] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2020-03-18 17:40:25,576 [myid:] - WARN  [main:ServerCnxnFactory@309] - maxCnxns is not configured, using default value 0.
2020-03-18 17:40:25,577 [myid:] - INFO  [main:NIOServerCnxnFactory@666] - Configuring NIO connection handler with 10s sessionless connection timeout, 1 selector thread(s), 8 worker threads, and 64 kB direct buffers.
2020-03-18 17:40:25,579 [myid:] - INFO  [main:NIOServerCnxnFactory@674] - binding to port /127.0.0.1:13927
2020-03-18 17:40:25,581 [myid:] - INFO  [main:FileTxnSnapLog@124] - zookeeper.snapshot.trust.empty : false
2020-03-18 17:40:25,587 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:25,587 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:25,588 [myid:] - INFO  [main:ZKDatabase@132] - zookeeper.snapshotSizeFactor = 0.33
2020-03-18 17:40:25,588 [myid:] - INFO  [main:ZKDatabase@152] - zookeeper.commitLogCount=500
2020-03-18 17:40:25,591 [myid:] - WARN  [main:QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:40:25,591 [myid:] - INFO  [main:QuorumUtil@118] - Creating QuorumPeer 3; public port 13930
2020-03-18 17:40:25,591 [myid:] - INFO  [main:ServerCnxnFactory@169] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2020-03-18 17:40:25,591 [myid:] - WARN  [main:ServerCnxnFactory@309] - maxCnxns is not configured, using default value 0.
2020-03-18 17:40:25,591 [myid:] - INFO  [main:NIOServerCnxnFactory@666] - Configuring NIO connection handler with 10s sessionless connection timeout, 1 selector thread(s), 8 worker threads, and 64 kB direct buffers.
2020-03-18 17:40:25,591 [myid:] - INFO  [main:NIOServerCnxnFactory@674] - binding to port /127.0.0.1:13930
2020-03-18 17:40:25,603 [myid:] - INFO  [main:FileTxnSnapLog@124] - zookeeper.snapshot.trust.empty : false
2020-03-18 17:40:25,603 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:25,604 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:25,605 [myid:] - INFO  [main:ZKDatabase@132] - zookeeper.snapshotSizeFactor = 0.33
2020-03-18 17:40:25,605 [myid:] - INFO  [main:ZKDatabase@152] - zookeeper.commitLogCount=500
2020-03-18 17:40:25,605 [myid:] - WARN  [main:QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:40:25,605 [myid:] - INFO  [main:QuorumUtil@250] - Shutting down quorum peer QuorumPeer
2020-03-18 17:40:25,605 [myid:] - INFO  [main:QuorumUtil@257] - No election available to shutdown QuorumPeer
2020-03-18 17:40:25,605 [myid:] - INFO  [main:QuorumUtil@259] - Waiting for QuorumPeer to exit thread
2020-03-18 17:40:25,605 [myid:] - INFO  [main:QuorumUtil@250] - Shutting down quorum peer QuorumPeer
2020-03-18 17:40:25,606 [myid:] - INFO  [main:QuorumUtil@257] - No election available to shutdown QuorumPeer
2020-03-18 17:40:25,606 [myid:] - INFO  [main:QuorumUtil@259] - Waiting for QuorumPeer to exit thread
2020-03-18 17:40:25,606 [myid:] - INFO  [main:QuorumUtil@250] - Shutting down quorum peer QuorumPeer
2020-03-18 17:40:25,607 [myid:] - INFO  [main:QuorumUtil@257] - No election available to shutdown QuorumPeer
2020-03-18 17:40:25,607 [myid:] - INFO  [main:QuorumUtil@259] - Waiting for QuorumPeer to exit thread
2020-03-18 17:40:25,607 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13924
2020-03-18 17:40:25,610 [myid:] - INFO  [main:QuorumUtil@243] - 127.0.0.1:13924 is no longer accepting client connections
2020-03-18 17:40:25,611 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13927
2020-03-18 17:40:25,612 [myid:] - INFO  [main:QuorumUtil@243] - 127.0.0.1:13927 is no longer accepting client connections
2020-03-18 17:40:25,613 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13930
2020-03-18 17:40:25,613 [myid:] - INFO  [main:QuorumUtil@243] - 127.0.0.1:13930 is no longer accepting client connections
2020-03-18 17:40:25,614 [myid:] - INFO  [main:QuorumUtil@204] - Creating QuorumPeer 1; public port 13924
2020-03-18 17:40:25,614 [myid:] - INFO  [main:ServerCnxnFactory@169] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2020-03-18 17:40:25,614 [myid:] - WARN  [main:ServerCnxnFactory@309] - maxCnxns is not configured, using default value 0.
2020-03-18 17:40:25,614 [myid:] - INFO  [main:NIOServerCnxnFactory@666] - Configuring NIO connection handler with 10s sessionless connection timeout, 1 selector thread(s), 8 worker threads, and 64 kB direct buffers.
2020-03-18 17:40:25,614 [myid:] - INFO  [main:NIOServerCnxnFactory@674] - binding to port /127.0.0.1:13924
2020-03-18 17:40:25,615 [myid:] - INFO  [main:FileTxnSnapLog@124] - zookeeper.snapshot.trust.empty : false
2020-03-18 17:40:25,615 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:25,615 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:25,615 [myid:] - INFO  [main:ZKDatabase@132] - zookeeper.snapshotSizeFactor = 0.33
2020-03-18 17:40:25,615 [myid:] - INFO  [main:ZKDatabase@152] - zookeeper.commitLogCount=500
2020-03-18 17:40:25,615 [myid:] - WARN  [main:QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:40:25,616 [myid:] - INFO  [main:FileTxnSnapLog@251] - Initialize file found, an empty database will not block voting participation
2020-03-18 17:40:25,617 [myid:] - INFO  [main:FileTxnSnapLog@470] - Snapshotting: 0x0 to /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test9034519182081675840.junit.dir/version-2/snapshot.0
2020-03-18 17:40:25,619 [myid:] - INFO  [main:ZKDatabase@289] - Snapshot loaded in 3 ms, highest zxid is 0x0, digest is 1371985504
2020-03-18 17:40:25,619 [myid:] - INFO  [main:QuorumPeer@1102] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2020-03-18 17:40:25,626 [myid:] - INFO  [main:QuorumPeer@1122] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2020-03-18 17:40:25,636 [myid:] - INFO  [main:QuorumPeer@2503] - Using 6000ms as the quorum cnxn socket timeout
2020-03-18 17:40:25,636 [myid:] - INFO  [main:QuorumCnxManager$Listener@906] - Election port bind maximum retries is 3
2020-03-18 17:40:25,638 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13926:QuorumCnxManager$Listener$ListenerHandler@1047] - My election bind port: /127.0.0.1:13926
2020-03-18 17:40:25,653 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):QuorumPeer@1371] - LOOKING
2020-03-18 17:40:25,653 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):FastLeaderElection@931] - New election. My id = 1, proposed zxid=0x0
2020-03-18 17:40:25,654 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@716] - Cannot open channel to 2 at election address /127.0.0.1:13929
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:677)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:748)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:644)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:503)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:487)
	at java.lang.Thread.run(Thread.java:748)
2020-03-18 17:40:25,655 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@716] - Cannot open channel to 3 at election address /127.0.0.1:13932
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:677)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:748)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:644)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:503)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:487)
	at java.lang.Thread.run(Thread.java:748)
2020-03-18 17:40:25,655 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:1, n.state:LOOKING, n.leader:1, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:25,655 [myid:] - INFO  [main:QuorumUtil@204] - Creating QuorumPeer 2; public port 13927
2020-03-18 17:40:25,656 [myid:] - INFO  [main:ServerCnxnFactory@169] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2020-03-18 17:40:25,656 [myid:] - WARN  [main:ServerCnxnFactory@309] - maxCnxns is not configured, using default value 0.
2020-03-18 17:40:25,656 [myid:] - INFO  [main:NIOServerCnxnFactory@666] - Configuring NIO connection handler with 10s sessionless connection timeout, 1 selector thread(s), 8 worker threads, and 64 kB direct buffers.
2020-03-18 17:40:25,656 [myid:] - INFO  [main:NIOServerCnxnFactory@674] - binding to port /127.0.0.1:13927
2020-03-18 17:40:25,664 [myid:] - INFO  [main:FileTxnSnapLog@124] - zookeeper.snapshot.trust.empty : false
2020-03-18 17:40:25,679 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:25,697 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:25,697 [myid:] - INFO  [main:ZKDatabase@132] - zookeeper.snapshotSizeFactor = 0.33
2020-03-18 17:40:25,698 [myid:] - INFO  [main:ZKDatabase@152] - zookeeper.commitLogCount=500
2020-03-18 17:40:25,698 [myid:] - WARN  [main:QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:40:25,698 [myid:] - INFO  [main:FileTxnSnapLog@251] - Initialize file found, an empty database will not block voting participation
2020-03-18 17:40:25,699 [myid:] - INFO  [main:FileTxnSnapLog@470] - Snapshotting: 0x0 to /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test7199756213815051992.junit.dir/version-2/snapshot.0
2020-03-18 17:40:25,700 [myid:] - INFO  [main:ZKDatabase@289] - Snapshot loaded in 3 ms, highest zxid is 0x0, digest is 1371985504
2020-03-18 17:40:25,701 [myid:] - INFO  [main:QuorumPeer@1102] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2020-03-18 17:40:25,701 [myid:] - INFO  [main:QuorumPeer@1122] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2020-03-18 17:40:25,703 [myid:] - INFO  [main:QuorumPeer@2503] - Using 6000ms as the quorum cnxn socket timeout
2020-03-18 17:40:25,703 [myid:] - INFO  [main:QuorumCnxManager$Listener@906] - Election port bind maximum retries is 3
2020-03-18 17:40:25,704 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13924
2020-03-18 17:40:25,704 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13929:QuorumCnxManager$Listener$ListenerHandler@1047] - My election bind port: /127.0.0.1:13929
2020-03-18 17:40:25,704 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):QuorumPeer@1371] - LOOKING
2020-03-18 17:40:25,705 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):FastLeaderElection@931] - New election. My id = 2, proposed zxid=0x0
2020-03-18 17:40:25,705 [myid:] - INFO  [NIOWorkerThread-1:NIOServerCnxn@507] - Processing stat command from /127.0.0.1:53865
2020-03-18 17:40:25,705 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13926:QuorumCnxManager$Listener$ListenerHandler@1052] - Received connection request /127.0.0.1:53866
2020-03-18 17:40:25,707 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:2, n.state:LOOKING, n.leader:2, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:25,707 [myid:] - WARN  [WorkerSender[myid=2]:QuorumCnxManager@716] - Cannot open channel to 3 at election address /127.0.0.1:13932
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:677)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:748)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:644)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:503)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:487)
	at java.lang.Thread.run(Thread.java:748)
2020-03-18 17:40:25,707 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:1, n.state:LOOKING, n.leader:2, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:25,707 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:2, n.state:LOOKING, n.leader:2, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:25,708 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:1, n.state:LOOKING, n.leader:1, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:25,708 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:1, n.state:LOOKING, n.leader:2, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:25,708 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@716] - Cannot open channel to 3 at election address /127.0.0.1:13932
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:677)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:748)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:644)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:503)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:487)
	at java.lang.Thread.run(Thread.java:748)
2020-03-18 17:40:25,908 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):QuorumPeer@857] - Peer state changed: following
2020-03-18 17:40:25,908 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):QuorumPeer@1453] - FOLLOWING
2020-03-18 17:40:25,909 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):ZooKeeperServer@1246] - minSessionTimeout set to 4000
2020-03-18 17:40:25,909 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):ZooKeeperServer@1255] - maxSessionTimeout set to 40000
2020-03-18 17:40:25,909 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):ResponseCache@45] - Response cache size is initialized with value 400.
2020-03-18 17:40:25,909 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):QuorumPeer@857] - Peer state changed: leading
2020-03-18 17:40:25,909 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):ResponseCache@45] - Response cache size is initialized with value 400.
2020-03-18 17:40:25,909 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):QuorumPeer@1465] - LEADING
2020-03-18 17:40:25,909 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):RequestPathMetricsCollector@111] - zookeeper.pathStats.slotCapacity = 60
2020-03-18 17:40:25,909 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):ZooKeeperServer@1246] - minSessionTimeout set to 4000
2020-03-18 17:40:25,909 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):RequestPathMetricsCollector@112] - zookeeper.pathStats.slotDuration = 15
2020-03-18 17:40:25,909 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):ZooKeeperServer@1255] - maxSessionTimeout set to 40000
2020-03-18 17:40:25,910 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):RequestPathMetricsCollector@113] - zookeeper.pathStats.maxDepth = 6
2020-03-18 17:40:25,910 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):RequestPathMetricsCollector@114] - zookeeper.pathStats.initialDelay = 5
2020-03-18 17:40:25,910 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):RequestPathMetricsCollector@115] - zookeeper.pathStats.delay = 5
2020-03-18 17:40:25,910 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):RequestPathMetricsCollector@116] - zookeeper.pathStats.enabled = false
2020-03-18 17:40:25,910 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):ResponseCache@45] - Response cache size is initialized with value 400.
2020-03-18 17:40:25,910 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):ZooKeeperServer@1470] - The max bytes for all large requests are set to 104857600
2020-03-18 17:40:25,910 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):ResponseCache@45] - Response cache size is initialized with value 400.
2020-03-18 17:40:25,910 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):ZooKeeperServer@1484] - The large request threshold is set to -1
2020-03-18 17:40:25,910 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):RequestPathMetricsCollector@111] - zookeeper.pathStats.slotCapacity = 60
2020-03-18 17:40:25,910 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):ZooKeeperServer@329] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 clientPortListenBacklog -1 datadir /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test9034519182081675840.junit.dir/version-2 snapdir /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test9034519182081675840.junit.dir/version-2
2020-03-18 17:40:25,911 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):RequestPathMetricsCollector@112] - zookeeper.pathStats.slotDuration = 15
2020-03-18 17:40:25,911 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):Follower@75] - FOLLOWING - LEADER ELECTION TOOK - 257 MS
2020-03-18 17:40:25,911 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):RequestPathMetricsCollector@113] - zookeeper.pathStats.maxDepth = 6
2020-03-18 17:40:25,911 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):RequestPathMetricsCollector@114] - zookeeper.pathStats.initialDelay = 5
2020-03-18 17:40:25,911 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):RequestPathMetricsCollector@115] - zookeeper.pathStats.delay = 5
2020-03-18 17:40:25,911 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):RequestPathMetricsCollector@116] - zookeeper.pathStats.enabled = false
2020-03-18 17:40:25,911 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):QuorumPeer@863] - Peer state changed: following - discovery
2020-03-18 17:40:25,911 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):ZooKeeperServer@1470] - The max bytes for all large requests are set to 104857600
2020-03-18 17:40:25,911 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):ZooKeeperServer@1484] - The large request threshold is set to -1
2020-03-18 17:40:25,911 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):ZooKeeperServer@329] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 clientPortListenBacklog -1 datadir /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test7199756213815051992.junit.dir/version-2 snapdir /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test7199756213815051992.junit.dir/version-2
2020-03-18 17:40:25,912 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):Leader@581] - LEADING - LEADER ELECTION TOOK - 207 MS
2020-03-18 17:40:25,912 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):QuorumPeer@863] - Peer state changed: leading - discovery
2020-03-18 17:40:25,912 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):FileTxnSnapLog@470] - Snapshotting: 0x0 to /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test7199756213815051992.junit.dir/version-2/snapshot.0
2020-03-18 17:40:25,912 [myid:] - INFO  [LeaderConnector-/127.0.0.1:13928:Learner$LeaderConnector@328] - Successfully connected to leader, using address: /127.0.0.1:13928
2020-03-18 17:40:25,913 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):ZooKeeperServer@519] - Snapshot taken in 2 ms
2020-03-18 17:40:25,915 [myid:] - INFO  [LearnerHandler-/127.0.0.1:53874:LearnerHandler@504] - Follower sid: 1 : info : 127.0.0.1:13925:13926:participant;127.0.0.1:13924
2020-03-18 17:40:25,917 [myid:] - WARN  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:40:25,917 [myid:] - INFO  [LearnerHandler-/127.0.0.1:53874:ZKDatabase@345] - On disk txn sync enabled with snapshotSizeFactor 0.33
2020-03-18 17:40:25,917 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):QuorumPeer@863] - Peer state changed: following - synchronization
2020-03-18 17:40:25,917 [myid:] - INFO  [LearnerHandler-/127.0.0.1:53874:LearnerHandler@800] - Synchronizing with Learner sid: 1 maxCommittedLog=0x0 minCommittedLog=0x0 lastProcessedZxid=0x0 peerLastZxid=0x0
2020-03-18 17:40:25,917 [myid:] - INFO  [LearnerHandler-/127.0.0.1:53874:LearnerHandler@845] - Sending DIFF zxid=0x0 for peer sid: 1
2020-03-18 17:40:25,918 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):QuorumPeer@863] - Peer state changed: leading - synchronization
2020-03-18 17:40:25,919 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):Learner@509] - Getting a diff from the leader 0x0
2020-03-18 17:40:25,919 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):QuorumPeer@868] - Peer state changed: following - synchronization - diff
2020-03-18 17:40:25,919 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):Learner@675] - Learner received NEWLEADER message
2020-03-18 17:40:25,920 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:40:25,924 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):Leader@1501] - Have quorum of supporters, sids: [[1, 2],[1, 2]]; starting up and setting last processed zxid: 0x100000000
2020-03-18 17:40:25,924 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):CommitProcessor@476] - Configuring CommitProcessor with readBatchSize -1 commitBatchSize 1
2020-03-18 17:40:25,924 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):CommitProcessor@438] - Configuring CommitProcessor with 4 worker threads.
2020-03-18 17:40:25,925 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):ContainerManager@83] - Using checkIntervalMs=60000 maxPerMinute=10000 maxNeverUsedIntervalMs=0
2020-03-18 17:40:25,925 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):QuorumPeer@863] - Peer state changed: leading - broadcast
2020-03-18 17:40:25,925 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):Learner@659] - Learner received UPTODATE message
2020-03-18 17:40:25,925 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):QuorumPeer@868] - Peer state changed: following - synchronization
2020-03-18 17:40:25,925 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):CommitProcessor@476] - Configuring CommitProcessor with readBatchSize -1 commitBatchSize 1
2020-03-18 17:40:25,926 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):CommitProcessor@438] - Configuring CommitProcessor with 4 worker threads.
2020-03-18 17:40:25,927 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):QuorumPeer@863] - Peer state changed: following - broadcast
2020-03-18 17:40:25,956 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13924
2020-03-18 17:40:25,958 [myid:] - INFO  [NIOWorkerThread-2:NIOServerCnxn@507] - Processing stat command from /127.0.0.1:53876
2020-03-18 17:40:25,958 [myid:] - INFO  [NIOWorkerThread-2:StatCommand@52] - Stat command output
2020-03-18 17:40:25,958 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13927
2020-03-18 17:40:25,960 [myid:] - INFO  [NIOWorkerThread-1:NIOServerCnxn@507] - Processing stat command from /127.0.0.1:53877
2020-03-18 17:40:25,960 [myid:] - INFO  [NIOWorkerThread-1:StatCommand@52] - Stat command output
2020-03-18 17:40:25,961 [myid:] - INFO  [main:ZooKeeper@1005] - Initiating client connection, connectString=127.0.0.1:13924 sessionTimeout=30000 watcher=org.apache.zookeeper.test.ClientBase$CountdownWatcher@27d415d9
2020-03-18 17:40:25,961 [myid:] - INFO  [main:ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes
2020-03-18 17:40:25,962 [myid:] - INFO  [main:ClientCnxn@1703] - zookeeper.request.timeout value is 0. feature enabled=false
2020-03-18 17:40:25,965 [myid:127.0.0.1:13924] - INFO  [main-SendThread(127.0.0.1:13924):ClientCnxn$SendThread@1154] - Opening socket connection to server localhost/127.0.0.1:13924.
2020-03-18 17:40:25,965 [myid:127.0.0.1:13924] - INFO  [main-SendThread(127.0.0.1:13924):ClientCnxn$SendThread@1156] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2020-03-18 17:40:25,965 [myid:127.0.0.1:13924] - INFO  [main-SendThread(127.0.0.1:13924):ClientCnxn$SendThread@986] - Socket connection established, initiating session, client: /127.0.0.1:53878, server: localhost/127.0.0.1:13924
2020-03-18 17:40:25,968 [myid:] - INFO  [SyncThread:2:FileTxnLog@284] - Creating new log file: log.100000001
2020-03-18 17:40:25,968 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):Follower@170] - Got zxid 0x100000001 expected 0x1
2020-03-18 17:40:25,968 [myid:] - INFO  [SyncThread:1:FileTxnLog@284] - Creating new log file: log.100000001
2020-03-18 17:40:25,969 [myid:] - INFO  [CommitProcessor:2:LeaderSessionTracker@104] - Committing global session 0x100015e5e090000
2020-03-18 17:40:25,969 [myid:] - INFO  [CommitProcessor:1:LearnerSessionTracker@116] - Committing global session 0x100015e5e090000
2020-03-18 17:40:25,971 [myid:127.0.0.1:13924] - INFO  [main-SendThread(127.0.0.1:13924):ClientCnxn$SendThread@1420] - Session establishment complete on server localhost/127.0.0.1:13924, session id = 0x100015e5e090000, negotiated timeout = 30000
2020-03-18 17:40:25,971 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@109] - zk1 has session id 0x100015e5e090000
2020-03-18 17:40:25,974 [myid:] - INFO  [RequestThrottler:QuorumZooKeeperServer@158] - Submitting global closeSession request for session 0x100015e5e090000
2020-03-18 17:40:26,078 [myid:] - INFO  [main:ZooKeeper@1618] - Session: 0x100015e5e090000 closed
2020-03-18 17:40:26,078 [myid:] - INFO  [main-EventThread:ClientCnxn$EventThread@566] - EventThread shut down for session: 0x100015e5e090000
2020-03-18 17:40:26,079 [myid:] - INFO  [main:QuorumUtil@250] - Shutting down quorum peer QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled)
2020-03-18 17:40:26,080 [myid:] - INFO  [main:Follower@292] - shutdown Follower
2020-03-18 17:40:26,081 [myid:] - ERROR [LearnerHandler-/127.0.0.1:53874:LearnerHandler@707] - Unexpected exception causing shutdown while sock still open
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:96)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:134)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:643)
2020-03-18 17:40:26,081 [myid:] - WARN  [LearnerHandler-/127.0.0.1:53874:LearnerHandler@730] - ******* GOODBYE /127.0.0.1:53874 ********
2020-03-18 17:40:26,081 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):Follower@129] - Exception when following the leader
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:96)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:134)
	at org.apache.zookeeper.server.quorum.Learner.readPacket(Learner.java:182)
	at org.apache.zookeeper.server.quorum.Follower.followLeader(Follower.java:125)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:1455)
2020-03-18 17:40:26,082 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):Follower@143] - Disconnected from leader (with address: /127.0.0.1:13928). Was connected for 169ms. Sync state: true
2020-03-18 17:40:26,082 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):Follower@292] - shutdown Follower
2020-03-18 17:40:26,081 [myid:] - INFO  [main:LearnerZooKeeperServer@160] - Shutting down
2020-03-18 17:40:26,083 [myid:] - INFO  [main:ZooKeeperServer@784] - shutting down
2020-03-18 17:40:26,083 [myid:] - INFO  [main:RequestThrottler@244] - Shutting down
2020-03-18 17:40:26,083 [myid:] - INFO  [RequestThrottler:RequestThrottler@205] - Draining request throttler queue
2020-03-18 17:40:26,084 [myid:] - INFO  [RequestThrottler:RequestThrottler@181] - RequestThrottler shutdown. Dropped 0 requests
2020-03-18 17:40:26,084 [myid:] - INFO  [main:FollowerRequestProcessor@148] - Shutting down
2020-03-18 17:40:26,085 [myid:] - INFO  [FollowerRequestProcessor:1:FollowerRequestProcessor@112] - FollowerRequestProcessor exited loop!
2020-03-18 17:40:26,085 [myid:] - INFO  [main:CommitProcessor@617] - Shutting down
2020-03-18 17:40:26,085 [myid:] - INFO  [CommitProcessor:1:CommitProcessor@406] - CommitProcessor exited loop!
2020-03-18 17:40:26,085 [myid:] - INFO  [main:FinalRequestProcessor@662] - shutdown of request processor complete
2020-03-18 17:40:26,087 [myid:] - INFO  [main:SyncRequestProcessor@256] - Shutting down
2020-03-18 17:40:26,088 [myid:] - INFO  [SyncThread:1:SyncRequestProcessor@225] - SyncRequestProcessor exited!
2020-03-18 17:40:26,089 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):QuorumPeer@863] - Peer state changed: looking
2020-03-18 17:40:26,089 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):QuorumPeer@1501] - PeerState set to LOOKING
2020-03-18 17:40:26,089 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):QuorumPeer@1483] - QuorumPeer main thread exited
2020-03-18 17:40:26,089 [myid:] - INFO  [ConnnectionExpirer:NIOServerCnxnFactory$ConnectionExpirerThread@578] - ConnnectionExpirerThread interrupted
2020-03-18 17:40:26,089 [myid:] - INFO  [NIOServerCxnFactory.SelectorThread-0:NIOServerCnxnFactory$SelectorThread@411] - selector thread exitted run method
2020-03-18 17:40:26,089 [myid:] - INFO  [NIOServerCxnFactory.AcceptThread:/127.0.0.1:13924:NIOServerCnxnFactory$AcceptThread@209] - accept thread exitted run method
2020-03-18 17:40:26,096 [myid:] - INFO  [QuorumPeerListener:QuorumCnxManager$Listener@961] - Leaving listener
2020-03-18 17:40:26,096 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 1, my id = 2
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:40:26,096 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:40:26,096 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:40:26,096 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 2, my id = 1
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:40:26,097 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:40:26,097 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 1 my id = 2
2020-03-18 17:40:26,097 [myid:] - INFO  [main:QuorumUtil@254] - Shutting down leader election QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled)
2020-03-18 17:40:26,097 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 2 my id = 1
2020-03-18 17:40:26,098 [myid:] - INFO  [main:QuorumUtil@259] - Waiting for QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled) to exit thread
2020-03-18 17:40:26,097 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:40:26,098 [myid:] - INFO  [main:QuorumUtil@250] - Shutting down quorum peer QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled)
2020-03-18 17:40:26,098 [myid:] - INFO  [main:Leader@792] - Shutting down
2020-03-18 17:40:26,098 [myid:] - INFO  [main:Leader@798] - Shutdown called. For the reason quorum Peer shutdown
2020-03-18 17:40:26,098 [myid:] - WARN  [LearnerCnxAcceptorHandler-/127.0.0.1:13928:Leader$LearnerCnxAcceptor$LearnerCnxAcceptorHandler@523] - Exception while shutting down acceptor.
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.Leader$LearnerCnxAcceptor$LearnerCnxAcceptorHandler.acceptConnections(Leader.java:510)
	at org.apache.zookeeper.server.quorum.Leader$LearnerCnxAcceptor$LearnerCnxAcceptorHandler.run(Leader.java:493)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2020-03-18 17:40:26,098 [myid:] - INFO  [main:ZooKeeperServer@784] - shutting down
2020-03-18 17:40:26,099 [myid:] - INFO  [main:RequestThrottler@244] - Shutting down
2020-03-18 17:40:26,099 [myid:] - INFO  [RequestThrottler:RequestThrottler@205] - Draining request throttler queue
2020-03-18 17:40:26,099 [myid:] - INFO  [RequestThrottler:RequestThrottler@181] - RequestThrottler shutdown. Dropped 0 requests
2020-03-18 17:40:26,099 [myid:] - INFO  [main:SessionTrackerImpl@247] - Shutting down
2020-03-18 17:40:26,099 [myid:] - INFO  [main:LeaderRequestProcessor@79] - Shutting down
2020-03-18 17:40:26,099 [myid:] - INFO  [main:PrepRequestProcessor@1047] - Shutting down
2020-03-18 17:40:26,100 [myid:] - INFO  [main:ProposalRequestProcessor@87] - Shutting down
2020-03-18 17:40:26,100 [myid:] - INFO  [ProcessThread(sid:2 cport:-1)::PrepRequestProcessor@159] - PrepRequestProcessor exited loop!
2020-03-18 17:40:26,100 [myid:] - INFO  [main:CommitProcessor@617] - Shutting down
2020-03-18 17:40:26,100 [myid:] - INFO  [CommitProcessor:2:CommitProcessor@406] - CommitProcessor exited loop!
2020-03-18 17:40:26,100 [myid:] - INFO  [main:Leader$ToBeAppliedRequestProcessor@1106] - Shutting down
2020-03-18 17:40:26,100 [myid:] - INFO  [main:FinalRequestProcessor@662] - shutdown of request processor complete
2020-03-18 17:40:26,100 [myid:] - INFO  [main:SyncRequestProcessor@256] - Shutting down
2020-03-18 17:40:26,101 [myid:] - INFO  [SyncThread:2:SyncRequestProcessor@225] - SyncRequestProcessor exited!
2020-03-18 17:40:26,102 [myid:] - INFO  [ConnnectionExpirer:NIOServerCnxnFactory$ConnectionExpirerThread@578] - ConnnectionExpirerThread interrupted
2020-03-18 17:40:26,102 [myid:] - INFO  [NIOServerCxnFactory.AcceptThread:/127.0.0.1:13927:NIOServerCnxnFactory$AcceptThread@209] - accept thread exitted run method
2020-03-18 17:40:26,102 [myid:] - INFO  [NIOServerCxnFactory.SelectorThread-0:NIOServerCnxnFactory$SelectorThread@411] - selector thread exitted run method
2020-03-18 17:40:26,102 [myid:] - WARN  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):QuorumPeer@1471] - Unexpected exception
java.lang.InterruptedException
	at java.lang.Object.wait(Native Method)
	at org.apache.zookeeper.server.quorum.Leader.lead(Leader.java:730)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:1468)
2020-03-18 17:40:26,103 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):Leader@792] - Shutting down
2020-03-18 17:40:26,103 [myid:] - INFO  [QuorumPeerListener:QuorumCnxManager$Listener@961] - Leaving listener
2020-03-18 17:40:26,103 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):QuorumPeer@863] - Peer state changed: looking
2020-03-18 17:40:26,103 [myid:] - WARN  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):QuorumPeer@1501] - PeerState set to LOOKING
2020-03-18 17:40:26,103 [myid:] - WARN  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):QuorumPeer@1483] - QuorumPeer main thread exited
2020-03-18 17:40:26,104 [myid:] - INFO  [main:QuorumUtil@254] - Shutting down leader election QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled)
2020-03-18 17:40:26,104 [myid:] - INFO  [main:QuorumUtil@259] - Waiting for QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled) to exit thread
2020-03-18 17:40:26,104 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13924
2020-03-18 17:40:26,104 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13927
2020-03-18 17:40:26,105 [myid:] - INFO  [main:QuorumUtil@204] - Creating QuorumPeer 1; public port 13924
2020-03-18 17:40:26,105 [myid:] - INFO  [main:ServerCnxnFactory@169] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2020-03-18 17:40:26,105 [myid:] - WARN  [main:ServerCnxnFactory@309] - maxCnxns is not configured, using default value 0.
2020-03-18 17:40:26,105 [myid:] - INFO  [main:NIOServerCnxnFactory@666] - Configuring NIO connection handler with 10s sessionless connection timeout, 1 selector thread(s), 8 worker threads, and 64 kB direct buffers.
2020-03-18 17:40:26,105 [myid:] - INFO  [main:NIOServerCnxnFactory@674] - binding to port /127.0.0.1:13924
2020-03-18 17:40:26,106 [myid:] - INFO  [main:FileTxnSnapLog@124] - zookeeper.snapshot.trust.empty : false
2020-03-18 17:40:26,106 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:26,106 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:26,106 [myid:] - INFO  [main:ZKDatabase@132] - zookeeper.snapshotSizeFactor = 0.33
2020-03-18 17:40:26,106 [myid:] - INFO  [main:ZKDatabase@152] - zookeeper.commitLogCount=500
2020-03-18 17:40:26,107 [myid:] - WARN  [main:QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:40:26,107 [myid:] - INFO  [main:FileSnap@85] - Reading snapshot /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test9034519182081675840.junit.dir/version-2/snapshot.0
2020-03-18 17:40:26,107 [myid:] - INFO  [main:DataTree@1737] - The digest value is empty in snapshot
2020-03-18 17:40:26,108 [myid:] - INFO  [main:FileTxnSnapLog@363] - 3 txns loaded in 1 ms
2020-03-18 17:40:26,108 [myid:] - INFO  [main:ZKDatabase@289] - Snapshot loaded in 2 ms, highest zxid is 0x100000003, digest is 5443462131
2020-03-18 17:40:26,110 [myid:] - INFO  [main:QuorumPeer@2503] - Using 6000ms as the quorum cnxn socket timeout
2020-03-18 17:40:26,110 [myid:] - INFO  [main:QuorumCnxManager$Listener@906] - Election port bind maximum retries is 3
2020-03-18 17:40:26,111 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13926:QuorumCnxManager$Listener$ListenerHandler@1047] - My election bind port: /127.0.0.1:13926
2020-03-18 17:40:26,111 [myid:] - INFO  [main:QuorumUtil@204] - Creating QuorumPeer 2; public port 13927
2020-03-18 17:40:26,112 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):QuorumPeer@1371] - LOOKING
2020-03-18 17:40:26,112 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):FastLeaderElection@931] - New election. My id = 1, proposed zxid=0x100000003
2020-03-18 17:40:26,113 [myid:] - INFO  [main:ServerCnxnFactory@169] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2020-03-18 17:40:26,113 [myid:] - WARN  [main:ServerCnxnFactory@309] - maxCnxns is not configured, using default value 0.
2020-03-18 17:40:26,113 [myid:] - INFO  [main:NIOServerCnxnFactory@666] - Configuring NIO connection handler with 10s sessionless connection timeout, 1 selector thread(s), 8 worker threads, and 64 kB direct buffers.
2020-03-18 17:40:26,113 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:1, n.state:LOOKING, n.leader:1, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x100000003, message format version:0x2, n.config version:0x0
2020-03-18 17:40:26,114 [myid:] - INFO  [main:NIOServerCnxnFactory@674] - binding to port /127.0.0.1:13927
2020-03-18 17:40:26,114 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@716] - Cannot open channel to 2 at election address /127.0.0.1:13929
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:677)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:748)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:644)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:503)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:487)
	at java.lang.Thread.run(Thread.java:748)
2020-03-18 17:40:26,114 [myid:] - INFO  [main:FileTxnSnapLog@124] - zookeeper.snapshot.trust.empty : false
2020-03-18 17:40:26,114 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@716] - Cannot open channel to 3 at election address /127.0.0.1:13932
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:677)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:748)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:644)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:503)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:487)
	at java.lang.Thread.run(Thread.java:748)
2020-03-18 17:40:26,115 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:26,115 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:26,115 [myid:] - INFO  [main:ZKDatabase@132] - zookeeper.snapshotSizeFactor = 0.33
2020-03-18 17:40:26,115 [myid:] - INFO  [main:ZKDatabase@152] - zookeeper.commitLogCount=500
2020-03-18 17:40:26,115 [myid:] - WARN  [main:QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:40:26,115 [myid:] - INFO  [main:FileSnap@85] - Reading snapshot /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test7199756213815051992.junit.dir/version-2/snapshot.0
2020-03-18 17:40:26,116 [myid:] - INFO  [main:DataTree@1737] - The digest value is empty in snapshot
2020-03-18 17:40:26,117 [myid:] - INFO  [main:FileTxnSnapLog@363] - 3 txns loaded in 0 ms
2020-03-18 17:40:26,117 [myid:] - INFO  [main:ZKDatabase@289] - Snapshot loaded in 2 ms, highest zxid is 0x100000003, digest is 5443462131
2020-03-18 17:40:26,118 [myid:] - INFO  [main:QuorumPeer@2503] - Using 6000ms as the quorum cnxn socket timeout
2020-03-18 17:40:26,118 [myid:] - INFO  [main:QuorumCnxManager$Listener@906] - Election port bind maximum retries is 3
2020-03-18 17:40:26,119 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13929:QuorumCnxManager$Listener$ListenerHandler@1047] - My election bind port: /127.0.0.1:13929
2020-03-18 17:40:26,119 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13924
2020-03-18 17:40:26,120 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):QuorumPeer@1371] - LOOKING
2020-03-18 17:40:26,120 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):FastLeaderElection@931] - New election. My id = 2, proposed zxid=0x100000003
2020-03-18 17:40:26,121 [myid:] - INFO  [NIOWorkerThread-1:NIOServerCnxn@507] - Processing stat command from /127.0.0.1:53886
2020-03-18 17:40:26,121 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13926:QuorumCnxManager$Listener$ListenerHandler@1052] - Received connection request /127.0.0.1:53887
2020-03-18 17:40:26,122 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:2, n.state:LOOKING, n.leader:2, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x100000003, message format version:0x2, n.config version:0x0
2020-03-18 17:40:26,122 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:2, n.state:LOOKING, n.leader:2, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x100000003, message format version:0x2, n.config version:0x0
2020-03-18 17:40:26,123 [myid:] - WARN  [WorkerSender[myid=2]:QuorumCnxManager@716] - Cannot open channel to 3 at election address /127.0.0.1:13932
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:677)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:748)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:644)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:503)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:487)
	at java.lang.Thread.run(Thread.java:748)
2020-03-18 17:40:26,123 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:1, n.state:LOOKING, n.leader:2, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x100000003, message format version:0x2, n.config version:0x0
2020-03-18 17:40:26,123 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:1, n.state:LOOKING, n.leader:1, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x100000003, message format version:0x2, n.config version:0x0
2020-03-18 17:40:26,123 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:1, n.state:LOOKING, n.leader:2, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x100000003, message format version:0x2, n.config version:0x0
2020-03-18 17:40:26,124 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@716] - Cannot open channel to 3 at election address /127.0.0.1:13932
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:677)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:748)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:644)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:503)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:487)
	at java.lang.Thread.run(Thread.java:748)
2020-03-18 17:40:26,247 [myid:] - INFO  [SessionTracker:SessionTrackerImpl@170] - SessionTrackerImpl exited loop!
2020-03-18 17:40:26,251 [myid:] - INFO  [SessionTracker:SessionTrackerImpl@170] - SessionTrackerImpl exited loop!
2020-03-18 17:40:26,323 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):QuorumPeer@857] - Peer state changed: following
2020-03-18 17:40:26,324 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):QuorumPeer@1453] - FOLLOWING
2020-03-18 17:40:26,324 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):ZooKeeperServer@1246] - minSessionTimeout set to 4000
2020-03-18 17:40:26,324 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):ZooKeeperServer@1255] - maxSessionTimeout set to 40000
2020-03-18 17:40:26,324 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):ResponseCache@45] - Response cache size is initialized with value 400.
2020-03-18 17:40:26,324 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):QuorumPeer@857] - Peer state changed: leading
2020-03-18 17:40:26,324 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):ResponseCache@45] - Response cache size is initialized with value 400.
2020-03-18 17:40:26,324 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):QuorumPeer@1465] - LEADING
2020-03-18 17:40:26,324 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):ZooKeeperServer@1246] - minSessionTimeout set to 4000
2020-03-18 17:40:26,324 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):ZooKeeperServer@1255] - maxSessionTimeout set to 40000
2020-03-18 17:40:26,324 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):RequestPathMetricsCollector@111] - zookeeper.pathStats.slotCapacity = 60
2020-03-18 17:40:26,324 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):ResponseCache@45] - Response cache size is initialized with value 400.
2020-03-18 17:40:26,324 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):RequestPathMetricsCollector@112] - zookeeper.pathStats.slotDuration = 15
2020-03-18 17:40:26,324 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):RequestPathMetricsCollector@113] - zookeeper.pathStats.maxDepth = 6
2020-03-18 17:40:26,324 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):ResponseCache@45] - Response cache size is initialized with value 400.
2020-03-18 17:40:26,324 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):RequestPathMetricsCollector@114] - zookeeper.pathStats.initialDelay = 5
2020-03-18 17:40:26,324 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):RequestPathMetricsCollector@111] - zookeeper.pathStats.slotCapacity = 60
2020-03-18 17:40:26,325 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):RequestPathMetricsCollector@112] - zookeeper.pathStats.slotDuration = 15
2020-03-18 17:40:26,325 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):RequestPathMetricsCollector@115] - zookeeper.pathStats.delay = 5
2020-03-18 17:40:26,325 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):RequestPathMetricsCollector@113] - zookeeper.pathStats.maxDepth = 6
2020-03-18 17:40:26,325 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):RequestPathMetricsCollector@114] - zookeeper.pathStats.initialDelay = 5
2020-03-18 17:40:26,325 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):RequestPathMetricsCollector@115] - zookeeper.pathStats.delay = 5
2020-03-18 17:40:26,325 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):RequestPathMetricsCollector@116] - zookeeper.pathStats.enabled = false
2020-03-18 17:40:26,325 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):RequestPathMetricsCollector@116] - zookeeper.pathStats.enabled = false
2020-03-18 17:40:26,325 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):ZooKeeperServer@1470] - The max bytes for all large requests are set to 104857600
2020-03-18 17:40:26,325 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):ZooKeeperServer@1470] - The max bytes for all large requests are set to 104857600
2020-03-18 17:40:26,325 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):ZooKeeperServer@1484] - The large request threshold is set to -1
2020-03-18 17:40:26,325 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):ZooKeeperServer@1484] - The large request threshold is set to -1
2020-03-18 17:40:26,325 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):ZooKeeperServer@329] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 clientPortListenBacklog -1 datadir /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test9034519182081675840.junit.dir/version-2 snapdir /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test9034519182081675840.junit.dir/version-2
2020-03-18 17:40:26,326 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):ZooKeeperServer@329] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 clientPortListenBacklog -1 datadir /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test7199756213815051992.junit.dir/version-2 snapdir /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test7199756213815051992.junit.dir/version-2
2020-03-18 17:40:26,326 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):Follower@75] - FOLLOWING - LEADER ELECTION TOOK - 213 MS
2020-03-18 17:40:26,326 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):QuorumPeer@863] - Peer state changed: following - discovery
2020-03-18 17:40:26,326 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):Leader@581] - LEADING - LEADER ELECTION TOOK - 206 MS
2020-03-18 17:40:26,327 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):QuorumPeer@863] - Peer state changed: leading - discovery
2020-03-18 17:40:26,327 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):FileTxnSnapLog@470] - Snapshotting: 0x100000003 to /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test7199756213815051992.junit.dir/version-2/snapshot.100000003
2020-03-18 17:40:26,327 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):ZooKeeperServer@519] - Snapshot taken in 1 ms
2020-03-18 17:40:26,328 [myid:] - INFO  [LeaderConnector-/127.0.0.1:13928:Learner$LeaderConnector@328] - Successfully connected to leader, using address: /127.0.0.1:13928
2020-03-18 17:40:26,342 [myid:] - INFO  [LearnerHandler-/127.0.0.1:53895:LearnerHandler@504] - Follower sid: 1 : info : 127.0.0.1:13925:13926:participant;127.0.0.1:13924
2020-03-18 17:40:26,344 [myid:] - WARN  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:40:26,344 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):QuorumPeer@863] - Peer state changed: following - synchronization
2020-03-18 17:40:26,344 [myid:] - INFO  [LearnerHandler-/127.0.0.1:53895:ZKDatabase@345] - On disk txn sync enabled with snapshotSizeFactor 0.33
2020-03-18 17:40:26,345 [myid:] - INFO  [LearnerHandler-/127.0.0.1:53895:LearnerHandler@800] - Synchronizing with Learner sid: 1 maxCommittedLog=0x100000003 minCommittedLog=0x100000001 lastProcessedZxid=0x100000003 peerLastZxid=0x100000003
2020-03-18 17:40:26,345 [myid:] - INFO  [LearnerHandler-/127.0.0.1:53895:LearnerHandler@845] - Sending DIFF zxid=0x100000003 for peer sid: 1
2020-03-18 17:40:26,346 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):QuorumPeer@863] - Peer state changed: leading - synchronization
2020-03-18 17:40:26,346 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):Learner@509] - Getting a diff from the leader 0x100000003
2020-03-18 17:40:26,346 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):QuorumPeer@868] - Peer state changed: following - synchronization - diff
2020-03-18 17:40:26,347 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):Learner@675] - Learner received NEWLEADER message
2020-03-18 17:40:26,348 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:40:26,349 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):Leader@1501] - Have quorum of supporters, sids: [[1, 2],[1, 2]]; starting up and setting last processed zxid: 0x200000000
2020-03-18 17:40:26,349 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):CommitProcessor@476] - Configuring CommitProcessor with readBatchSize -1 commitBatchSize 1
2020-03-18 17:40:26,349 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):CommitProcessor@438] - Configuring CommitProcessor with 4 worker threads.
2020-03-18 17:40:26,350 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):ContainerManager@83] - Using checkIntervalMs=60000 maxPerMinute=10000 maxNeverUsedIntervalMs=0
2020-03-18 17:40:26,350 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):QuorumPeer@863] - Peer state changed: leading - broadcast
2020-03-18 17:40:26,350 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):Learner@659] - Learner received UPTODATE message
2020-03-18 17:40:26,350 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):QuorumPeer@868] - Peer state changed: following - synchronization
2020-03-18 17:40:26,351 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):CommitProcessor@476] - Configuring CommitProcessor with readBatchSize -1 commitBatchSize 1
2020-03-18 17:40:26,351 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):CommitProcessor@438] - Configuring CommitProcessor with 4 worker threads.
2020-03-18 17:40:26,351 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):QuorumPeer@863] - Peer state changed: following - broadcast
2020-03-18 17:40:26,373 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13924
2020-03-18 17:40:26,374 [myid:] - INFO  [NIOWorkerThread-2:NIOServerCnxn@507] - Processing stat command from /127.0.0.1:53897
2020-03-18 17:40:26,375 [myid:] - INFO  [NIOWorkerThread-2:StatCommand@52] - Stat command output
2020-03-18 17:40:26,375 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13927
2020-03-18 17:40:26,376 [myid:] - INFO  [NIOWorkerThread-1:NIOServerCnxn@507] - Processing stat command from /127.0.0.1:53898
2020-03-18 17:40:26,377 [myid:] - INFO  [NIOWorkerThread-1:StatCommand@52] - Stat command output
2020-03-18 17:40:26,378 [myid:] - INFO  [main:QuorumUtil@204] - Creating QuorumPeer 3; public port 13930
2020-03-18 17:40:26,378 [myid:] - INFO  [main:ServerCnxnFactory@169] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2020-03-18 17:40:26,378 [myid:] - WARN  [main:ServerCnxnFactory@309] - maxCnxns is not configured, using default value 0.
2020-03-18 17:40:26,379 [myid:] - INFO  [main:NIOServerCnxnFactory@666] - Configuring NIO connection handler with 10s sessionless connection timeout, 1 selector thread(s), 8 worker threads, and 64 kB direct buffers.
2020-03-18 17:40:26,379 [myid:] - INFO  [main:NIOServerCnxnFactory@674] - binding to port /127.0.0.1:13930
2020-03-18 17:40:26,379 [myid:] - INFO  [main:FileTxnSnapLog@124] - zookeeper.snapshot.trust.empty : false
2020-03-18 17:40:26,380 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:26,380 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:26,381 [myid:] - INFO  [main:ZKDatabase@132] - zookeeper.snapshotSizeFactor = 0.33
2020-03-18 17:40:26,381 [myid:] - INFO  [main:ZKDatabase@152] - zookeeper.commitLogCount=500
2020-03-18 17:40:26,381 [myid:] - WARN  [main:QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:40:26,381 [myid:] - INFO  [main:FileTxnSnapLog@251] - Initialize file found, an empty database will not block voting participation
2020-03-18 17:40:26,382 [myid:] - INFO  [main:FileTxnSnapLog@470] - Snapshotting: 0x0 to /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test7238774770024179298.junit.dir/version-2/snapshot.0
2020-03-18 17:40:26,382 [myid:] - INFO  [main:ZKDatabase@289] - Snapshot loaded in 2 ms, highest zxid is 0x0, digest is 1371985504
2020-03-18 17:40:26,383 [myid:] - INFO  [main:QuorumPeer@1102] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2020-03-18 17:40:26,384 [myid:] - INFO  [main:QuorumPeer@1122] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2020-03-18 17:40:26,386 [myid:] - INFO  [main:QuorumPeer@2503] - Using 6000ms as the quorum cnxn socket timeout
2020-03-18 17:40:26,387 [myid:] - INFO  [main:QuorumCnxManager$Listener@906] - Election port bind maximum retries is 3
2020-03-18 17:40:26,388 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13930
2020-03-18 17:40:26,389 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13930)(secure=disabled):QuorumPeer@1371] - LOOKING
2020-03-18 17:40:26,389 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13932:QuorumCnxManager$Listener$ListenerHandler@1047] - My election bind port: /127.0.0.1:13932
2020-03-18 17:40:26,389 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13930)(secure=disabled):FastLeaderElection@931] - New election. My id = 3, proposed zxid=0x0
2020-03-18 17:40:26,390 [myid:] - INFO  [NIOWorkerThread-1:NIOServerCnxn@507] - Processing stat command from /127.0.0.1:53899
2020-03-18 17:40:26,391 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13926:QuorumCnxManager$Listener$ListenerHandler@1052] - Received connection request /127.0.0.1:53900
2020-03-18 17:40:26,392 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13929:QuorumCnxManager$Listener$ListenerHandler@1052] - Received connection request /127.0.0.1:53901
2020-03-18 17:40:26,393 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:FOLLOWING; n.sid:3, n.state:LOOKING, n.leader:3, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:26,393 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:1, n.state:LOOKING, n.leader:2, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x100000003, message format version:0x2, n.config version:0x0
2020-03-18 17:40:26,393 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:3, n.state:LOOKING, n.leader:3, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:26,393 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:1, n.state:FOLLOWING, n.leader:2, n.round:0x1, n.peerEpoch:0x2, n.zxid:0x100000003, message format version:0x2, n.config version:0x0
2020-03-18 17:40:26,396 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:3, n.state:LOOKING, n.leader:2, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x100000003, message format version:0x2, n.config version:0x0
2020-03-18 17:40:26,397 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:FOLLOWING; n.sid:3, n.state:LOOKING, n.leader:2, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x100000003, message format version:0x2, n.config version:0x0
2020-03-18 17:40:26,397 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:1, n.state:FOLLOWING, n.leader:2, n.round:0x1, n.peerEpoch:0x2, n.zxid:0x100000003, message format version:0x2, n.config version:0x0
2020-03-18 17:40:26,399 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LEADING; n.sid:3, n.state:LOOKING, n.leader:3, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:26,399 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:2, n.state:LOOKING, n.leader:2, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x100000003, message format version:0x2, n.config version:0x0
2020-03-18 17:40:26,400 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LEADING; n.sid:3, n.state:LOOKING, n.leader:2, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x100000003, message format version:0x2, n.config version:0x0
2020-03-18 17:40:26,401 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:2, n.state:LEADING, n.leader:2, n.round:0x1, n.peerEpoch:0x2, n.zxid:0x100000003, message format version:0x2, n.config version:0x0
2020-03-18 17:40:26,401 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13930)(secure=disabled):QuorumPeer@857] - Peer state changed: following
2020-03-18 17:40:26,401 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13930)(secure=disabled):QuorumPeer@1453] - FOLLOWING
2020-03-18 17:40:26,401 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13930)(secure=disabled):ZooKeeperServer@1246] - minSessionTimeout set to 4000
2020-03-18 17:40:26,401 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13930)(secure=disabled):ZooKeeperServer@1255] - maxSessionTimeout set to 40000
2020-03-18 17:40:26,401 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13930)(secure=disabled):ResponseCache@45] - Response cache size is initialized with value 400.
2020-03-18 17:40:26,401 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:FOLLOWING; n.sid:2, n.state:LEADING, n.leader:2, n.round:0x1, n.peerEpoch:0x2, n.zxid:0x100000003, message format version:0x2, n.config version:0x0
2020-03-18 17:40:26,401 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13930)(secure=disabled):ResponseCache@45] - Response cache size is initialized with value 400.
2020-03-18 17:40:26,402 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13930)(secure=disabled):RequestPathMetricsCollector@111] - zookeeper.pathStats.slotCapacity = 60
2020-03-18 17:40:26,402 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13930)(secure=disabled):RequestPathMetricsCollector@112] - zookeeper.pathStats.slotDuration = 15
2020-03-18 17:40:26,402 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13930)(secure=disabled):RequestPathMetricsCollector@113] - zookeeper.pathStats.maxDepth = 6
2020-03-18 17:40:26,402 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13930)(secure=disabled):RequestPathMetricsCollector@114] - zookeeper.pathStats.initialDelay = 5
2020-03-18 17:40:26,402 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13930)(secure=disabled):RequestPathMetricsCollector@115] - zookeeper.pathStats.delay = 5
2020-03-18 17:40:26,402 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13930)(secure=disabled):RequestPathMetricsCollector@116] - zookeeper.pathStats.enabled = false
2020-03-18 17:40:26,402 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13930)(secure=disabled):ZooKeeperServer@1470] - The max bytes for all large requests are set to 104857600
2020-03-18 17:40:26,402 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13930)(secure=disabled):ZooKeeperServer@1484] - The large request threshold is set to -1
2020-03-18 17:40:26,402 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13930)(secure=disabled):ZooKeeperServer@329] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 clientPortListenBacklog -1 datadir /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test7238774770024179298.junit.dir/version-2 snapdir /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test7238774770024179298.junit.dir/version-2
2020-03-18 17:40:26,402 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13930)(secure=disabled):Follower@75] - FOLLOWING - LEADER ELECTION TOOK - 13 MS
2020-03-18 17:40:26,402 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13930)(secure=disabled):QuorumPeer@863] - Peer state changed: following - discovery
2020-03-18 17:40:26,405 [myid:] - INFO  [LeaderConnector-/127.0.0.1:13928:Learner$LeaderConnector@328] - Successfully connected to leader, using address: /127.0.0.1:13928
2020-03-18 17:40:26,410 [myid:] - INFO  [LearnerHandler-/127.0.0.1:53922:LearnerHandler@504] - Follower sid: 3 : info : 127.0.0.1:13931:13932:participant;127.0.0.1:13930
2020-03-18 17:40:26,412 [myid:] - INFO  [LearnerHandler-/127.0.0.1:53922:ZKDatabase@345] - On disk txn sync enabled with snapshotSizeFactor 0.33
2020-03-18 17:40:26,412 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13930)(secure=disabled):QuorumPeer@863] - Peer state changed: following - synchronization
2020-03-18 17:40:26,412 [myid:] - INFO  [LearnerHandler-/127.0.0.1:53922:LearnerHandler@800] - Synchronizing with Learner sid: 3 maxCommittedLog=0x100000003 minCommittedLog=0x100000001 lastProcessedZxid=0x200000000 peerLastZxid=0x0
2020-03-18 17:40:26,414 [myid:] - WARN  [LearnerHandler-/127.0.0.1:53922:ZKDatabase@387] - Unable to find proposals from txnlog for zxid: 0x0
2020-03-18 17:40:26,414 [myid:] - INFO  [LearnerHandler-/127.0.0.1:53922:LearnerHandler@565] - Sending snapshot last zxid of peer is 0x0, zxid of leader is 0x200000000, send zxid of db as 0x200000000, 1 concurrent snapshot sync, snapshot sync was exempt from throttle
2020-03-18 17:40:26,414 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13930)(secure=disabled):QuorumPeer@868] - Peer state changed: following - synchronization - snap
2020-03-18 17:40:26,414 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13930)(secure=disabled):Learner@514] - Getting a snapshot from leader 0x200000000
2020-03-18 17:40:26,414 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13930)(secure=disabled):WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:26,414 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13930)(secure=disabled):WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:26,415 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13930)(secure=disabled):Learner@675] - Learner received NEWLEADER message
2020-03-18 17:40:26,416 [myid:] - WARN  [QuorumPeer[myid=3](plain=127.0.0.1:13930)(secure=disabled):QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:40:26,416 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13930)(secure=disabled):FileTxnSnapLog@470] - Snapshotting: 0x200000000 to /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test7238774770024179298.junit.dir/version-2/snapshot.200000000
2020-03-18 17:40:26,417 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13930)(secure=disabled):ZooKeeperServer@519] - Snapshot taken in 2 ms
2020-03-18 17:40:26,420 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13930)(secure=disabled):Learner@659] - Learner received UPTODATE message
2020-03-18 17:40:26,420 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13930)(secure=disabled):QuorumPeer@868] - Peer state changed: following - synchronization
2020-03-18 17:40:26,421 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13930)(secure=disabled):CommitProcessor@476] - Configuring CommitProcessor with readBatchSize -1 commitBatchSize 1
2020-03-18 17:40:26,421 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13930)(secure=disabled):CommitProcessor@438] - Configuring CommitProcessor with 4 worker threads.
2020-03-18 17:40:26,422 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13930)(secure=disabled):QuorumPeer@863] - Peer state changed: following - broadcast
2020-03-18 17:40:26,643 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13930
2020-03-18 17:40:26,644 [myid:] - INFO  [NIOWorkerThread-2:NIOServerCnxn@507] - Processing stat command from /127.0.0.1:53932
2020-03-18 17:40:26,644 [myid:] - INFO  [NIOWorkerThread-2:StatCommand@52] - Stat command output
2020-03-18 17:40:26,645 [myid:] - INFO  [main:ZooKeeper@1005] - Initiating client connection, connectString=127.0.0.1:13924 sessionTimeout=30000 watcher=org.apache.zookeeper.test.ClientBase$CountdownWatcher@27d415d9
2020-03-18 17:40:26,645 [myid:] - INFO  [main:ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes
2020-03-18 17:40:26,645 [myid:] - INFO  [main:ClientCnxn@1703] - zookeeper.request.timeout value is 0. feature enabled=false
2020-03-18 17:40:26,647 [myid:127.0.0.1:13924] - INFO  [main-SendThread(127.0.0.1:13924):ClientCnxn$SendThread@1154] - Opening socket connection to server localhost/127.0.0.1:13924.
2020-03-18 17:40:26,647 [myid:127.0.0.1:13924] - INFO  [main-SendThread(127.0.0.1:13924):ClientCnxn$SendThread@1156] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2020-03-18 17:40:26,648 [myid:127.0.0.1:13924] - INFO  [main-SendThread(127.0.0.1:13924):ClientCnxn$SendThread@986] - Socket connection established, initiating session, client: /127.0.0.1:53933, server: localhost/127.0.0.1:13924
2020-03-18 17:40:26,650 [myid:] - INFO  [SyncThread:2:FileTxnLog@284] - Creating new log file: log.200000001
2020-03-18 17:40:26,651 [myid:] - WARN  [QuorumPeer[myid=3](plain=127.0.0.1:13930)(secure=disabled):Follower@170] - Got zxid 0x200000001 expected 0x1
2020-03-18 17:40:26,650 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):Follower@170] - Got zxid 0x200000001 expected 0x1
2020-03-18 17:40:26,651 [myid:] - INFO  [SyncThread:3:FileTxnLog@284] - Creating new log file: log.200000001
2020-03-18 17:40:26,651 [myid:] - INFO  [SyncThread:1:FileTxnLog@284] - Creating new log file: log.200000001
2020-03-18 17:40:26,652 [myid:] - INFO  [CommitProcessor:2:LeaderSessionTracker@104] - Committing global session 0x100015e5fb50000
2020-03-18 17:40:26,652 [myid:] - INFO  [CommitProcessor:3:LearnerSessionTracker@116] - Committing global session 0x100015e5fb50000
2020-03-18 17:40:26,652 [myid:] - INFO  [CommitProcessor:1:LearnerSessionTracker@116] - Committing global session 0x100015e5fb50000
2020-03-18 17:40:26,653 [myid:127.0.0.1:13924] - INFO  [main-SendThread(127.0.0.1:13924):ClientCnxn$SendThread@1420] - Session establishment complete on server localhost/127.0.0.1:13924, session id = 0x100015e5fb50000, negotiated timeout = 30000
2020-03-18 17:40:26,653 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@139] - zk1 has session id 0x100015e5fb50000
2020-03-18 17:40:26,657 [myid:] - INFO  [main:ZooKeeper@1005] - Initiating client connection, connectString=127.0.0.1:13927 sessionTimeout=30000 watcher=org.apache.zookeeper.test.ClientBase$CountdownWatcher@5fdba6f9
2020-03-18 17:40:26,657 [myid:] - INFO  [main:ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes
2020-03-18 17:40:26,657 [myid:] - INFO  [main:ClientCnxn@1703] - zookeeper.request.timeout value is 0. feature enabled=false
2020-03-18 17:40:26,659 [myid:127.0.0.1:13927] - INFO  [main-SendThread(127.0.0.1:13927):ClientCnxn$SendThread@1154] - Opening socket connection to server localhost/127.0.0.1:13927.
2020-03-18 17:40:26,659 [myid:127.0.0.1:13927] - INFO  [main-SendThread(127.0.0.1:13927):ClientCnxn$SendThread@1156] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2020-03-18 17:40:26,659 [myid:127.0.0.1:13927] - INFO  [main-SendThread(127.0.0.1:13927):ClientCnxn$SendThread@986] - Socket connection established, initiating session, client: /127.0.0.1:53934, server: localhost/127.0.0.1:13927
2020-03-18 17:40:26,660 [myid:] - INFO  [CommitProcessor:2:LeaderSessionTracker@104] - Committing global session 0x200015e5fb60000
2020-03-18 17:40:26,660 [myid:] - INFO  [CommitProcessor:1:LearnerSessionTracker@116] - Committing global session 0x200015e5fb60000
2020-03-18 17:40:26,660 [myid:] - INFO  [CommitProcessor:3:LearnerSessionTracker@116] - Committing global session 0x200015e5fb60000
2020-03-18 17:40:26,661 [myid:127.0.0.1:13927] - INFO  [main-SendThread(127.0.0.1:13927):ClientCnxn$SendThread@1420] - Session establishment complete on server localhost/127.0.0.1:13927, session id = 0x200015e5fb60000, negotiated timeout = 30000
2020-03-18 17:40:26,661 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@144] - zk2 has session id 0x200015e5fb60000
2020-03-18 17:40:26,663 [myid:] - INFO  [main:ZooKeeper@1005] - Initiating client connection, connectString=127.0.0.1:13930 sessionTimeout=30000 watcher=org.apache.zookeeper.test.ClientBase$CountdownWatcher@fe18270
2020-03-18 17:40:26,664 [myid:] - INFO  [main:ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes
2020-03-18 17:40:26,664 [myid:] - INFO  [main:ClientCnxn@1703] - zookeeper.request.timeout value is 0. feature enabled=false
2020-03-18 17:40:26,677 [myid:127.0.0.1:13930] - INFO  [main-SendThread(127.0.0.1:13930):ClientCnxn$SendThread@1154] - Opening socket connection to server localhost/127.0.0.1:13930.
2020-03-18 17:40:26,677 [myid:127.0.0.1:13930] - INFO  [main-SendThread(127.0.0.1:13930):ClientCnxn$SendThread@1156] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2020-03-18 17:40:26,678 [myid:127.0.0.1:13930] - INFO  [main-SendThread(127.0.0.1:13930):ClientCnxn$SendThread@986] - Socket connection established, initiating session, client: /127.0.0.1:53935, server: localhost/127.0.0.1:13930
2020-03-18 17:40:26,680 [myid:] - INFO  [CommitProcessor:1:LearnerSessionTracker@116] - Committing global session 0x300015e5ff90000
2020-03-18 17:40:26,680 [myid:] - INFO  [CommitProcessor:2:LeaderSessionTracker@104] - Committing global session 0x300015e5ff90000
2020-03-18 17:40:26,680 [myid:] - INFO  [CommitProcessor:3:LearnerSessionTracker@116] - Committing global session 0x300015e5ff90000
2020-03-18 17:40:26,681 [myid:127.0.0.1:13930] - INFO  [main-SendThread(127.0.0.1:13930):ClientCnxn$SendThread@1420] - Session establishment complete on server localhost/127.0.0.1:13930, session id = 0x300015e5ff90000, negotiated timeout = 30000
2020-03-18 17:40:26,681 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@149] - zk3 has session id 0x300015e5ff90000
2020-03-18 17:40:26,683 [myid:] - INFO  [RequestThrottler:QuorumZooKeeperServer@158] - Submitting global closeSession request for session 0x100015e5fb50000
2020-03-18 17:40:26,788 [myid:] - INFO  [main:ZooKeeper@1618] - Session: 0x100015e5fb50000 closed
2020-03-18 17:40:26,788 [myid:] - INFO  [main-EventThread:ClientCnxn$EventThread@566] - EventThread shut down for session: 0x100015e5fb50000
2020-03-18 17:40:26,789 [myid:] - INFO  [RequestThrottler:QuorumZooKeeperServer@158] - Submitting global closeSession request for session 0x200015e5fb60000
2020-03-18 17:40:26,795 [myid:127.0.0.1:13927] - WARN  [main-SendThread(127.0.0.1:13927):ClientCnxn$SendThread@1266] - An exception was thrown while closing send thread for session 0x200015e5fb60000.
EndOfStreamException: Unable to read additional data from server sessionid 0x200015e5fb60000, likely server has closed socket
	at org.apache.zookeeper.ClientCnxnSocketNIO.doIO(ClientCnxnSocketNIO.java:75)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:348)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1262)
2020-03-18 17:40:26,900 [myid:] - INFO  [main-EventThread:ClientCnxn$EventThread@566] - EventThread shut down for session: 0x200015e5fb60000
2020-03-18 17:40:26,900 [myid:] - INFO  [main:ZooKeeper@1618] - Session: 0x200015e5fb60000 closed
2020-03-18 17:40:26,901 [myid:] - INFO  [RequestThrottler:QuorumZooKeeperServer@158] - Submitting global closeSession request for session 0x300015e5ff90000
2020-03-18 17:40:27,004 [myid:] - INFO  [main:ZooKeeper@1618] - Session: 0x300015e5ff90000 closed
2020-03-18 17:40:27,004 [myid:] - INFO  [main-EventThread:ClientCnxn$EventThread@566] - EventThread shut down for session: 0x300015e5ff90000
2020-03-18 17:40:27,004 [myid:] - INFO  [main:QuorumUtil@250] - Shutting down quorum peer QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled)
2020-03-18 17:40:27,005 [myid:] - INFO  [main:Follower@292] - shutdown Follower
2020-03-18 17:40:27,005 [myid:] - INFO  [main:LearnerZooKeeperServer@160] - Shutting down
2020-03-18 17:40:27,005 [myid:] - INFO  [main:ZooKeeperServer@784] - shutting down
2020-03-18 17:40:27,005 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):Follower@129] - Exception when following the leader
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:96)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:134)
	at org.apache.zookeeper.server.quorum.Learner.readPacket(Learner.java:182)
	at org.apache.zookeeper.server.quorum.Follower.followLeader(Follower.java:125)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:1455)
2020-03-18 17:40:27,005 [myid:] - ERROR [LearnerHandler-/127.0.0.1:53895:LearnerHandler@707] - Unexpected exception causing shutdown while sock still open
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:96)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:134)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:643)
2020-03-18 17:40:27,005 [myid:] - INFO  [main:RequestThrottler@244] - Shutting down
2020-03-18 17:40:27,006 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):Follower@143] - Disconnected from leader (with address: /127.0.0.1:13928). Was connected for 665ms. Sync state: true
2020-03-18 17:40:27,006 [myid:] - WARN  [LearnerHandler-/127.0.0.1:53895:LearnerHandler@730] - ******* GOODBYE /127.0.0.1:53895 ********
2020-03-18 17:40:27,006 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):Follower@292] - shutdown Follower
2020-03-18 17:40:27,006 [myid:] - INFO  [RequestThrottler:RequestThrottler@205] - Draining request throttler queue
2020-03-18 17:40:27,006 [myid:] - INFO  [RequestThrottler:RequestThrottler@181] - RequestThrottler shutdown. Dropped 0 requests
2020-03-18 17:40:27,006 [myid:] - INFO  [main:FollowerRequestProcessor@148] - Shutting down
2020-03-18 17:40:27,007 [myid:] - INFO  [main:CommitProcessor@617] - Shutting down
2020-03-18 17:40:27,007 [myid:] - INFO  [FollowerRequestProcessor:1:FollowerRequestProcessor@112] - FollowerRequestProcessor exited loop!
2020-03-18 17:40:27,007 [myid:] - INFO  [CommitProcessor:1:CommitProcessor@406] - CommitProcessor exited loop!
2020-03-18 17:40:27,007 [myid:] - INFO  [main:FinalRequestProcessor@662] - shutdown of request processor complete
2020-03-18 17:40:27,008 [myid:] - INFO  [main:SyncRequestProcessor@256] - Shutting down
2020-03-18 17:40:27,008 [myid:] - INFO  [SyncThread:1:SyncRequestProcessor@225] - SyncRequestProcessor exited!
2020-03-18 17:40:27,008 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):QuorumPeer@863] - Peer state changed: looking
2020-03-18 17:40:27,008 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):QuorumPeer@1501] - PeerState set to LOOKING
2020-03-18 17:40:27,008 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled):QuorumPeer@1483] - QuorumPeer main thread exited
2020-03-18 17:40:27,008 [myid:] - INFO  [NIOServerCxnFactory.AcceptThread:/127.0.0.1:13924:NIOServerCnxnFactory$AcceptThread@209] - accept thread exitted run method
2020-03-18 17:40:27,008 [myid:] - INFO  [ConnnectionExpirer:NIOServerCnxnFactory$ConnectionExpirerThread@578] - ConnnectionExpirerThread interrupted
2020-03-18 17:40:27,008 [myid:] - INFO  [NIOServerCxnFactory.SelectorThread-0:NIOServerCnxnFactory$SelectorThread@411] - selector thread exitted run method
2020-03-18 17:40:27,009 [myid:] - INFO  [QuorumPeerListener:QuorumCnxManager$Listener@961] - Leaving listener
2020-03-18 17:40:27,010 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 1, my id = 2
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:40:27,010 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:40:27,010 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 2, my id = 1
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:40:27,011 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:40:27,011 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 1, my id = 3
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:40:27,012 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:40:27,011 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:40:27,012 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 1 my id = 2
2020-03-18 17:40:27,010 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:40:27,012 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:40:27,013 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 1 my id = 3
2020-03-18 17:40:27,012 [myid:] - INFO  [main:QuorumUtil@254] - Shutting down leader election QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled)
2020-03-18 17:40:27,014 [myid:] - INFO  [main:QuorumUtil@259] - Waiting for QuorumPeer[myid=1](plain=127.0.0.1:13924)(secure=disabled) to exit thread
2020-03-18 17:40:27,014 [myid:] - INFO  [main:QuorumUtil@250] - Shutting down quorum peer QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled)
2020-03-18 17:40:27,014 [myid:] - INFO  [main:Leader@792] - Shutting down
2020-03-18 17:40:27,014 [myid:] - INFO  [main:Leader@798] - Shutdown called. For the reason quorum Peer shutdown
2020-03-18 17:40:27,011 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:40:27,015 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 3 my id = 1
2020-03-18 17:40:27,011 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 3, my id = 1
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:40:27,016 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:40:27,015 [myid:] - INFO  [main:ZooKeeperServer@784] - shutting down
2020-03-18 17:40:27,015 [myid:] - WARN  [LearnerCnxAcceptorHandler-/127.0.0.1:13928:Leader$LearnerCnxAcceptor$LearnerCnxAcceptorHandler@523] - Exception while shutting down acceptor.
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.Leader$LearnerCnxAcceptor$LearnerCnxAcceptorHandler.acceptConnections(Leader.java:510)
	at org.apache.zookeeper.server.quorum.Leader$LearnerCnxAcceptor$LearnerCnxAcceptorHandler.run(Leader.java:493)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2020-03-18 17:40:27,013 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 2 my id = 1
2020-03-18 17:40:27,016 [myid:] - INFO  [main:RequestThrottler@244] - Shutting down
2020-03-18 17:40:27,017 [myid:] - INFO  [RequestThrottler:RequestThrottler@205] - Draining request throttler queue
2020-03-18 17:40:27,017 [myid:] - INFO  [RequestThrottler:RequestThrottler@181] - RequestThrottler shutdown. Dropped 0 requests
2020-03-18 17:40:27,017 [myid:] - INFO  [main:SessionTrackerImpl@247] - Shutting down
2020-03-18 17:40:27,017 [myid:] - INFO  [main:LeaderRequestProcessor@79] - Shutting down
2020-03-18 17:40:27,017 [myid:] - INFO  [main:PrepRequestProcessor@1047] - Shutting down
2020-03-18 17:40:27,018 [myid:] - INFO  [main:ProposalRequestProcessor@87] - Shutting down
2020-03-18 17:40:27,018 [myid:] - INFO  [main:CommitProcessor@617] - Shutting down
2020-03-18 17:40:27,018 [myid:] - INFO  [ProcessThread(sid:2 cport:-1)::PrepRequestProcessor@159] - PrepRequestProcessor exited loop!
2020-03-18 17:40:27,018 [myid:] - INFO  [CommitProcessor:2:CommitProcessor@406] - CommitProcessor exited loop!
2020-03-18 17:40:27,018 [myid:] - INFO  [main:Leader$ToBeAppliedRequestProcessor@1106] - Shutting down
2020-03-18 17:40:27,018 [myid:] - INFO  [main:FinalRequestProcessor@662] - shutdown of request processor complete
2020-03-18 17:40:27,018 [myid:] - INFO  [main:SyncRequestProcessor@256] - Shutting down
2020-03-18 17:40:27,019 [myid:] - INFO  [SyncThread:2:SyncRequestProcessor@225] - SyncRequestProcessor exited!
2020-03-18 17:40:27,020 [myid:] - WARN  [QuorumPeer[myid=3](plain=127.0.0.1:13930)(secure=disabled):Follower@129] - Exception when following the leader
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:96)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:134)
	at org.apache.zookeeper.server.quorum.Learner.readPacket(Learner.java:182)
	at org.apache.zookeeper.server.quorum.Follower.followLeader(Follower.java:125)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:1455)
2020-03-18 17:40:27,020 [myid:] - INFO  [ConnnectionExpirer:NIOServerCnxnFactory$ConnectionExpirerThread@578] - ConnnectionExpirerThread interrupted
2020-03-18 17:40:27,020 [myid:] - WARN  [LearnerHandler-/127.0.0.1:53922:LearnerHandler@730] - ******* GOODBYE /127.0.0.1:53922 ********
2020-03-18 17:40:27,020 [myid:] - WARN  [LearnerHandler-/127.0.0.1:53922:LearnerHandler@1044] - Ignoring unexpected exception
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireInterruptibly(AbstractQueuedSynchronizer.java:1220)
	at java.util.concurrent.locks.ReentrantLock.lockInterruptibly(ReentrantLock.java:335)
	at java.util.concurrent.LinkedBlockingQueue.put(LinkedBlockingQueue.java:339)
	at org.apache.zookeeper.server.quorum.LearnerHandler.shutdown(LearnerHandler.java:1042)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:732)
2020-03-18 17:40:27,020 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13930)(secure=disabled):Follower@143] - Disconnected from leader (with address: /127.0.0.1:13928). Was connected for 610ms. Sync state: true
2020-03-18 17:40:27,021 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13930)(secure=disabled):Follower@292] - shutdown Follower
2020-03-18 17:40:27,021 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13930)(secure=disabled):LearnerZooKeeperServer@160] - Shutting down
2020-03-18 17:40:27,021 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13930)(secure=disabled):ZooKeeperServer@784] - shutting down
2020-03-18 17:40:27,020 [myid:] - INFO  [NIOServerCxnFactory.SelectorThread-0:NIOServerCnxnFactory$SelectorThread@411] - selector thread exitted run method
2020-03-18 17:40:27,021 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13930)(secure=disabled):RequestThrottler@244] - Shutting down
2020-03-18 17:40:27,020 [myid:] - INFO  [NIOServerCxnFactory.AcceptThread:/127.0.0.1:13927:NIOServerCnxnFactory$AcceptThread@209] - accept thread exitted run method
2020-03-18 17:40:27,021 [myid:] - INFO  [RequestThrottler:RequestThrottler@205] - Draining request throttler queue
2020-03-18 17:40:27,021 [myid:] - INFO  [RequestThrottler:RequestThrottler@181] - RequestThrottler shutdown. Dropped 0 requests
2020-03-18 17:40:27,021 [myid:] - WARN  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):QuorumPeer@1471] - Unexpected exception
java.lang.InterruptedException
	at java.lang.Object.wait(Native Method)
	at org.apache.zookeeper.server.quorum.Leader.lead(Leader.java:730)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:1468)
2020-03-18 17:40:27,021 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):Leader@792] - Shutting down
2020-03-18 17:40:27,021 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13930)(secure=disabled):FollowerRequestProcessor@148] - Shutting down
2020-03-18 17:40:27,021 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):QuorumPeer@863] - Peer state changed: looking
2020-03-18 17:40:27,022 [myid:] - WARN  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):QuorumPeer@1501] - PeerState set to LOOKING
2020-03-18 17:40:27,022 [myid:] - WARN  [QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled):QuorumPeer@1483] - QuorumPeer main thread exited
2020-03-18 17:40:27,021 [myid:] - INFO  [QuorumPeerListener:QuorumCnxManager$Listener@961] - Leaving listener
2020-03-18 17:40:27,022 [myid:] - INFO  [FollowerRequestProcessor:3:FollowerRequestProcessor@112] - FollowerRequestProcessor exited loop!
2020-03-18 17:40:27,022 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13930)(secure=disabled):CommitProcessor@617] - Shutting down
2020-03-18 17:40:27,022 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:40:27,023 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 3 my id = 2
2020-03-18 17:40:27,022 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 2, my id = 3
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:40:27,023 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:40:27,023 [myid:] - INFO  [main:QuorumUtil@254] - Shutting down leader election QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled)
2020-03-18 17:40:27,023 [myid:] - INFO  [main:QuorumUtil@259] - Waiting for QuorumPeer[myid=2](plain=127.0.0.1:13927)(secure=disabled) to exit thread
2020-03-18 17:40:27,022 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13930)(secure=disabled):FinalRequestProcessor@662] - shutdown of request processor complete
2020-03-18 17:40:27,022 [myid:] - INFO  [CommitProcessor:3:CommitProcessor@406] - CommitProcessor exited loop!
2020-03-18 17:40:27,022 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 3, my id = 2
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:40:27,024 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:40:27,023 [myid:] - INFO  [main:QuorumUtil@250] - Shutting down quorum peer QuorumPeer[myid=3](plain=127.0.0.1:13930)(secure=disabled)
2020-03-18 17:40:27,024 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13930)(secure=disabled):SyncRequestProcessor@256] - Shutting down
2020-03-18 17:40:27,023 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:40:27,024 [myid:] - INFO  [SyncThread:3:SyncRequestProcessor@225] - SyncRequestProcessor exited!
2020-03-18 17:40:27,024 [myid:] - INFO  [main:Follower@292] - shutdown Follower
2020-03-18 17:40:27,024 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13930)(secure=disabled):QuorumPeer@863] - Peer state changed: looking
2020-03-18 17:40:27,025 [myid:] - WARN  [QuorumPeer[myid=3](plain=127.0.0.1:13930)(secure=disabled):QuorumPeer@1501] - PeerState set to LOOKING
2020-03-18 17:40:27,025 [myid:] - WARN  [QuorumPeer[myid=3](plain=127.0.0.1:13930)(secure=disabled):QuorumPeer@1483] - QuorumPeer main thread exited
2020-03-18 17:40:27,025 [myid:] - INFO  [ConnnectionExpirer:NIOServerCnxnFactory$ConnectionExpirerThread@578] - ConnnectionExpirerThread interrupted
2020-03-18 17:40:27,024 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 2 my id = 3
2020-03-18 17:40:27,025 [myid:] - INFO  [NIOServerCxnFactory.AcceptThread:/127.0.0.1:13930:NIOServerCnxnFactory$AcceptThread@209] - accept thread exitted run method
2020-03-18 17:40:27,026 [myid:] - INFO  [NIOServerCxnFactory.SelectorThread-0:NIOServerCnxnFactory$SelectorThread@411] - selector thread exitted run method
2020-03-18 17:40:27,026 [myid:] - INFO  [QuorumPeerListener:QuorumCnxManager$Listener@961] - Leaving listener
2020-03-18 17:40:27,027 [myid:] - INFO  [main:QuorumUtil@254] - Shutting down leader election QuorumPeer[myid=3](plain=127.0.0.1:13930)(secure=disabled)
2020-03-18 17:40:27,027 [myid:] - INFO  [main:QuorumUtil@259] - Waiting for QuorumPeer[myid=3](plain=127.0.0.1:13930)(secure=disabled) to exit thread
2020-03-18 17:40:27,027 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13924
2020-03-18 17:40:27,027 [myid:] - INFO  [main:QuorumUtil@243] - 127.0.0.1:13924 is no longer accepting client connections
2020-03-18 17:40:27,028 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13927
2020-03-18 17:40:27,028 [myid:] - INFO  [main:QuorumUtil@243] - 127.0.0.1:13927 is no longer accepting client connections
2020-03-18 17:40:27,028 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13930
2020-03-18 17:40:27,028 [myid:] - INFO  [main:QuorumUtil@243] - 127.0.0.1:13930 is no longer accepting client connections
2020-03-18 17:40:27,028 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@89] - Memory used 124588
2020-03-18 17:40:27,028 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@94] - Number of threads 45
2020-03-18 17:40:27,028 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@109] - FINISHED TEST METHOD testLaggingFollowerResyncsUnderNewEpoch
2020-03-18 17:40:27,028 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@76] - Error count 0
2020-03-18 17:40:27,028 [myid:] - INFO  [main:ZKTestCase$1@96] - SUCCEEDED testLaggingFollowerResyncsUnderNewEpoch
2020-03-18 17:40:27,028 [myid:] - INFO  [main:ZKTestCase$1@91] - FINISHED testLaggingFollowerResyncsUnderNewEpoch
2020-03-18 17:40:27,029 [myid:] - INFO  [main:ZKTestCase$1@86] - STARTING testResyncByDiffAfterFollowerCrashes
2020-03-18 17:40:27,029 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@84] - RUNNING TEST METHOD testResyncByDiffAfterFollowerCrashes
2020-03-18 17:40:27,030 [myid:] - INFO  [main:JMXEnv@58] - connecting to addr service:jmx:rmi://127.0.0.1/stub/rO0ABXNyAC5qYXZheC5tYW5hZ2VtZW50LnJlbW90ZS5ybWkuUk1JU2VydmVySW1wbF9TdHViAAAAAAAAAAICAAB4cgAaamF2YS5ybWkuc2VydmVyLlJlbW90ZVN0dWLp/tzJi+FlGgIAAHhyABxqYXZhLnJtaS5zZXJ2ZXIuUmVtb3RlT2JqZWN002G0kQxhMx4DAAB4cHc3AAtVbmljYXN0UmVmMgAADDE3Mi4xOC4xNC4zNAAAypvD8f2luuUI7uf4H6IAAAFw7QNGc4ARAHg=
2020-03-18 17:40:27,038 [myid:] - INFO  [main:PortAssignment@87] - Assigned port 13933 from range 13914 - 16606.
2020-03-18 17:40:27,038 [myid:] - INFO  [main:PortAssignment@87] - Assigned port 13934 from range 13914 - 16606.
2020-03-18 17:40:27,039 [myid:] - INFO  [main:PortAssignment@87] - Assigned port 13935 from range 13914 - 16606.
2020-03-18 17:40:27,039 [myid:] - INFO  [main:PortAssignment@87] - Assigned port 13936 from range 13914 - 16606.
2020-03-18 17:40:27,040 [myid:] - INFO  [main:PortAssignment@87] - Assigned port 13937 from range 13914 - 16606.
2020-03-18 17:40:27,040 [myid:] - INFO  [main:PortAssignment@87] - Assigned port 13938 from range 13914 - 16606.
2020-03-18 17:40:27,041 [myid:] - INFO  [main:PortAssignment@87] - Assigned port 13939 from range 13914 - 16606.
2020-03-18 17:40:27,041 [myid:] - INFO  [main:PortAssignment@87] - Assigned port 13940 from range 13914 - 16606.
2020-03-18 17:40:27,041 [myid:] - INFO  [main:PortAssignment@87] - Assigned port 13941 from range 13914 - 16606.
2020-03-18 17:40:27,041 [myid:] - INFO  [main:QuorumUtil@118] - Creating QuorumPeer 1; public port 13933
2020-03-18 17:40:27,041 [myid:] - INFO  [main:ServerCnxnFactory@169] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2020-03-18 17:40:27,042 [myid:] - WARN  [main:ServerCnxnFactory@309] - maxCnxns is not configured, using default value 0.
2020-03-18 17:40:27,042 [myid:] - INFO  [main:NIOServerCnxnFactory@666] - Configuring NIO connection handler with 10s sessionless connection timeout, 1 selector thread(s), 8 worker threads, and 64 kB direct buffers.
2020-03-18 17:40:27,042 [myid:] - INFO  [main:NIOServerCnxnFactory@674] - binding to port /127.0.0.1:13933
2020-03-18 17:40:27,042 [myid:] - INFO  [main:FileTxnSnapLog@124] - zookeeper.snapshot.trust.empty : false
2020-03-18 17:40:27,043 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:27,043 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:27,043 [myid:] - INFO  [main:ZKDatabase@132] - zookeeper.snapshotSizeFactor = 0.33
2020-03-18 17:40:27,043 [myid:] - INFO  [main:ZKDatabase@152] - zookeeper.commitLogCount=500
2020-03-18 17:40:27,044 [myid:] - WARN  [main:QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:40:27,044 [myid:] - INFO  [main:QuorumUtil@118] - Creating QuorumPeer 2; public port 13936
2020-03-18 17:40:27,044 [myid:] - INFO  [main:ServerCnxnFactory@169] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2020-03-18 17:40:27,044 [myid:] - WARN  [main:ServerCnxnFactory@309] - maxCnxns is not configured, using default value 0.
2020-03-18 17:40:27,044 [myid:] - INFO  [main:NIOServerCnxnFactory@666] - Configuring NIO connection handler with 10s sessionless connection timeout, 1 selector thread(s), 8 worker threads, and 64 kB direct buffers.
2020-03-18 17:40:27,044 [myid:] - INFO  [main:NIOServerCnxnFactory@674] - binding to port /127.0.0.1:13936
2020-03-18 17:40:27,044 [myid:] - INFO  [main:FileTxnSnapLog@124] - zookeeper.snapshot.trust.empty : false
2020-03-18 17:40:27,045 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:27,045 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:27,045 [myid:] - INFO  [main:ZKDatabase@132] - zookeeper.snapshotSizeFactor = 0.33
2020-03-18 17:40:27,045 [myid:] - INFO  [main:ZKDatabase@152] - zookeeper.commitLogCount=500
2020-03-18 17:40:27,046 [myid:] - WARN  [main:QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:40:27,046 [myid:] - INFO  [main:QuorumUtil@118] - Creating QuorumPeer 3; public port 13939
2020-03-18 17:40:27,046 [myid:] - INFO  [main:ServerCnxnFactory@169] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2020-03-18 17:40:27,046 [myid:] - WARN  [main:ServerCnxnFactory@309] - maxCnxns is not configured, using default value 0.
2020-03-18 17:40:27,046 [myid:] - INFO  [main:NIOServerCnxnFactory@666] - Configuring NIO connection handler with 10s sessionless connection timeout, 1 selector thread(s), 8 worker threads, and 64 kB direct buffers.
2020-03-18 17:40:27,046 [myid:] - INFO  [main:NIOServerCnxnFactory@674] - binding to port /127.0.0.1:13939
2020-03-18 17:40:27,046 [myid:] - INFO  [main:FileTxnSnapLog@124] - zookeeper.snapshot.trust.empty : false
2020-03-18 17:40:27,047 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:27,047 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:27,047 [myid:] - INFO  [main:ZKDatabase@132] - zookeeper.snapshotSizeFactor = 0.33
2020-03-18 17:40:27,047 [myid:] - INFO  [main:ZKDatabase@152] - zookeeper.commitLogCount=500
2020-03-18 17:40:27,047 [myid:] - WARN  [main:QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:40:27,048 [myid:] - INFO  [main:QuorumUtil@250] - Shutting down quorum peer QuorumPeer
2020-03-18 17:40:27,048 [myid:] - INFO  [main:QuorumUtil@257] - No election available to shutdown QuorumPeer
2020-03-18 17:40:27,048 [myid:] - INFO  [main:QuorumUtil@259] - Waiting for QuorumPeer to exit thread
2020-03-18 17:40:27,048 [myid:] - INFO  [main:QuorumUtil@250] - Shutting down quorum peer QuorumPeer
2020-03-18 17:40:27,048 [myid:] - INFO  [main:QuorumUtil@257] - No election available to shutdown QuorumPeer
2020-03-18 17:40:27,048 [myid:] - INFO  [main:QuorumUtil@259] - Waiting for QuorumPeer to exit thread
2020-03-18 17:40:27,048 [myid:] - INFO  [main:QuorumUtil@250] - Shutting down quorum peer QuorumPeer
2020-03-18 17:40:27,048 [myid:] - INFO  [main:QuorumUtil@257] - No election available to shutdown QuorumPeer
2020-03-18 17:40:27,049 [myid:] - INFO  [main:QuorumUtil@259] - Waiting for QuorumPeer to exit thread
2020-03-18 17:40:27,049 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13933
2020-03-18 17:40:27,049 [myid:] - INFO  [main:QuorumUtil@243] - 127.0.0.1:13933 is no longer accepting client connections
2020-03-18 17:40:27,049 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13936
2020-03-18 17:40:27,049 [myid:] - INFO  [main:QuorumUtil@243] - 127.0.0.1:13936 is no longer accepting client connections
2020-03-18 17:40:27,050 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13939
2020-03-18 17:40:27,050 [myid:] - INFO  [main:QuorumUtil@243] - 127.0.0.1:13939 is no longer accepting client connections
2020-03-18 17:40:27,050 [myid:] - INFO  [main:QuorumUtil@204] - Creating QuorumPeer 1; public port 13933
2020-03-18 17:40:27,050 [myid:] - INFO  [main:ServerCnxnFactory@169] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2020-03-18 17:40:27,050 [myid:] - WARN  [main:ServerCnxnFactory@309] - maxCnxns is not configured, using default value 0.
2020-03-18 17:40:27,050 [myid:] - INFO  [main:NIOServerCnxnFactory@666] - Configuring NIO connection handler with 10s sessionless connection timeout, 1 selector thread(s), 8 worker threads, and 64 kB direct buffers.
2020-03-18 17:40:27,050 [myid:] - INFO  [main:NIOServerCnxnFactory@674] - binding to port /127.0.0.1:13933
2020-03-18 17:40:27,051 [myid:] - INFO  [main:FileTxnSnapLog@124] - zookeeper.snapshot.trust.empty : false
2020-03-18 17:40:27,051 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:27,051 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:27,052 [myid:] - INFO  [main:ZKDatabase@132] - zookeeper.snapshotSizeFactor = 0.33
2020-03-18 17:40:27,052 [myid:] - INFO  [main:ZKDatabase@152] - zookeeper.commitLogCount=500
2020-03-18 17:40:27,052 [myid:] - WARN  [main:QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:40:27,052 [myid:] - INFO  [main:FileTxnSnapLog@251] - Initialize file found, an empty database will not block voting participation
2020-03-18 17:40:27,053 [myid:] - INFO  [main:FileTxnSnapLog@470] - Snapshotting: 0x0 to /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test1638769367983249916.junit.dir/version-2/snapshot.0
2020-03-18 17:40:27,054 [myid:] - INFO  [main:ZKDatabase@289] - Snapshot loaded in 2 ms, highest zxid is 0x0, digest is 1371985504
2020-03-18 17:40:27,054 [myid:] - INFO  [main:QuorumPeer@1102] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2020-03-18 17:40:27,055 [myid:] - INFO  [main:QuorumPeer@1122] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2020-03-18 17:40:27,056 [myid:] - INFO  [main:QuorumPeer@2503] - Using 6000ms as the quorum cnxn socket timeout
2020-03-18 17:40:27,057 [myid:] - INFO  [main:QuorumCnxManager$Listener@906] - Election port bind maximum retries is 3
2020-03-18 17:40:27,057 [myid:] - INFO  [main:QuorumUtil@146] - Started QuorumPeer 1
2020-03-18 17:40:27,057 [myid:] - INFO  [main:QuorumUtil@204] - Creating QuorumPeer 2; public port 13936
2020-03-18 17:40:27,058 [myid:] - INFO  [main:ServerCnxnFactory@169] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2020-03-18 17:40:27,058 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13935:QuorumCnxManager$Listener$ListenerHandler@1047] - My election bind port: /127.0.0.1:13935
2020-03-18 17:40:27,058 [myid:] - WARN  [main:ServerCnxnFactory@309] - maxCnxns is not configured, using default value 0.
2020-03-18 17:40:27,058 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):QuorumPeer@1371] - LOOKING
2020-03-18 17:40:27,058 [myid:] - INFO  [main:NIOServerCnxnFactory@666] - Configuring NIO connection handler with 10s sessionless connection timeout, 1 selector thread(s), 8 worker threads, and 64 kB direct buffers.
2020-03-18 17:40:27,058 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):FastLeaderElection@931] - New election. My id = 1, proposed zxid=0x0
2020-03-18 17:40:27,058 [myid:] - INFO  [main:NIOServerCnxnFactory@674] - binding to port /127.0.0.1:13936
2020-03-18 17:40:27,059 [myid:] - INFO  [main:FileTxnSnapLog@124] - zookeeper.snapshot.trust.empty : false
2020-03-18 17:40:27,059 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:27,059 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:27,059 [myid:] - INFO  [main:ZKDatabase@132] - zookeeper.snapshotSizeFactor = 0.33
2020-03-18 17:40:27,059 [myid:] - INFO  [main:ZKDatabase@152] - zookeeper.commitLogCount=500
2020-03-18 17:40:27,060 [myid:] - WARN  [main:QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:40:27,060 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@716] - Cannot open channel to 2 at election address /127.0.0.1:13938
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:677)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:748)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:644)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:503)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:487)
	at java.lang.Thread.run(Thread.java:748)
2020-03-18 17:40:27,060 [myid:] - INFO  [main:FileTxnSnapLog@251] - Initialize file found, an empty database will not block voting participation
2020-03-18 17:40:27,061 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@716] - Cannot open channel to 3 at election address /127.0.0.1:13941
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:677)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:748)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:644)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:503)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:487)
	at java.lang.Thread.run(Thread.java:748)
2020-03-18 17:40:27,061 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:1, n.state:LOOKING, n.leader:1, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:27,061 [myid:] - INFO  [main:FileTxnSnapLog@470] - Snapshotting: 0x0 to /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test6610796323713925701.junit.dir/version-2/snapshot.0
2020-03-18 17:40:27,062 [myid:] - INFO  [main:ZKDatabase@289] - Snapshot loaded in 2 ms, highest zxid is 0x0, digest is 1371985504
2020-03-18 17:40:27,062 [myid:] - INFO  [main:QuorumPeer@1102] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2020-03-18 17:40:27,063 [myid:] - INFO  [main:QuorumPeer@1122] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2020-03-18 17:40:27,066 [myid:] - INFO  [main:QuorumPeer@2503] - Using 6000ms as the quorum cnxn socket timeout
2020-03-18 17:40:27,066 [myid:] - INFO  [main:QuorumCnxManager$Listener@906] - Election port bind maximum retries is 3
2020-03-18 17:40:27,067 [myid:] - INFO  [main:QuorumUtil@146] - Started QuorumPeer 2
2020-03-18 17:40:27,067 [myid:] - INFO  [main:QuorumUtil@204] - Creating QuorumPeer 3; public port 13939
2020-03-18 17:40:27,067 [myid:] - INFO  [main:ServerCnxnFactory@169] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2020-03-18 17:40:27,067 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13938:QuorumCnxManager$Listener$ListenerHandler@1047] - My election bind port: /127.0.0.1:13938
2020-03-18 17:40:27,068 [myid:] - WARN  [main:ServerCnxnFactory@309] - maxCnxns is not configured, using default value 0.
2020-03-18 17:40:27,068 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13936)(secure=disabled):QuorumPeer@1371] - LOOKING
2020-03-18 17:40:27,068 [myid:] - INFO  [main:NIOServerCnxnFactory@666] - Configuring NIO connection handler with 10s sessionless connection timeout, 1 selector thread(s), 8 worker threads, and 64 kB direct buffers.
2020-03-18 17:40:27,068 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13936)(secure=disabled):FastLeaderElection@931] - New election. My id = 2, proposed zxid=0x0
2020-03-18 17:40:27,068 [myid:] - INFO  [main:NIOServerCnxnFactory@674] - binding to port /127.0.0.1:13939
2020-03-18 17:40:27,069 [myid:] - INFO  [main:FileTxnSnapLog@124] - zookeeper.snapshot.trust.empty : false
2020-03-18 17:40:27,069 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:27,069 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:27,069 [myid:] - INFO  [main:ZKDatabase@132] - zookeeper.snapshotSizeFactor = 0.33
2020-03-18 17:40:27,070 [myid:] - INFO  [main:ZKDatabase@152] - zookeeper.commitLogCount=500
2020-03-18 17:40:27,070 [myid:] - WARN  [main:QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:40:27,070 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13935:QuorumCnxManager$Listener$ListenerHandler@1052] - Received connection request /127.0.0.1:53953
2020-03-18 17:40:27,070 [myid:] - INFO  [main:FileTxnSnapLog@251] - Initialize file found, an empty database will not block voting participation
2020-03-18 17:40:27,071 [myid:] - INFO  [main:FileTxnSnapLog@470] - Snapshotting: 0x0 to /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test1817799326824867510.junit.dir/version-2/snapshot.0
2020-03-18 17:40:27,072 [myid:] - WARN  [WorkerSender[myid=2]:QuorumCnxManager@716] - Cannot open channel to 3 at election address /127.0.0.1:13941
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:677)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:748)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:644)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:503)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:487)
	at java.lang.Thread.run(Thread.java:748)
2020-03-18 17:40:27,072 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:2, n.state:LOOKING, n.leader:2, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:27,072 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:2, n.state:LOOKING, n.leader:2, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:27,072 [myid:] - INFO  [main:ZKDatabase@289] - Snapshot loaded in 3 ms, highest zxid is 0x0, digest is 1371985504
2020-03-18 17:40:27,073 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:1, n.state:LOOKING, n.leader:1, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:27,073 [myid:] - INFO  [main:QuorumPeer@1102] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2020-03-18 17:40:27,073 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:1, n.state:LOOKING, n.leader:2, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:27,073 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:1, n.state:LOOKING, n.leader:2, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:27,074 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@716] - Cannot open channel to 3 at election address /127.0.0.1:13941
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:677)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:748)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:644)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:503)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:487)
	at java.lang.Thread.run(Thread.java:748)
2020-03-18 17:40:27,074 [myid:] - INFO  [main:QuorumPeer@1122] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2020-03-18 17:40:27,076 [myid:] - INFO  [main:QuorumPeer@2503] - Using 6000ms as the quorum cnxn socket timeout
2020-03-18 17:40:27,076 [myid:] - INFO  [main:QuorumCnxManager$Listener@906] - Election port bind maximum retries is 3
2020-03-18 17:40:27,076 [myid:] - INFO  [main:QuorumUtil@146] - Started QuorumPeer 3
2020-03-18 17:40:27,077 [myid:] - INFO  [main:QuorumUtil@149] - Checking ports 127.0.0.1:13933,127.0.0.1:13936,127.0.0.1:13939
2020-03-18 17:40:27,077 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13933
2020-03-18 17:40:27,077 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13941:QuorumCnxManager$Listener$ListenerHandler@1047] - My election bind port: /127.0.0.1:13941
2020-03-18 17:40:27,077 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13939)(secure=disabled):QuorumPeer@1371] - LOOKING
2020-03-18 17:40:27,077 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13939)(secure=disabled):FastLeaderElection@931] - New election. My id = 3, proposed zxid=0x0
2020-03-18 17:40:27,078 [myid:] - INFO  [NIOWorkerThread-1:NIOServerCnxn@507] - Processing stat command from /127.0.0.1:53957
2020-03-18 17:40:27,079 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13935:QuorumCnxManager$Listener$ListenerHandler@1052] - Received connection request /127.0.0.1:53958
2020-03-18 17:40:27,080 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13938:QuorumCnxManager$Listener$ListenerHandler@1052] - Received connection request /127.0.0.1:53959
2020-03-18 17:40:27,081 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:3, n.state:LOOKING, n.leader:3, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:27,081 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:1, n.state:LOOKING, n.leader:2, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:27,081 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:3, n.state:LOOKING, n.leader:3, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:27,081 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:1, n.state:LOOKING, n.leader:3, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:27,082 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:1, n.state:LOOKING, n.leader:3, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:27,082 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:1, n.state:LOOKING, n.leader:3, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:27,084 [myid:] - INFO  [WorkerSender[myid=2]:QuorumCnxManager@462] - Have smaller server identifier, so dropping the connection: (3, 2)
2020-03-18 17:40:27,084 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13941:QuorumCnxManager$Listener$ListenerHandler@1052] - Received connection request /127.0.0.1:53962
2020-03-18 17:40:27,084 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:2, n.state:LOOKING, n.leader:3, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:27,084 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:2, n.state:LOOKING, n.leader:3, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:27,085 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 2, my id = 3
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:40:27,086 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:40:27,086 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@1266] - Exception when using channel: for id 3 my id = 2
java.net.SocketException: Broken pipe (Write failed)
	at java.net.SocketOutputStream.socketWrite0(Native Method)
	at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:111)
	at java.net.SocketOutputStream.write(SocketOutputStream.java:134)
	at java.io.DataOutputStream.writeInt(DataOutputStream.java:198)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.send(QuorumCnxManager.java:1209)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1259)
2020-03-18 17:40:27,087 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13938:QuorumCnxManager$Listener$ListenerHandler@1052] - Received connection request /127.0.0.1:53964
2020-03-18 17:40:27,086 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 3, my id = 2
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:40:27,088 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:40:27,086 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 2 my id = 3
2020-03-18 17:40:27,088 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 3 my id = 2
2020-03-18 17:40:27,089 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:2, n.state:LOOKING, n.leader:3, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:27,089 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:3, n.state:LOOKING, n.leader:3, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:27,285 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):QuorumPeer@857] - Peer state changed: following
2020-03-18 17:40:27,285 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):QuorumPeer@1453] - FOLLOWING
2020-03-18 17:40:27,285 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):ZooKeeperServer@1246] - minSessionTimeout set to 4000
2020-03-18 17:40:27,286 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):ZooKeeperServer@1255] - maxSessionTimeout set to 40000
2020-03-18 17:40:27,286 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):ResponseCache@45] - Response cache size is initialized with value 400.
2020-03-18 17:40:27,286 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):ResponseCache@45] - Response cache size is initialized with value 400.
2020-03-18 17:40:27,286 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):RequestPathMetricsCollector@111] - zookeeper.pathStats.slotCapacity = 60
2020-03-18 17:40:27,286 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):RequestPathMetricsCollector@112] - zookeeper.pathStats.slotDuration = 15
2020-03-18 17:40:27,286 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):RequestPathMetricsCollector@113] - zookeeper.pathStats.maxDepth = 6
2020-03-18 17:40:27,286 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):RequestPathMetricsCollector@114] - zookeeper.pathStats.initialDelay = 5
2020-03-18 17:40:27,286 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):RequestPathMetricsCollector@115] - zookeeper.pathStats.delay = 5
2020-03-18 17:40:27,286 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):RequestPathMetricsCollector@116] - zookeeper.pathStats.enabled = false
2020-03-18 17:40:27,286 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):ZooKeeperServer@1470] - The max bytes for all large requests are set to 104857600
2020-03-18 17:40:27,286 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):ZooKeeperServer@1484] - The large request threshold is set to -1
2020-03-18 17:40:27,286 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):ZooKeeperServer@329] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 clientPortListenBacklog -1 datadir /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test1638769367983249916.junit.dir/version-2 snapdir /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test1638769367983249916.junit.dir/version-2
2020-03-18 17:40:27,286 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):Follower@75] - FOLLOWING - LEADER ELECTION TOOK - 228 MS
2020-03-18 17:40:27,286 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):QuorumPeer@863] - Peer state changed: following - discovery
2020-03-18 17:40:27,291 [myid:] - WARN  [LeaderConnector-/127.0.0.1:13940:Learner$LeaderConnector@392] - Unexpected exception, tries=0, remaining init limit=6000, connecting to /127.0.0.1:13940
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.Learner.sockConnect(Learner.java:255)
	at org.apache.zookeeper.server.quorum.Learner$LeaderConnector.connectToLeader(Learner.java:366)
	at org.apache.zookeeper.server.quorum.Learner$LeaderConnector.run(Learner.java:324)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2020-03-18 17:40:27,294 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13936)(secure=disabled):QuorumPeer@857] - Peer state changed: following
2020-03-18 17:40:27,294 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13939)(secure=disabled):QuorumPeer@857] - Peer state changed: leading
2020-03-18 17:40:27,294 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13939)(secure=disabled):QuorumPeer@1465] - LEADING
2020-03-18 17:40:27,295 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13939)(secure=disabled):ZooKeeperServer@1246] - minSessionTimeout set to 4000
2020-03-18 17:40:27,295 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13939)(secure=disabled):ZooKeeperServer@1255] - maxSessionTimeout set to 40000
2020-03-18 17:40:27,295 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13939)(secure=disabled):ResponseCache@45] - Response cache size is initialized with value 400.
2020-03-18 17:40:27,295 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13939)(secure=disabled):ResponseCache@45] - Response cache size is initialized with value 400.
2020-03-18 17:40:27,295 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13939)(secure=disabled):RequestPathMetricsCollector@111] - zookeeper.pathStats.slotCapacity = 60
2020-03-18 17:40:27,295 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13939)(secure=disabled):RequestPathMetricsCollector@112] - zookeeper.pathStats.slotDuration = 15
2020-03-18 17:40:27,295 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13939)(secure=disabled):RequestPathMetricsCollector@113] - zookeeper.pathStats.maxDepth = 6
2020-03-18 17:40:27,295 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13939)(secure=disabled):RequestPathMetricsCollector@114] - zookeeper.pathStats.initialDelay = 5
2020-03-18 17:40:27,295 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13939)(secure=disabled):RequestPathMetricsCollector@115] - zookeeper.pathStats.delay = 5
2020-03-18 17:40:27,295 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13939)(secure=disabled):RequestPathMetricsCollector@116] - zookeeper.pathStats.enabled = false
2020-03-18 17:40:27,296 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13939)(secure=disabled):ZooKeeperServer@1470] - The max bytes for all large requests are set to 104857600
2020-03-18 17:40:27,296 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13939)(secure=disabled):ZooKeeperServer@1484] - The large request threshold is set to -1
2020-03-18 17:40:27,296 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13939)(secure=disabled):ZooKeeperServer@329] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 clientPortListenBacklog -1 datadir /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test1817799326824867510.junit.dir/version-2 snapdir /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test1817799326824867510.junit.dir/version-2
2020-03-18 17:40:27,294 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13936)(secure=disabled):QuorumPeer@1453] - FOLLOWING
2020-03-18 17:40:27,297 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13936)(secure=disabled):ZooKeeperServer@1246] - minSessionTimeout set to 4000
2020-03-18 17:40:27,297 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13936)(secure=disabled):ZooKeeperServer@1255] - maxSessionTimeout set to 40000
2020-03-18 17:40:27,297 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13936)(secure=disabled):ResponseCache@45] - Response cache size is initialized with value 400.
2020-03-18 17:40:27,297 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13936)(secure=disabled):ResponseCache@45] - Response cache size is initialized with value 400.
2020-03-18 17:40:27,297 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13936)(secure=disabled):RequestPathMetricsCollector@111] - zookeeper.pathStats.slotCapacity = 60
2020-03-18 17:40:27,297 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13936)(secure=disabled):RequestPathMetricsCollector@112] - zookeeper.pathStats.slotDuration = 15
2020-03-18 17:40:27,297 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13936)(secure=disabled):RequestPathMetricsCollector@113] - zookeeper.pathStats.maxDepth = 6
2020-03-18 17:40:27,297 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13936)(secure=disabled):RequestPathMetricsCollector@114] - zookeeper.pathStats.initialDelay = 5
2020-03-18 17:40:27,297 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13936)(secure=disabled):RequestPathMetricsCollector@115] - zookeeper.pathStats.delay = 5
2020-03-18 17:40:27,297 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13936)(secure=disabled):RequestPathMetricsCollector@116] - zookeeper.pathStats.enabled = false
2020-03-18 17:40:27,298 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13936)(secure=disabled):ZooKeeperServer@1470] - The max bytes for all large requests are set to 104857600
2020-03-18 17:40:27,298 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13936)(secure=disabled):ZooKeeperServer@1484] - The large request threshold is set to -1
2020-03-18 17:40:27,298 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13936)(secure=disabled):ZooKeeperServer@329] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 clientPortListenBacklog -1 datadir /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test6610796323713925701.junit.dir/version-2 snapdir /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test6610796323713925701.junit.dir/version-2
2020-03-18 17:40:27,298 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13936)(secure=disabled):Follower@75] - FOLLOWING - LEADER ELECTION TOOK - 229 MS
2020-03-18 17:40:27,298 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13936)(secure=disabled):QuorumPeer@863] - Peer state changed: following - discovery
2020-03-18 17:40:27,298 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13939)(secure=disabled):Leader@581] - LEADING - LEADER ELECTION TOOK - 220 MS
2020-03-18 17:40:27,298 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13939)(secure=disabled):QuorumPeer@863] - Peer state changed: leading - discovery
2020-03-18 17:40:27,298 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13939)(secure=disabled):FileTxnSnapLog@470] - Snapshotting: 0x0 to /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test1817799326824867510.junit.dir/version-2/snapshot.0
2020-03-18 17:40:27,300 [myid:] - INFO  [LeaderConnector-/127.0.0.1:13940:Learner$LeaderConnector@328] - Successfully connected to leader, using address: /127.0.0.1:13940
2020-03-18 17:40:27,300 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13939)(secure=disabled):ZooKeeperServer@519] - Snapshot taken in 1 ms
2020-03-18 17:40:27,302 [myid:] - INFO  [LearnerHandler-/127.0.0.1:53972:LearnerHandler@504] - Follower sid: 2 : info : 127.0.0.1:13937:13938:participant;127.0.0.1:13936
2020-03-18 17:40:27,304 [myid:] - WARN  [QuorumPeer[myid=3](plain=127.0.0.1:13939)(secure=disabled):QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:40:27,304 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13936)(secure=disabled):QuorumPeer@863] - Peer state changed: following - synchronization
2020-03-18 17:40:27,305 [myid:] - INFO  [LearnerHandler-/127.0.0.1:53972:ZKDatabase@345] - On disk txn sync enabled with snapshotSizeFactor 0.33
2020-03-18 17:40:27,305 [myid:] - INFO  [LearnerHandler-/127.0.0.1:53972:LearnerHandler@800] - Synchronizing with Learner sid: 2 maxCommittedLog=0x0 minCommittedLog=0x0 lastProcessedZxid=0x0 peerLastZxid=0x0
2020-03-18 17:40:27,305 [myid:] - INFO  [LearnerHandler-/127.0.0.1:53972:LearnerHandler@845] - Sending DIFF zxid=0x0 for peer sid: 2
2020-03-18 17:40:27,306 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13939)(secure=disabled):QuorumPeer@863] - Peer state changed: leading - synchronization
2020-03-18 17:40:27,307 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13936)(secure=disabled):Learner@509] - Getting a diff from the leader 0x0
2020-03-18 17:40:27,307 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13936)(secure=disabled):QuorumPeer@868] - Peer state changed: following - synchronization - diff
2020-03-18 17:40:27,307 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13936)(secure=disabled):Learner@675] - Learner received NEWLEADER message
2020-03-18 17:40:27,308 [myid:] - WARN  [QuorumPeer[myid=2](plain=127.0.0.1:13936)(secure=disabled):QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:40:27,309 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13939)(secure=disabled):Leader@1501] - Have quorum of supporters, sids: [[2, 3],[2, 3]]; starting up and setting last processed zxid: 0x100000000
2020-03-18 17:40:27,310 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13939)(secure=disabled):CommitProcessor@476] - Configuring CommitProcessor with readBatchSize -1 commitBatchSize 1
2020-03-18 17:40:27,310 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13939)(secure=disabled):CommitProcessor@438] - Configuring CommitProcessor with 4 worker threads.
2020-03-18 17:40:27,310 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13939)(secure=disabled):ContainerManager@83] - Using checkIntervalMs=60000 maxPerMinute=10000 maxNeverUsedIntervalMs=0
2020-03-18 17:40:27,311 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13939)(secure=disabled):QuorumPeer@863] - Peer state changed: leading - broadcast
2020-03-18 17:40:27,311 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13936)(secure=disabled):Learner@659] - Learner received UPTODATE message
2020-03-18 17:40:27,312 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13936)(secure=disabled):QuorumPeer@868] - Peer state changed: following - synchronization
2020-03-18 17:40:27,312 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13936)(secure=disabled):CommitProcessor@476] - Configuring CommitProcessor with readBatchSize -1 commitBatchSize 1
2020-03-18 17:40:27,312 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13936)(secure=disabled):CommitProcessor@438] - Configuring CommitProcessor with 4 worker threads.
2020-03-18 17:40:27,319 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13936)(secure=disabled):QuorumPeer@863] - Peer state changed: following - broadcast
2020-03-18 17:40:27,338 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13933
2020-03-18 17:40:27,351 [myid:] - INFO  [NIOWorkerThread-2:NIOServerCnxn@507] - Processing stat command from /127.0.0.1:53973
2020-03-18 17:40:27,397 [myid:] - INFO  [LeaderConnector-/127.0.0.1:13940:Learner$LeaderConnector@328] - Successfully connected to leader, using address: /127.0.0.1:13940
2020-03-18 17:40:27,403 [myid:] - INFO  [LearnerHandler-/127.0.0.1:53976:LearnerHandler@504] - Follower sid: 1 : info : 127.0.0.1:13934:13935:participant;127.0.0.1:13933
2020-03-18 17:40:27,407 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):QuorumPeer@863] - Peer state changed: following - synchronization
2020-03-18 17:40:27,408 [myid:] - INFO  [LearnerHandler-/127.0.0.1:53976:ZKDatabase@345] - On disk txn sync enabled with snapshotSizeFactor 0.33
2020-03-18 17:40:27,408 [myid:] - INFO  [LearnerHandler-/127.0.0.1:53976:LearnerHandler@800] - Synchronizing with Learner sid: 1 maxCommittedLog=0x0 minCommittedLog=0x0 lastProcessedZxid=0x100000000 peerLastZxid=0x0
2020-03-18 17:40:27,411 [myid:] - INFO  [LearnerHandler-/127.0.0.1:53976:LearnerHandler@565] - Sending snapshot last zxid of peer is 0x0, zxid of leader is 0x100000000, send zxid of db as 0x100000000, 1 concurrent snapshot sync, snapshot sync was exempt from throttle
2020-03-18 17:40:27,411 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):QuorumPeer@868] - Peer state changed: following - synchronization - snap
2020-03-18 17:40:27,412 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):Learner@514] - Getting a snapshot from leader 0x100000000
2020-03-18 17:40:27,412 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:27,412 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:27,419 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):Learner@675] - Learner received NEWLEADER message
2020-03-18 17:40:27,420 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:40:27,420 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):FileTxnSnapLog@470] - Snapshotting: 0x100000000 to /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test1638769367983249916.junit.dir/version-2/snapshot.100000000
2020-03-18 17:40:27,422 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):ZooKeeperServer@519] - Snapshot taken in 1 ms
2020-03-18 17:40:27,429 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):Learner@659] - Learner received UPTODATE message
2020-03-18 17:40:27,430 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):QuorumPeer@868] - Peer state changed: following - synchronization
2020-03-18 17:40:27,430 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):CommitProcessor@476] - Configuring CommitProcessor with readBatchSize -1 commitBatchSize 1
2020-03-18 17:40:27,430 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):CommitProcessor@438] - Configuring CommitProcessor with 4 worker threads.
2020-03-18 17:40:27,434 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):QuorumPeer@863] - Peer state changed: following - broadcast
2020-03-18 17:40:27,605 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13933
2020-03-18 17:40:27,606 [myid:] - INFO  [NIOWorkerThread-3:NIOServerCnxn@507] - Processing stat command from /127.0.0.1:54000
2020-03-18 17:40:27,606 [myid:] - INFO  [NIOWorkerThread-3:StatCommand@52] - Stat command output
2020-03-18 17:40:27,606 [myid:] - INFO  [main:QuorumUtil@152] - 127.0.0.1:13933 is accepting client connections
2020-03-18 17:40:27,606 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13936
2020-03-18 17:40:27,607 [myid:] - INFO  [NIOWorkerThread-1:NIOServerCnxn@507] - Processing stat command from /127.0.0.1:54001
2020-03-18 17:40:27,608 [myid:] - INFO  [NIOWorkerThread-1:StatCommand@52] - Stat command output
2020-03-18 17:40:27,608 [myid:] - INFO  [main:QuorumUtil@152] - 127.0.0.1:13936 is accepting client connections
2020-03-18 17:40:27,608 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13939
2020-03-18 17:40:27,610 [myid:] - INFO  [NIOWorkerThread-1:NIOServerCnxn@507] - Processing stat command from /127.0.0.1:54002
2020-03-18 17:40:27,610 [myid:] - INFO  [NIOWorkerThread-1:StatCommand@52] - Stat command output
2020-03-18 17:40:27,610 [myid:] - INFO  [main:QuorumUtil@152] - 127.0.0.1:13939 is accepting client connections
2020-03-18 17:40:27,610 [myid:] - INFO  [main:JMXEnv@191] - JMXEnv.dump() follows
2020-03-18 17:40:27,613 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.2
2020-03-18 17:40:27,613 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1
2020-03-18 17:40:27,613 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1,name2=Follower,name3=InMemoryDataTree
2020-03-18 17:40:27,613 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.3
2020-03-18 17:40:27,613 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.3
2020-03-18 17:40:27,613 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id1
2020-03-18 17:40:27,613 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.2
2020-03-18 17:40:27,613 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id2
2020-03-18 17:40:27,613 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.1
2020-03-18 17:40:27,613 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3
2020-03-18 17:40:27,614 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.2,name2=Follower,name3=InMemoryDataTree
2020-03-18 17:40:27,614 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.3,name2=Leader,name3=Learner_Connections,name4="127.0.0.1:53972",name5="id:2"
2020-03-18 17:40:27,614 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.3,name2=Leader
2020-03-18 17:40:27,614 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.3,name2=Leader,name3=Learner_Connections,name4="127.0.0.1:53976",name5="id:1"
2020-03-18 17:40:27,614 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.2
2020-03-18 17:40:27,614 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.1
2020-03-18 17:40:27,614 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.3
2020-03-18 17:40:27,614 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.3,name2=Leader,name3=InMemoryDataTree
2020-03-18 17:40:27,614 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1,name2=Follower
2020-03-18 17:40:27,614 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.2,name2=Follower
2020-03-18 17:40:27,617 [myid:] - INFO  [main:JMXEnv@116] - expect:InMemoryDataTree
2020-03-18 17:40:27,617 [myid:] - INFO  [main:JMXEnv@119] - found:InMemoryDataTree org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1,name2=Follower,name3=InMemoryDataTree
2020-03-18 17:40:27,617 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id1,name1=replica.1,name2=
2020-03-18 17:40:27,617 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id1,name1=replica.1,name2= org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1,name2=Follower
2020-03-18 17:40:27,617 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id2,name1=replica.2,name2=
2020-03-18 17:40:27,617 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id2,name1=replica.2,name2= org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.2,name2=Follower,name3=InMemoryDataTree
2020-03-18 17:40:27,617 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id3,name1=replica.3,name2=
2020-03-18 17:40:27,617 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id3,name1=replica.3,name2= org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.3,name2=Leader,name3=Learner_Connections,name4="127.0.0.1:53972",name5="id:2"
2020-03-18 17:40:27,618 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id1,name1=replica.1
2020-03-18 17:40:27,618 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id1,name1=replica.1 org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1
2020-03-18 17:40:27,618 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id1,name1=replica.2
2020-03-18 17:40:27,618 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id1,name1=replica.2 org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.2
2020-03-18 17:40:27,618 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id1,name1=replica.3
2020-03-18 17:40:27,618 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id1,name1=replica.3 org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.3
2020-03-18 17:40:27,618 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id2,name1=replica.1
2020-03-18 17:40:27,618 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id2,name1=replica.1 org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.1
2020-03-18 17:40:27,618 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id2,name1=replica.2
2020-03-18 17:40:27,619 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id2,name1=replica.2 org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.2
2020-03-18 17:40:27,619 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id2,name1=replica.3
2020-03-18 17:40:27,619 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id2,name1=replica.3 org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.3
2020-03-18 17:40:27,619 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id3,name1=replica.1
2020-03-18 17:40:27,619 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id3,name1=replica.1 org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.1
2020-03-18 17:40:27,619 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id3,name1=replica.2
2020-03-18 17:40:27,619 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id3,name1=replica.2 org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.2
2020-03-18 17:40:27,619 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id3,name1=replica.3
2020-03-18 17:40:27,619 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id3,name1=replica.3 org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.3,name2=Leader
2020-03-18 17:40:27,620 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id1
2020-03-18 17:40:27,620 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id1 org.apache.ZooKeeperService:name0=ReplicatedServer_id1
2020-03-18 17:40:27,620 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id2
2020-03-18 17:40:27,620 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id2 org.apache.ZooKeeperService:name0=ReplicatedServer_id2
2020-03-18 17:40:27,620 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id3
2020-03-18 17:40:27,620 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id3 org.apache.ZooKeeperService:name0=ReplicatedServer_id3
2020-03-18 17:40:27,620 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@398] - Connecting to follower: 1
2020-03-18 17:40:27,620 [myid:] - INFO  [main:ZooKeeper@1005] - Initiating client connection, connectString=127.0.0.1:13933 sessionTimeout=30000 watcher=org.apache.zookeeper.test.ClientBase$CountdownWatcher@8b87145
2020-03-18 17:40:27,621 [myid:] - INFO  [main:ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes
2020-03-18 17:40:27,621 [myid:] - INFO  [main:ClientCnxn@1703] - zookeeper.request.timeout value is 0. feature enabled=false
2020-03-18 17:40:27,623 [myid:127.0.0.1:13933] - INFO  [main-SendThread(127.0.0.1:13933):ClientCnxn$SendThread@1154] - Opening socket connection to server localhost/127.0.0.1:13933.
2020-03-18 17:40:27,623 [myid:127.0.0.1:13933] - INFO  [main-SendThread(127.0.0.1:13933):ClientCnxn$SendThread@1156] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2020-03-18 17:40:27,623 [myid:127.0.0.1:13933] - INFO  [main-SendThread(127.0.0.1:13933):ClientCnxn$SendThread@986] - Socket connection established, initiating session, client: /127.0.0.1:54003, server: localhost/127.0.0.1:13933
2020-03-18 17:40:27,625 [myid:] - INFO  [SyncThread:3:FileTxnLog@284] - Creating new log file: log.100000001
2020-03-18 17:40:27,625 [myid:] - WARN  [QuorumPeer[myid=2](plain=127.0.0.1:13936)(secure=disabled):Follower@170] - Got zxid 0x100000001 expected 0x1
2020-03-18 17:40:27,625 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):Follower@170] - Got zxid 0x100000001 expected 0x1
2020-03-18 17:40:27,626 [myid:] - INFO  [SyncThread:2:FileTxnLog@284] - Creating new log file: log.100000001
2020-03-18 17:40:27,626 [myid:] - INFO  [SyncThread:1:FileTxnLog@284] - Creating new log file: log.100000001
2020-03-18 17:40:27,627 [myid:] - INFO  [CommitProcessor:3:LeaderSessionTracker@104] - Committing global session 0x100015e63de0000
2020-03-18 17:40:27,627 [myid:] - INFO  [CommitProcessor:1:LearnerSessionTracker@116] - Committing global session 0x100015e63de0000
2020-03-18 17:40:27,627 [myid:] - INFO  [CommitProcessor:2:LearnerSessionTracker@116] - Committing global session 0x100015e63de0000
2020-03-18 17:40:27,628 [myid:127.0.0.1:13933] - INFO  [main-SendThread(127.0.0.1:13933):ClientCnxn$SendThread@1420] - Session establishment complete on server localhost/127.0.0.1:13933, session id = 0x100015e63de0000, negotiated timeout = 30000
2020-03-18 17:40:27,629 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@401] - zk1 has session id 0x100015e63de0000
2020-03-18 17:40:27,629 [myid:] - INFO  [main:ZooKeeper@1005] - Initiating client connection, connectString=127.0.0.1:13933 sessionTimeout=30000 watcher=org.apache.zookeeper.test.ClientBase$CountdownWatcher@b9afc07
2020-03-18 17:40:27,629 [myid:] - INFO  [main:ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes
2020-03-18 17:40:27,629 [myid:] - INFO  [main:ClientCnxn@1703] - zookeeper.request.timeout value is 0. feature enabled=false
2020-03-18 17:40:27,631 [myid:127.0.0.1:13933] - INFO  [main-SendThread(127.0.0.1:13933):ClientCnxn$SendThread@1154] - Opening socket connection to server localhost/127.0.0.1:13933.
2020-03-18 17:40:27,631 [myid:127.0.0.1:13933] - INFO  [main-SendThread(127.0.0.1:13933):ClientCnxn$SendThread@1156] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2020-03-18 17:40:27,631 [myid:127.0.0.1:13933] - INFO  [main-SendThread(127.0.0.1:13933):ClientCnxn$SendThread@986] - Socket connection established, initiating session, client: /127.0.0.1:54004, server: localhost/127.0.0.1:13933
2020-03-18 17:40:27,633 [myid:] - INFO  [CommitProcessor:1:LearnerSessionTracker@116] - Committing global session 0x100015e63de0001
2020-03-18 17:40:27,633 [myid:] - INFO  [CommitProcessor:3:LeaderSessionTracker@104] - Committing global session 0x100015e63de0001
2020-03-18 17:40:27,633 [myid:] - INFO  [CommitProcessor:2:LearnerSessionTracker@116] - Committing global session 0x100015e63de0001
2020-03-18 17:40:27,634 [myid:127.0.0.1:13933] - INFO  [main-SendThread(127.0.0.1:13933):ClientCnxn$SendThread@1420] - Session establishment complete on server localhost/127.0.0.1:13933, session id = 0x100015e63de0001, negotiated timeout = 30000
2020-03-18 17:40:27,634 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@404] - zk2 has session id 0x100015e63de0001
2020-03-18 17:40:27,634 [myid:] - INFO  [main:ZooKeeper@1005] - Initiating client connection, connectString=127.0.0.1:13939 sessionTimeout=30000 watcher=org.apache.zookeeper.test.ClientBase$CountdownWatcher@73d4cc9e
2020-03-18 17:40:27,635 [myid:] - INFO  [main:ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes
2020-03-18 17:40:27,635 [myid:] - INFO  [main:ClientCnxn@1703] - zookeeper.request.timeout value is 0. feature enabled=false
2020-03-18 17:40:27,636 [myid:127.0.0.1:13939] - INFO  [main-SendThread(127.0.0.1:13939):ClientCnxn$SendThread@1154] - Opening socket connection to server localhost/127.0.0.1:13939.
2020-03-18 17:40:27,637 [myid:127.0.0.1:13939] - INFO  [main-SendThread(127.0.0.1:13939):ClientCnxn$SendThread@1156] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2020-03-18 17:40:27,637 [myid:127.0.0.1:13939] - INFO  [main-SendThread(127.0.0.1:13939):ClientCnxn$SendThread@986] - Socket connection established, initiating session, client: /127.0.0.1:54005, server: localhost/127.0.0.1:13939
2020-03-18 17:40:27,638 [myid:] - INFO  [CommitProcessor:3:LeaderSessionTracker@104] - Committing global session 0x300015e63770000
2020-03-18 17:40:27,638 [myid:] - INFO  [CommitProcessor:1:LearnerSessionTracker@116] - Committing global session 0x300015e63770000
2020-03-18 17:40:27,638 [myid:] - INFO  [CommitProcessor:2:LearnerSessionTracker@116] - Committing global session 0x300015e63770000
2020-03-18 17:40:27,639 [myid:127.0.0.1:13939] - INFO  [main-SendThread(127.0.0.1:13939):ClientCnxn$SendThread@1420] - Session establishment complete on server localhost/127.0.0.1:13939, session id = 0x300015e63770000, negotiated timeout = 30000
2020-03-18 17:40:27,639 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@407] - zk3 has session id 0x300015e63770000
2020-03-18 17:40:27,751 [myid:] - INFO  [main:QuorumUtil@250] - Shutting down quorum peer QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled)
2020-03-18 17:40:27,751 [myid:] - INFO  [main:Follower@292] - shutdown Follower
2020-03-18 17:40:27,751 [myid:127.0.0.1:13933] - WARN  [main-SendThread(127.0.0.1:13933):ClientCnxn$SendThread@1272] - Session 0x100015e63de0000 for sever localhost/127.0.0.1:13933, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
EndOfStreamException: Unable to read additional data from server sessionid 0x100015e63de0000, likely server has closed socket
	at org.apache.zookeeper.ClientCnxnSocketNIO.doIO(ClientCnxnSocketNIO.java:75)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:348)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1262)
2020-03-18 17:40:27,752 [myid:] - INFO  [main:LearnerZooKeeperServer@160] - Shutting down
2020-03-18 17:40:27,753 [myid:] - INFO  [main:ZooKeeperServer@784] - shutting down
2020-03-18 17:40:27,753 [myid:] - INFO  [main:RequestThrottler@244] - Shutting down
2020-03-18 17:40:27,754 [myid:] - INFO  [RequestThrottler:RequestThrottler@205] - Draining request throttler queue
2020-03-18 17:40:27,754 [myid:] - INFO  [RequestThrottler:RequestThrottler@181] - RequestThrottler shutdown. Dropped 0 requests
2020-03-18 17:40:27,752 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):Follower@129] - Exception when following the leader
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:96)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:134)
	at org.apache.zookeeper.server.quorum.Learner.readPacket(Learner.java:182)
	at org.apache.zookeeper.server.quorum.Follower.followLeader(Follower.java:125)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:1455)
2020-03-18 17:40:27,777 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):Follower@143] - Disconnected from leader (with address: /127.0.0.1:13940). Was connected for 373ms. Sync state: true
2020-03-18 17:40:27,778 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):Follower@292] - shutdown Follower
2020-03-18 17:40:27,779 [myid:] - INFO  [main:FollowerRequestProcessor@148] - Shutting down
2020-03-18 17:40:27,781 [myid:] - INFO  [main:CommitProcessor@617] - Shutting down
2020-03-18 17:40:27,782 [myid:] - INFO  [main:FinalRequestProcessor@662] - shutdown of request processor complete
2020-03-18 17:40:27,782 [myid:] - ERROR [LearnerHandler-/127.0.0.1:53976:LearnerHandler@707] - Unexpected exception causing shutdown while sock still open
java.net.SocketException: Connection reset
	at java.net.SocketInputStream.read(SocketInputStream.java:210)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:96)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:134)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:643)
2020-03-18 17:40:27,791 [myid:] - WARN  [LearnerHandler-/127.0.0.1:53976:LearnerHandler@730] - ******* GOODBYE /127.0.0.1:53976 ********
2020-03-18 17:40:27,791 [myid:] - ERROR [FollowerRequestProcessor:1:ZooKeeperCriticalThread@49] - Severe unrecoverable error, from thread : FollowerRequestProcessor:1
java.net.SocketException: Socket closed
	at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:118)
	at java.net.SocketOutputStream.write(SocketOutputStream.java:155)
	at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:82)
	at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:140)
	at org.apache.zookeeper.server.quorum.Learner.writePacket(Learner.java:168)
	at org.apache.zookeeper.server.quorum.Learner.request(Learner.java:217)
	at org.apache.zookeeper.server.quorum.FollowerRequestProcessor.run(FollowerRequestProcessor.java:98)
2020-03-18 17:40:27,790 [myid:] - INFO  [main:FileTxnSnapLog@363] - 1 txns loaded in 7 ms
2020-03-18 17:40:27,792 [myid:] - INFO  [main:SyncRequestProcessor@256] - Shutting down
2020-03-18 17:40:27,792 [myid:127.0.0.1:13933] - WARN  [main-SendThread(127.0.0.1:13933):ClientCnxn$SendThread@1272] - Session 0x100015e63de0001 for sever localhost/127.0.0.1:13933, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
EndOfStreamException: Unable to read additional data from server sessionid 0x100015e63de0001, likely server has closed socket
	at org.apache.zookeeper.ClientCnxnSocketNIO.doIO(ClientCnxnSocketNIO.java:75)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:348)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1262)
2020-03-18 17:40:27,792 [myid:] - INFO  [CommitProcessor:1:CommitProcessor@406] - CommitProcessor exited loop!
2020-03-18 17:40:27,792 [myid:] - INFO  [FollowerRequestProcessor:1:ZooKeeperServerListenerImpl@43] - Thread FollowerRequestProcessor:1 exits, error code 1
2020-03-18 17:40:27,828 [myid:] - INFO  [FollowerRequestProcessor:1:FollowerRequestProcessor@112] - FollowerRequestProcessor exited loop!
2020-03-18 17:40:27,832 [myid:] - WARN  [SyncThread:1:SendAckRequestProcessor@65] - Closing connection to leader, exception during packet send
java.net.SocketException: Socket closed
	at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:118)
	at java.net.SocketOutputStream.write(SocketOutputStream.java:155)
	at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:82)
	at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:140)
	at org.apache.zookeeper.server.quorum.Learner.writePacket(Learner.java:168)
	at org.apache.zookeeper.server.quorum.SendAckRequestProcessor.flush(SendAckRequestProcessor.java:63)
	at org.apache.zookeeper.server.SyncRequestProcessor.flush(SyncRequestProcessor.java:249)
	at org.apache.zookeeper.server.SyncRequestProcessor.run(SyncRequestProcessor.java:169)
2020-03-18 17:40:27,838 [myid:] - INFO  [SyncThread:1:SyncRequestProcessor@225] - SyncRequestProcessor exited!
2020-03-18 17:40:27,841 [myid:] - INFO  [ConnnectionExpirer:NIOServerCnxnFactory$ConnectionExpirerThread@578] - ConnnectionExpirerThread interrupted
2020-03-18 17:40:27,853 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):LearnerZooKeeperServer@160] - Shutting down
2020-03-18 17:40:27,854 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):ZooKeeperServer@784] - shutting down
2020-03-18 17:40:27,854 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):RequestThrottler@244] - Shutting down
2020-03-18 17:40:27,854 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):FollowerRequestProcessor@148] - Shutting down
2020-03-18 17:40:27,855 [myid:] - INFO  [NIOServerCxnFactory.AcceptThread:/127.0.0.1:13933:NIOServerCnxnFactory$AcceptThread@209] - accept thread exitted run method
2020-03-18 17:40:27,855 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):CommitProcessor@617] - Shutting down
2020-03-18 17:40:27,855 [myid:] - INFO  [NIOServerCxnFactory.SelectorThread-0:NIOServerCnxnFactory$SelectorThread@411] - selector thread exitted run method
2020-03-18 17:40:27,855 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):FinalRequestProcessor@662] - shutdown of request processor complete
2020-03-18 17:40:27,864 [myid:] - INFO  [QuorumPeerListener:QuorumCnxManager$Listener@961] - Leaving listener
2020-03-18 17:40:27,872 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 1, my id = 2
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:40:27,872 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:40:27,872 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 2, my id = 1
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:40:27,872 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:40:27,872 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:40:27,873 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 2 my id = 1
2020-03-18 17:40:27,878 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:40:27,878 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 1 my id = 2
2020-03-18 17:40:27,875 [myid:] - INFO  [main:QuorumUtil@254] - Shutting down leader election QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled)
2020-03-18 17:40:27,874 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:40:27,874 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 3, my id = 1
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:40:27,878 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:40:27,874 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 1, my id = 3
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:40:27,899 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:40:27,899 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@458] - WorkerReceiver is down
2020-03-18 17:40:27,899 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:40:27,899 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 1 my id = 3
2020-03-18 17:40:27,878 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):FileTxnSnapLog@363] - 1 txns loaded in 0 ms
2020-03-18 17:40:27,878 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 3 my id = 1
2020-03-18 17:40:27,878 [myid:] - INFO  [main:QuorumUtil@259] - Waiting for QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled) to exit thread
2020-03-18 17:40:27,900 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):SyncRequestProcessor@256] - Shutting down
2020-03-18 17:40:27,899 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection$Messenger$WorkerReceiver@458] - WorkerReceiver is down
2020-03-18 17:40:27,899 [myid:] - INFO  [WorkerSender[myid=3]:FastLeaderElection$Messenger$WorkerSender@492] - WorkerSender is down
2020-03-18 17:40:27,899 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@458] - WorkerReceiver is down
2020-03-18 17:40:27,899 [myid:] - INFO  [WorkerSender[myid=1]:FastLeaderElection$Messenger$WorkerSender@492] - WorkerSender is down
2020-03-18 17:40:27,899 [myid:] - INFO  [WorkerSender[myid=2]:FastLeaderElection$Messenger$WorkerSender@492] - WorkerSender is down
2020-03-18 17:40:27,900 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):QuorumPeer@863] - Peer state changed: looking
2020-03-18 17:40:27,900 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):QuorumPeer@1501] - PeerState set to LOOKING
2020-03-18 17:40:27,900 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):QuorumPeer@1483] - QuorumPeer main thread exited
2020-03-18 17:40:28,249 [myid:] - INFO  [SessionTracker:SessionTrackerImpl@170] - SessionTrackerImpl exited loop!
2020-03-18 17:40:28,712 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@458] - WorkerReceiver is down
2020-03-18 17:40:28,712 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@458] - WorkerReceiver is down
2020-03-18 17:40:28,712 [myid:] - INFO  [WorkerSender[myid=2]:FastLeaderElection$Messenger$WorkerSender@492] - WorkerSender is down
2020-03-18 17:40:28,712 [myid:] - INFO  [WorkerSender[myid=1]:FastLeaderElection$Messenger$WorkerSender@492] - WorkerSender is down
2020-03-18 17:40:29,001 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@468] - Shutting down s1
2020-03-18 17:40:29,401 [myid:] - INFO  [WorkerSender[myid=3]:FastLeaderElection$Messenger$WorkerSender@492] - WorkerSender is down
2020-03-18 17:40:29,402 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@458] - WorkerReceiver is down
2020-03-18 17:40:29,402 [myid:] - INFO  [WorkerSender[myid=1]:FastLeaderElection$Messenger$WorkerSender@492] - WorkerSender is down
2020-03-18 17:40:29,402 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@458] - WorkerReceiver is down
2020-03-18 17:40:29,402 [myid:] - INFO  [WorkerSender[myid=2]:FastLeaderElection$Messenger$WorkerSender@492] - WorkerSender is down
2020-03-18 17:40:29,403 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection$Messenger$WorkerReceiver@458] - WorkerReceiver is down
2020-03-18 17:40:29,550 [myid:127.0.0.1:13933] - INFO  [main-SendThread(127.0.0.1:13933):ClientCnxn$SendThread@1154] - Opening socket connection to server localhost/127.0.0.1:13933.
2020-03-18 17:40:29,550 [myid:127.0.0.1:13933] - INFO  [main-SendThread(127.0.0.1:13933):ClientCnxn$SendThread@1156] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2020-03-18 17:40:29,550 [myid:127.0.0.1:13933] - WARN  [main-SendThread(127.0.0.1:13933):ClientCnxn$SendThread@1272] - Session 0x100015e63de0000 for sever localhost/127.0.0.1:13933, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:717)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:342)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1262)
2020-03-18 17:40:29,817 [myid:127.0.0.1:13933] - INFO  [main-SendThread(127.0.0.1:13933):ClientCnxn$SendThread@1154] - Opening socket connection to server localhost/127.0.0.1:13933.
2020-03-18 17:40:29,817 [myid:127.0.0.1:13933] - INFO  [main-SendThread(127.0.0.1:13933):ClientCnxn$SendThread@1156] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2020-03-18 17:40:29,817 [myid:127.0.0.1:13933] - WARN  [main-SendThread(127.0.0.1:13933):ClientCnxn$SendThread@1272] - Session 0x100015e63de0001 for sever localhost/127.0.0.1:13933, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:717)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:342)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1262)
2020-03-18 17:40:30,082 [myid:] - INFO  [WorkerSender[myid=1]:FastLeaderElection$Messenger$WorkerSender@492] - WorkerSender is down
2020-03-18 17:40:30,086 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@458] - WorkerReceiver is down
2020-03-18 17:40:31,541 [myid:127.0.0.1:13933] - INFO  [main-SendThread(127.0.0.1:13933):ClientCnxn$SendThread@1154] - Opening socket connection to server localhost/127.0.0.1:13933.
2020-03-18 17:40:31,541 [myid:127.0.0.1:13933] - INFO  [main-SendThread(127.0.0.1:13933):ClientCnxn$SendThread@1156] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2020-03-18 17:40:31,542 [myid:127.0.0.1:13933] - WARN  [main-SendThread(127.0.0.1:13933):ClientCnxn$SendThread@1272] - Session 0x100015e63de0000 for sever localhost/127.0.0.1:13933, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:717)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:342)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1262)
2020-03-18 17:40:31,750 [myid:127.0.0.1:13933] - INFO  [main-SendThread(127.0.0.1:13933):ClientCnxn$SendThread@1154] - Opening socket connection to server localhost/127.0.0.1:13933.
2020-03-18 17:40:31,750 [myid:127.0.0.1:13933] - INFO  [main-SendThread(127.0.0.1:13933):ClientCnxn$SendThread@1156] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2020-03-18 17:40:31,750 [myid:127.0.0.1:13933] - WARN  [main-SendThread(127.0.0.1:13933):ClientCnxn$SendThread@1272] - Session 0x100015e63de0001 for sever localhost/127.0.0.1:13933, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:717)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:342)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1262)
2020-03-18 17:40:33,571 [myid:127.0.0.1:13933] - INFO  [main-SendThread(127.0.0.1:13933):ClientCnxn$SendThread@1154] - Opening socket connection to server localhost/127.0.0.1:13933.
2020-03-18 17:40:33,571 [myid:127.0.0.1:13933] - INFO  [main-SendThread(127.0.0.1:13933):ClientCnxn$SendThread@1156] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2020-03-18 17:40:33,571 [myid:127.0.0.1:13933] - WARN  [main-SendThread(127.0.0.1:13933):ClientCnxn$SendThread@1272] - Session 0x100015e63de0000 for sever localhost/127.0.0.1:13933, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:717)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:342)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1262)
2020-03-18 17:40:33,705 [myid:127.0.0.1:13933] - INFO  [main-SendThread(127.0.0.1:13933):ClientCnxn$SendThread@1154] - Opening socket connection to server localhost/127.0.0.1:13933.
2020-03-18 17:40:33,705 [myid:127.0.0.1:13933] - INFO  [main-SendThread(127.0.0.1:13933):ClientCnxn$SendThread@1156] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2020-03-18 17:40:33,705 [myid:127.0.0.1:13933] - WARN  [main-SendThread(127.0.0.1:13933):ClientCnxn$SendThread@1272] - Session 0x100015e63de0001 for sever localhost/127.0.0.1:13933, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:717)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:342)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1262)
2020-03-18 17:40:34,924 [myid:127.0.0.1:13933] - INFO  [main-SendThread(127.0.0.1:13933):ClientCnxn$SendThread@1154] - Opening socket connection to server localhost/127.0.0.1:13933.
2020-03-18 17:40:34,924 [myid:127.0.0.1:13933] - INFO  [main-SendThread(127.0.0.1:13933):ClientCnxn$SendThread@1156] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2020-03-18 17:40:34,925 [myid:127.0.0.1:13933] - WARN  [main-SendThread(127.0.0.1:13933):ClientCnxn$SendThread@1272] - Session 0x100015e63de0001 for sever localhost/127.0.0.1:13933, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:717)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:342)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1262)
2020-03-18 17:40:35,027 [myid:] - INFO  [main:QuorumUtil@223] - Creating QuorumPeer 1; public port 13933
2020-03-18 17:40:35,028 [myid:] - INFO  [main:ServerCnxnFactory@169] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2020-03-18 17:40:35,028 [myid:] - WARN  [main:ServerCnxnFactory@309] - maxCnxns is not configured, using default value 0.
2020-03-18 17:40:35,028 [myid:] - INFO  [main:NIOServerCnxnFactory@666] - Configuring NIO connection handler with 10s sessionless connection timeout, 1 selector thread(s), 8 worker threads, and 64 kB direct buffers.
2020-03-18 17:40:35,028 [myid:] - INFO  [main:NIOServerCnxnFactory@674] - binding to port /127.0.0.1:13933
2020-03-18 17:40:35,028 [myid:] - INFO  [main:FileTxnSnapLog@124] - zookeeper.snapshot.trust.empty : false
2020-03-18 17:40:35,029 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:35,029 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:35,029 [myid:] - INFO  [main:ZKDatabase@132] - zookeeper.snapshotSizeFactor = 0.33
2020-03-18 17:40:35,029 [myid:] - INFO  [main:ZKDatabase@152] - zookeeper.commitLogCount=500
2020-03-18 17:40:35,029 [myid:] - WARN  [main:QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:40:35,030 [myid:] - INFO  [main:FileSnap@85] - Reading snapshot /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test1638769367983249916.junit.dir/version-2/snapshot.100000000
2020-03-18 17:40:35,030 [myid:] - INFO  [main:DataTree@1737] - The digest value is empty in snapshot
2020-03-18 17:40:35,034 [myid:] - INFO  [main:FileTxnSnapLog@363] - 342 txns loaded in 3 ms
2020-03-18 17:40:35,034 [myid:] - INFO  [main:ZKDatabase@289] - Snapshot loaded in 4 ms, highest zxid is 0x100000156, digest is 719901314523
2020-03-18 17:40:35,048 [myid:] - INFO  [main:QuorumPeer@2503] - Using 6000ms as the quorum cnxn socket timeout
2020-03-18 17:40:35,048 [myid:] - INFO  [main:QuorumCnxManager$Listener@906] - Election port bind maximum retries is 3
2020-03-18 17:40:35,049 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13933
2020-03-18 17:40:35,059 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13935:QuorumCnxManager$Listener$ListenerHandler@1047] - My election bind port: /127.0.0.1:13935
2020-03-18 17:40:35,059 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):QuorumPeer@1371] - LOOKING
2020-03-18 17:40:35,059 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):FastLeaderElection@931] - New election. My id = 1, proposed zxid=0x100000156
2020-03-18 17:40:35,069 [myid:] - INFO  [NIOWorkerThread-1:NIOServerCnxn@507] - Processing stat command from /127.0.0.1:54352
2020-03-18 17:40:35,069 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:1, n.state:LOOKING, n.leader:1, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x100000156, message format version:0x2, n.config version:0x0
2020-03-18 17:40:35,070 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13938:QuorumCnxManager$Listener$ListenerHandler@1052] - Received connection request /127.0.0.1:54353
2020-03-18 17:40:35,070 [myid:] - INFO  [WorkerSender[myid=1]:QuorumCnxManager@462] - Have smaller server identifier, so dropping the connection: (2, 1)
2020-03-18 17:40:35,070 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13935:QuorumCnxManager$Listener$ListenerHandler@1052] - Received connection request /127.0.0.1:54354
2020-03-18 17:40:35,070 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13941:QuorumCnxManager$Listener$ListenerHandler@1052] - Received connection request /127.0.0.1:54355
2020-03-18 17:40:35,070 [myid:] - INFO  [WorkerSender[myid=1]:QuorumCnxManager@462] - Have smaller server identifier, so dropping the connection: (3, 1)
2020-03-18 17:40:35,079 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13935:QuorumCnxManager$Listener$ListenerHandler@1052] - Received connection request /127.0.0.1:54356
2020-03-18 17:40:35,090 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:FOLLOWING; n.sid:1, n.state:LOOKING, n.leader:1, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x100000156, message format version:0x2, n.config version:0x0
2020-03-18 17:40:35,090 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:2, n.state:LOOKING, n.leader:3, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:35,110 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:3, n.state:LOOKING, n.leader:3, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:35,110 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LEADING; n.sid:1, n.state:LOOKING, n.leader:1, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x100000156, message format version:0x2, n.config version:0x0
2020-03-18 17:40:35,110 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:2, n.state:FOLLOWING, n.leader:3, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:35,111 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:3, n.state:LEADING, n.leader:3, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:35,111 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):QuorumPeer@857] - Peer state changed: following
2020-03-18 17:40:35,111 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):QuorumPeer@1453] - FOLLOWING
2020-03-18 17:40:35,111 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):ZooKeeperServer@1246] - minSessionTimeout set to 4000
2020-03-18 17:40:35,111 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):ZooKeeperServer@1255] - maxSessionTimeout set to 40000
2020-03-18 17:40:35,111 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):ResponseCache@45] - Response cache size is initialized with value 400.
2020-03-18 17:40:35,111 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):ResponseCache@45] - Response cache size is initialized with value 400.
2020-03-18 17:40:35,111 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):RequestPathMetricsCollector@111] - zookeeper.pathStats.slotCapacity = 60
2020-03-18 17:40:35,111 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):RequestPathMetricsCollector@112] - zookeeper.pathStats.slotDuration = 15
2020-03-18 17:40:35,111 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):RequestPathMetricsCollector@113] - zookeeper.pathStats.maxDepth = 6
2020-03-18 17:40:35,111 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):RequestPathMetricsCollector@114] - zookeeper.pathStats.initialDelay = 5
2020-03-18 17:40:35,111 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):RequestPathMetricsCollector@115] - zookeeper.pathStats.delay = 5
2020-03-18 17:40:35,111 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):RequestPathMetricsCollector@116] - zookeeper.pathStats.enabled = false
2020-03-18 17:40:35,112 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):ZooKeeperServer@1470] - The max bytes for all large requests are set to 104857600
2020-03-18 17:40:35,112 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):ZooKeeperServer@1484] - The large request threshold is set to -1
2020-03-18 17:40:35,112 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):ZooKeeperServer@329] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 clientPortListenBacklog -1 datadir /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test1638769367983249916.junit.dir/version-2 snapdir /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test1638769367983249916.junit.dir/version-2
2020-03-18 17:40:35,112 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):Follower@75] - FOLLOWING - LEADER ELECTION TOOK - 53 MS
2020-03-18 17:40:35,112 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):QuorumPeer@863] - Peer state changed: following - discovery
2020-03-18 17:40:35,113 [myid:] - INFO  [LeaderConnector-/127.0.0.1:13940:Learner$LeaderConnector@328] - Successfully connected to leader, using address: /127.0.0.1:13940
2020-03-18 17:40:35,131 [myid:] - INFO  [LearnerHandler-/127.0.0.1:54362:LearnerHandler@504] - Follower sid: 1 : info : 127.0.0.1:13934:13935:participant;127.0.0.1:13933
2020-03-18 17:40:35,131 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):QuorumPeer@863] - Peer state changed: following - synchronization
2020-03-18 17:40:35,131 [myid:] - INFO  [LearnerHandler-/127.0.0.1:54362:ZKDatabase@345] - On disk txn sync enabled with snapshotSizeFactor 0.33
2020-03-18 17:40:35,131 [myid:] - INFO  [LearnerHandler-/127.0.0.1:54362:LearnerHandler@800] - Synchronizing with Learner sid: 1 maxCommittedLog=0x1000001bc minCommittedLog=0x100000001 lastProcessedZxid=0x1000001bc peerLastZxid=0x100000156
2020-03-18 17:40:35,132 [myid:] - INFO  [LearnerHandler-/127.0.0.1:54362:LearnerHandler@864] - Using committedLog for peer sid: 1
2020-03-18 17:40:35,132 [myid:] - INFO  [LearnerHandler-/127.0.0.1:54362:LearnerHandler@972] - Sending DIFF zxid=0x1000001bc  for peer sid: 1
2020-03-18 17:40:35,161 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):Learner@509] - Getting a diff from the leader 0x1000001bc
2020-03-18 17:40:35,161 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):QuorumPeer@868] - Peer state changed: following - synchronization - diff
2020-03-18 17:40:35,172 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):Learner@575] - Got zxid 0x100000157 expected 0x1
2020-03-18 17:40:35,172 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):Learner@675] - Learner received NEWLEADER message
2020-03-18 17:40:35,182 [myid:127.0.0.1:13933] - INFO  [main-SendThread(127.0.0.1:13933):ClientCnxn$SendThread@1154] - Opening socket connection to server localhost/127.0.0.1:13933.
2020-03-18 17:40:35,182 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:40:35,182 [myid:127.0.0.1:13933] - INFO  [main-SendThread(127.0.0.1:13933):ClientCnxn$SendThread@1156] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2020-03-18 17:40:35,183 [myid:127.0.0.1:13933] - INFO  [main-SendThread(127.0.0.1:13933):ClientCnxn$SendThread@986] - Socket connection established, initiating session, client: /127.0.0.1:54363, server: localhost/127.0.0.1:13933
2020-03-18 17:40:35,183 [myid:] - WARN  [NIOWorkerThread-2:NIOServerCnxn@373] - Close of session 0x0
java.io.IOException: ZooKeeperServer not running
	at org.apache.zookeeper.server.NIOServerCnxn.readLength(NIOServerCnxn.java:544)
	at org.apache.zookeeper.server.NIOServerCnxn.doIO(NIOServerCnxn.java:332)
	at org.apache.zookeeper.server.NIOServerCnxnFactory$IOWorkRequest.doWork(NIOServerCnxnFactory.java:522)
	at org.apache.zookeeper.server.WorkerService$ScheduledWorkRequest.run(WorkerService.java:154)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2020-03-18 17:40:35,183 [myid:127.0.0.1:13933] - WARN  [main-SendThread(127.0.0.1:13933):ClientCnxn$SendThread@1272] - Session 0x100015e63de0000 for sever localhost/127.0.0.1:13933, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
EndOfStreamException: Unable to read additional data from server sessionid 0x100015e63de0000, likely server has closed socket
	at org.apache.zookeeper.ClientCnxnSocketNIO.doIO(ClientCnxnSocketNIO.java:75)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:348)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1262)
2020-03-18 17:40:35,203 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):Learner@659] - Learner received UPTODATE message
2020-03-18 17:40:35,213 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):QuorumPeer@868] - Peer state changed: following - synchronization
2020-03-18 17:40:35,213 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):CommitProcessor@476] - Configuring CommitProcessor with readBatchSize -1 commitBatchSize 1
2020-03-18 17:40:35,213 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):CommitProcessor@438] - Configuring CommitProcessor with 4 worker threads.
2020-03-18 17:40:35,233 [myid:] - INFO  [SyncThread:1:FileTxnLog@284] - Creating new log file: log.100000157
2020-03-18 17:40:35,233 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):QuorumPeer@863] - Peer state changed: following - broadcast
2020-03-18 17:40:35,321 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13933
2020-03-18 17:40:35,322 [myid:] - INFO  [NIOWorkerThread-3:NIOServerCnxn@507] - Processing stat command from /127.0.0.1:54366
2020-03-18 17:40:35,322 [myid:] - INFO  [NIOWorkerThread-3:StatCommand@52] - Stat command output
2020-03-18 17:40:35,322 [myid:] - INFO  [main:QuorumUtil@250] - Shutting down quorum peer QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled)
2020-03-18 17:40:35,322 [myid:] - INFO  [main:Follower@292] - shutdown Follower
2020-03-18 17:40:35,322 [myid:] - INFO  [main:LearnerZooKeeperServer@160] - Shutting down
2020-03-18 17:40:35,323 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):Follower@129] - Exception when following the leader
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:96)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:134)
	at org.apache.zookeeper.server.quorum.Learner.readPacket(Learner.java:182)
	at org.apache.zookeeper.server.quorum.Follower.followLeader(Follower.java:125)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:1455)
2020-03-18 17:40:35,323 [myid:] - ERROR [LearnerHandler-/127.0.0.1:54362:LearnerHandler@707] - Unexpected exception causing shutdown while sock still open
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:96)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:134)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:643)
2020-03-18 17:40:35,323 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):Follower@143] - Disconnected from leader (with address: /127.0.0.1:13940). Was connected for 193ms. Sync state: true
2020-03-18 17:40:35,323 [myid:] - WARN  [LearnerHandler-/127.0.0.1:54362:LearnerHandler@730] - ******* GOODBYE /127.0.0.1:54362 ********
2020-03-18 17:40:35,323 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):Follower@292] - shutdown Follower
2020-03-18 17:40:35,323 [myid:] - INFO  [main:ZooKeeperServer@784] - shutting down
2020-03-18 17:40:35,324 [myid:] - INFO  [main:RequestThrottler@244] - Shutting down
2020-03-18 17:40:35,326 [myid:] - INFO  [RequestThrottler:RequestThrottler@205] - Draining request throttler queue
2020-03-18 17:40:35,326 [myid:] - INFO  [RequestThrottler:RequestThrottler@181] - RequestThrottler shutdown. Dropped 0 requests
2020-03-18 17:40:35,326 [myid:] - INFO  [main:FollowerRequestProcessor@148] - Shutting down
2020-03-18 17:40:35,326 [myid:] - INFO  [main:CommitProcessor@617] - Shutting down
2020-03-18 17:40:35,326 [myid:] - INFO  [FollowerRequestProcessor:1:FollowerRequestProcessor@112] - FollowerRequestProcessor exited loop!
2020-03-18 17:40:35,327 [myid:] - INFO  [CommitProcessor:1:CommitProcessor@406] - CommitProcessor exited loop!
2020-03-18 17:40:35,326 [myid:] - INFO  [main:FinalRequestProcessor@662] - shutdown of request processor complete
2020-03-18 17:40:35,338 [myid:] - INFO  [main:SyncRequestProcessor@256] - Shutting down
2020-03-18 17:40:35,338 [myid:] - INFO  [SyncThread:1:SyncRequestProcessor@225] - SyncRequestProcessor exited!
2020-03-18 17:40:35,347 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):QuorumPeer@863] - Peer state changed: looking
2020-03-18 17:40:35,347 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):QuorumPeer@1501] - PeerState set to LOOKING
2020-03-18 17:40:35,347 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):QuorumPeer@1483] - QuorumPeer main thread exited
2020-03-18 17:40:35,347 [myid:] - INFO  [ConnnectionExpirer:NIOServerCnxnFactory$ConnectionExpirerThread@578] - ConnnectionExpirerThread interrupted
2020-03-18 17:40:35,357 [myid:] - INFO  [NIOServerCxnFactory.AcceptThread:/127.0.0.1:13933:NIOServerCnxnFactory$AcceptThread@209] - accept thread exitted run method
2020-03-18 17:40:35,357 [myid:] - INFO  [NIOServerCxnFactory.SelectorThread-0:NIOServerCnxnFactory$SelectorThread@411] - selector thread exitted run method
2020-03-18 17:40:35,367 [myid:] - INFO  [QuorumPeerListener:QuorumCnxManager$Listener@961] - Leaving listener
2020-03-18 17:40:35,377 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:40:35,398 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 2 my id = 1
2020-03-18 17:40:35,398 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 1, my id = 3
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:40:35,419 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:40:35,377 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 2, my id = 1
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:40:35,419 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:40:35,377 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 1, my id = 2
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:40:35,420 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:40:35,398 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:40:35,420 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 3 my id = 1
2020-03-18 17:40:35,398 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 3, my id = 1
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:40:35,420 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:40:35,420 [myid:] - INFO  [main:QuorumUtil@254] - Shutting down leader election QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled)
2020-03-18 17:40:35,421 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:40:35,421 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:40:35,431 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 1 my id = 3
2020-03-18 17:40:35,431 [myid:] - INFO  [main:QuorumUtil@259] - Waiting for QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled) to exit thread
2020-03-18 17:40:35,431 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 1 my id = 2
2020-03-18 17:40:35,432 [myid:] - INFO  [main:QuorumUtil@204] - Creating QuorumPeer 1; public port 13933
2020-03-18 17:40:35,432 [myid:] - INFO  [main:ServerCnxnFactory@169] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2020-03-18 17:40:35,432 [myid:] - WARN  [main:ServerCnxnFactory@309] - maxCnxns is not configured, using default value 0.
2020-03-18 17:40:35,432 [myid:] - INFO  [main:NIOServerCnxnFactory@666] - Configuring NIO connection handler with 10s sessionless connection timeout, 1 selector thread(s), 8 worker threads, and 64 kB direct buffers.
2020-03-18 17:40:35,432 [myid:] - INFO  [main:NIOServerCnxnFactory@674] - binding to port /127.0.0.1:13933
2020-03-18 17:40:35,433 [myid:] - INFO  [main:FileTxnSnapLog@124] - zookeeper.snapshot.trust.empty : false
2020-03-18 17:40:35,433 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:35,433 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:35,433 [myid:] - INFO  [main:ZKDatabase@132] - zookeeper.snapshotSizeFactor = 0.33
2020-03-18 17:40:35,434 [myid:] - INFO  [main:ZKDatabase@152] - zookeeper.commitLogCount=500
2020-03-18 17:40:35,434 [myid:] - WARN  [main:QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:40:35,435 [myid:] - INFO  [main:FileSnap@85] - Reading snapshot /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test1638769367983249916.junit.dir/version-2/snapshot.100000000
2020-03-18 17:40:35,435 [myid:] - INFO  [main:DataTree@1737] - The digest value is empty in snapshot
2020-03-18 17:40:35,440 [myid:] - INFO  [main:FileTxnSnapLog@363] - 444 txns loaded in 4 ms
2020-03-18 17:40:35,440 [myid:] - INFO  [main:ZKDatabase@289] - Snapshot loaded in 6 ms, highest zxid is 0x1000001bc, digest is 950482619741
2020-03-18 17:40:35,440 [myid:] - INFO  [main:QuorumPeer@2503] - Using 6000ms as the quorum cnxn socket timeout
2020-03-18 17:40:35,443 [myid:] - INFO  [main:QuorumCnxManager$Listener@906] - Election port bind maximum retries is 3
2020-03-18 17:40:35,444 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13935:QuorumCnxManager$Listener$ListenerHandler@1047] - My election bind port: /127.0.0.1:13935
2020-03-18 17:40:35,444 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13933
2020-03-18 17:40:35,445 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):QuorumPeer@1371] - LOOKING
2020-03-18 17:40:35,445 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):FastLeaderElection@931] - New election. My id = 1, proposed zxid=0x1000001bc
2020-03-18 17:40:35,445 [myid:] - INFO  [NIOWorkerThread-1:NIOServerCnxn@507] - Processing stat command from /127.0.0.1:54369
2020-03-18 17:40:35,446 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13938:QuorumCnxManager$Listener$ListenerHandler@1052] - Received connection request /127.0.0.1:54370
2020-03-18 17:40:35,446 [myid:] - INFO  [WorkerSender[myid=1]:QuorumCnxManager@462] - Have smaller server identifier, so dropping the connection: (2, 1)
2020-03-18 17:40:35,447 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13935:QuorumCnxManager$Listener$ListenerHandler@1052] - Received connection request /127.0.0.1:54371
2020-03-18 17:40:35,447 [myid:] - INFO  [WorkerSender[myid=1]:QuorumCnxManager@462] - Have smaller server identifier, so dropping the connection: (3, 1)
2020-03-18 17:40:35,447 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13941:QuorumCnxManager$Listener$ListenerHandler@1052] - Received connection request /127.0.0.1:54372
2020-03-18 17:40:35,447 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:1, n.state:LOOKING, n.leader:1, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x1000001bc, message format version:0x2, n.config version:0x0
2020-03-18 17:40:35,448 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13935:QuorumCnxManager$Listener$ListenerHandler@1052] - Received connection request /127.0.0.1:54373
2020-03-18 17:40:35,448 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:FOLLOWING; n.sid:1, n.state:LOOKING, n.leader:1, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x1000001bc, message format version:0x2, n.config version:0x0
2020-03-18 17:40:35,448 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:2, n.state:FOLLOWING, n.leader:3, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:35,449 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:2, n.state:FOLLOWING, n.leader:3, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:35,449 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LEADING; n.sid:1, n.state:LOOKING, n.leader:1, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x1000001bc, message format version:0x2, n.config version:0x0
2020-03-18 17:40:35,449 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:3, n.state:LEADING, n.leader:3, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:35,449 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):QuorumPeer@857] - Peer state changed: following
2020-03-18 17:40:35,449 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):QuorumPeer@1453] - FOLLOWING
2020-03-18 17:40:35,449 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:FOLLOWING; n.sid:3, n.state:LEADING, n.leader:3, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:35,450 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):ZooKeeperServer@1246] - minSessionTimeout set to 4000
2020-03-18 17:40:35,450 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):ZooKeeperServer@1255] - maxSessionTimeout set to 40000
2020-03-18 17:40:35,450 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):ResponseCache@45] - Response cache size is initialized with value 400.
2020-03-18 17:40:35,450 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):ResponseCache@45] - Response cache size is initialized with value 400.
2020-03-18 17:40:35,450 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):RequestPathMetricsCollector@111] - zookeeper.pathStats.slotCapacity = 60
2020-03-18 17:40:35,450 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):RequestPathMetricsCollector@112] - zookeeper.pathStats.slotDuration = 15
2020-03-18 17:40:35,450 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):RequestPathMetricsCollector@113] - zookeeper.pathStats.maxDepth = 6
2020-03-18 17:40:35,450 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):RequestPathMetricsCollector@114] - zookeeper.pathStats.initialDelay = 5
2020-03-18 17:40:35,450 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):RequestPathMetricsCollector@115] - zookeeper.pathStats.delay = 5
2020-03-18 17:40:35,450 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):RequestPathMetricsCollector@116] - zookeeper.pathStats.enabled = false
2020-03-18 17:40:35,450 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):ZooKeeperServer@1470] - The max bytes for all large requests are set to 104857600
2020-03-18 17:40:35,450 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):ZooKeeperServer@1484] - The large request threshold is set to -1
2020-03-18 17:40:35,450 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):ZooKeeperServer@329] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 clientPortListenBacklog -1 datadir /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test1638769367983249916.junit.dir/version-2 snapdir /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test1638769367983249916.junit.dir/version-2
2020-03-18 17:40:35,450 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):Follower@75] - FOLLOWING - LEADER ELECTION TOOK - 6 MS
2020-03-18 17:40:35,451 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):QuorumPeer@863] - Peer state changed: following - discovery
2020-03-18 17:40:35,451 [myid:] - INFO  [LeaderConnector-/127.0.0.1:13940:Learner$LeaderConnector@328] - Successfully connected to leader, using address: /127.0.0.1:13940
2020-03-18 17:40:35,454 [myid:] - INFO  [LearnerHandler-/127.0.0.1:54377:LearnerHandler@504] - Follower sid: 1 : info : 127.0.0.1:13934:13935:participant;127.0.0.1:13933
2020-03-18 17:40:35,454 [myid:] - INFO  [LearnerHandler-/127.0.0.1:54377:ZKDatabase@345] - On disk txn sync enabled with snapshotSizeFactor 0.33
2020-03-18 17:40:35,454 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):QuorumPeer@863] - Peer state changed: following - synchronization
2020-03-18 17:40:35,454 [myid:] - INFO  [LearnerHandler-/127.0.0.1:54377:LearnerHandler@800] - Synchronizing with Learner sid: 1 maxCommittedLog=0x1000001bd minCommittedLog=0x100000001 lastProcessedZxid=0x1000001bd peerLastZxid=0x1000001bc
2020-03-18 17:40:35,454 [myid:] - INFO  [LearnerHandler-/127.0.0.1:54377:LearnerHandler@864] - Using committedLog for peer sid: 1
2020-03-18 17:40:35,454 [myid:] - INFO  [LearnerHandler-/127.0.0.1:54377:LearnerHandler@972] - Sending DIFF zxid=0x1000001bd  for peer sid: 1
2020-03-18 17:40:35,455 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):Learner@509] - Getting a diff from the leader 0x1000001bd
2020-03-18 17:40:35,455 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):QuorumPeer@868] - Peer state changed: following - synchronization - diff
2020-03-18 17:40:35,456 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):Learner@575] - Got zxid 0x1000001bd expected 0x1
2020-03-18 17:40:35,456 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):Learner@675] - Learner received NEWLEADER message
2020-03-18 17:40:35,456 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:40:35,459 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):Learner@659] - Learner received UPTODATE message
2020-03-18 17:40:35,459 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):QuorumPeer@868] - Peer state changed: following - synchronization
2020-03-18 17:40:35,459 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):CommitProcessor@476] - Configuring CommitProcessor with readBatchSize -1 commitBatchSize 1
2020-03-18 17:40:35,459 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):CommitProcessor@438] - Configuring CommitProcessor with 4 worker threads.
2020-03-18 17:40:35,461 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):QuorumPeer@863] - Peer state changed: following - broadcast
2020-03-18 17:40:35,462 [myid:] - INFO  [SyncThread:1:FileTxnLog@284] - Creating new log file: log.1000001bd
2020-03-18 17:40:35,465 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):Follower@170] - Got zxid 0x1000001bf expected 0x1
2020-03-18 17:40:35,700 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13933
2020-03-18 17:40:35,701 [myid:] - INFO  [NIOWorkerThread-2:NIOServerCnxn@507] - Processing stat command from /127.0.0.1:54381
2020-03-18 17:40:35,701 [myid:] - INFO  [NIOWorkerThread-2:StatCommand@52] - Stat command output
2020-03-18 17:40:35,702 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@478] - Setting up server: 1
2020-03-18 17:40:36,754 [myid:127.0.0.1:13933] - INFO  [main-SendThread(127.0.0.1:13933):ClientCnxn$SendThread@1154] - Opening socket connection to server localhost/127.0.0.1:13933.
2020-03-18 17:40:36,754 [myid:127.0.0.1:13933] - INFO  [main-SendThread(127.0.0.1:13933):ClientCnxn$SendThread@1156] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2020-03-18 17:40:36,754 [myid:127.0.0.1:13933] - INFO  [main-SendThread(127.0.0.1:13933):ClientCnxn$SendThread@986] - Socket connection established, initiating session, client: /127.0.0.1:54402, server: localhost/127.0.0.1:13933
2020-03-18 17:40:36,755 [myid:] - INFO  [NIOWorkerThread-3:Learner@137] - Revalidating client: 0x100015e63de0000
2020-03-18 17:40:36,756 [myid:127.0.0.1:13933] - INFO  [main-SendThread(127.0.0.1:13933):ClientCnxn$SendThread@1420] - Session establishment complete on server localhost/127.0.0.1:13933, session id = 0x100015e63de0000, negotiated timeout = 30000
2020-03-18 17:40:36,989 [myid:127.0.0.1:13933] - INFO  [main-SendThread(127.0.0.1:13933):ClientCnxn$SendThread@1154] - Opening socket connection to server localhost/127.0.0.1:13933.
2020-03-18 17:40:36,989 [myid:127.0.0.1:13933] - INFO  [main-SendThread(127.0.0.1:13933):ClientCnxn$SendThread@1156] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2020-03-18 17:40:36,989 [myid:127.0.0.1:13933] - INFO  [main-SendThread(127.0.0.1:13933):ClientCnxn$SendThread@986] - Socket connection established, initiating session, client: /127.0.0.1:54408, server: localhost/127.0.0.1:13933
2020-03-18 17:40:36,990 [myid:] - INFO  [NIOWorkerThread-5:Learner@137] - Revalidating client: 0x100015e63de0001
2020-03-18 17:40:36,991 [myid:127.0.0.1:13933] - INFO  [main-SendThread(127.0.0.1:13933):ClientCnxn$SendThread@1420] - Session establishment complete on server localhost/127.0.0.1:13933, session id = 0x100015e63de0001, negotiated timeout = 30000
2020-03-18 17:40:38,072 [myid:] - INFO  [WorkerSender[myid=1]:FastLeaderElection$Messenger$WorkerSender@492] - WorkerSender is down
2020-03-18 17:40:38,111 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@458] - WorkerReceiver is down
2020-03-18 17:40:39,869 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@540] - Wait for pending requests: 0
2020-03-18 17:40:40,873 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@555] - Wait for server to sync
2020-03-18 17:40:40,873 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@594] - Verifying state
2020-03-18 17:40:40,873 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@615] - Validating ephemeral for session id 0x100015e63de0001
2020-03-18 17:40:40,880 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@615] - Validating ephemeral for session id 0x300015e63770000
2020-03-18 17:40:40,892 [myid:] - INFO  [RequestThrottler:QuorumZooKeeperServer@158] - Submitting global closeSession request for session 0x100015e63de0000
2020-03-18 17:40:40,896 [myid:127.0.0.1:13933] - WARN  [main-SendThread(127.0.0.1:13933):ClientCnxn$SendThread@1266] - An exception was thrown while closing send thread for session 0x100015e63de0000.
EndOfStreamException: Unable to read additional data from server sessionid 0x100015e63de0000, likely server has closed socket
	at org.apache.zookeeper.ClientCnxnSocketNIO.doIO(ClientCnxnSocketNIO.java:75)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:348)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1262)
2020-03-18 17:40:40,999 [myid:] - INFO  [main:ZooKeeper@1618] - Session: 0x100015e63de0000 closed
2020-03-18 17:40:40,999 [myid:] - INFO  [main-EventThread:ClientCnxn$EventThread@566] - EventThread shut down for session: 0x100015e63de0000
2020-03-18 17:40:41,000 [myid:] - INFO  [RequestThrottler:QuorumZooKeeperServer@158] - Submitting global closeSession request for session 0x100015e63de0001
2020-03-18 17:40:41,020 [myid:127.0.0.1:13933] - WARN  [main-SendThread(127.0.0.1:13933):ClientCnxn$SendThread@1266] - An exception was thrown while closing send thread for session 0x100015e63de0001.
EndOfStreamException: Unable to read additional data from server sessionid 0x100015e63de0001, likely server has closed socket
	at org.apache.zookeeper.ClientCnxnSocketNIO.doIO(ClientCnxnSocketNIO.java:75)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:348)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1262)
2020-03-18 17:40:41,126 [myid:] - INFO  [main:ZooKeeper@1618] - Session: 0x100015e63de0001 closed
2020-03-18 17:40:41,126 [myid:] - INFO  [main-EventThread:ClientCnxn$EventThread@566] - EventThread shut down for session: 0x100015e63de0001
2020-03-18 17:40:41,126 [myid:] - INFO  [RequestThrottler:QuorumZooKeeperServer@158] - Submitting global closeSession request for session 0x300015e63770000
2020-03-18 17:40:41,238 [myid:] - INFO  [main:ZooKeeper@1618] - Session: 0x300015e63770000 closed
2020-03-18 17:40:41,238 [myid:] - INFO  [main-EventThread:ClientCnxn$EventThread@566] - EventThread shut down for session: 0x300015e63770000
2020-03-18 17:40:41,238 [myid:] - INFO  [main:QuorumUtil@250] - Shutting down quorum peer QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled)
2020-03-18 17:40:41,238 [myid:] - INFO  [main:Follower@292] - shutdown Follower
2020-03-18 17:40:41,238 [myid:] - INFO  [main:LearnerZooKeeperServer@160] - Shutting down
2020-03-18 17:40:41,239 [myid:] - INFO  [main:ZooKeeperServer@784] - shutting down
2020-03-18 17:40:41,239 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):Follower@129] - Exception when following the leader
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:96)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:134)
	at org.apache.zookeeper.server.quorum.Learner.readPacket(Learner.java:182)
	at org.apache.zookeeper.server.quorum.Follower.followLeader(Follower.java:125)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:1455)
2020-03-18 17:40:41,239 [myid:] - INFO  [main:RequestThrottler@244] - Shutting down
2020-03-18 17:40:41,239 [myid:] - ERROR [LearnerHandler-/127.0.0.1:54377:LearnerHandler@707] - Unexpected exception causing shutdown while sock still open
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:96)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:134)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:643)
2020-03-18 17:40:41,239 [myid:] - INFO  [RequestThrottler:RequestThrottler@205] - Draining request throttler queue
2020-03-18 17:40:41,239 [myid:] - WARN  [LearnerHandler-/127.0.0.1:54377:LearnerHandler@730] - ******* GOODBYE /127.0.0.1:54377 ********
2020-03-18 17:40:41,239 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):Follower@143] - Disconnected from leader (with address: /127.0.0.1:13940). Was connected for 5787ms. Sync state: true
2020-03-18 17:40:41,239 [myid:] - INFO  [RequestThrottler:RequestThrottler@181] - RequestThrottler shutdown. Dropped 0 requests
2020-03-18 17:40:41,240 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):Follower@292] - shutdown Follower
2020-03-18 17:40:41,240 [myid:] - INFO  [main:FollowerRequestProcessor@148] - Shutting down
2020-03-18 17:40:41,240 [myid:] - INFO  [main:CommitProcessor@617] - Shutting down
2020-03-18 17:40:41,240 [myid:] - INFO  [FollowerRequestProcessor:1:FollowerRequestProcessor@112] - FollowerRequestProcessor exited loop!
2020-03-18 17:40:41,240 [myid:] - INFO  [main:FinalRequestProcessor@662] - shutdown of request processor complete
2020-03-18 17:40:41,240 [myid:] - INFO  [CommitProcessor:1:CommitProcessor@406] - CommitProcessor exited loop!
2020-03-18 17:40:41,253 [myid:] - INFO  [main:SyncRequestProcessor@256] - Shutting down
2020-03-18 17:40:41,253 [myid:] - INFO  [SyncThread:1:SyncRequestProcessor@225] - SyncRequestProcessor exited!
2020-03-18 17:40:41,253 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):QuorumPeer@863] - Peer state changed: looking
2020-03-18 17:40:41,253 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):QuorumPeer@1501] - PeerState set to LOOKING
2020-03-18 17:40:41,253 [myid:] - INFO  [ConnnectionExpirer:NIOServerCnxnFactory$ConnectionExpirerThread@578] - ConnnectionExpirerThread interrupted
2020-03-18 17:40:41,253 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled):QuorumPeer@1483] - QuorumPeer main thread exited
2020-03-18 17:40:41,254 [myid:] - INFO  [NIOServerCxnFactory.AcceptThread:/127.0.0.1:13933:NIOServerCnxnFactory$AcceptThread@209] - accept thread exitted run method
2020-03-18 17:40:41,254 [myid:] - INFO  [NIOServerCxnFactory.SelectorThread-0:NIOServerCnxnFactory$SelectorThread@411] - selector thread exitted run method
2020-03-18 17:40:41,254 [myid:] - INFO  [QuorumPeerListener:QuorumCnxManager$Listener@961] - Leaving listener
2020-03-18 17:40:41,255 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:40:41,255 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 2, my id = 1
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:40:41,255 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 1, my id = 2
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:40:41,256 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:40:41,256 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:40:41,256 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:40:41,255 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 3, my id = 1
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:40:41,256 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:40:41,255 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:40:41,255 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 1, my id = 3
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:40:41,256 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:40:41,255 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 2 my id = 1
2020-03-18 17:40:41,257 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:40:41,256 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 3 my id = 1
2020-03-18 17:40:41,256 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 1 my id = 2
2020-03-18 17:40:41,256 [myid:] - INFO  [main:QuorumUtil@254] - Shutting down leader election QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled)
2020-03-18 17:40:41,257 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 1 my id = 3
2020-03-18 17:40:41,257 [myid:] - INFO  [main:QuorumUtil@259] - Waiting for QuorumPeer[myid=1](plain=127.0.0.1:13933)(secure=disabled) to exit thread
2020-03-18 17:40:41,257 [myid:] - INFO  [main:QuorumUtil@250] - Shutting down quorum peer QuorumPeer[myid=2](plain=127.0.0.1:13936)(secure=disabled)
2020-03-18 17:40:41,257 [myid:] - INFO  [main:Follower@292] - shutdown Follower
2020-03-18 17:40:41,257 [myid:] - INFO  [main:LearnerZooKeeperServer@160] - Shutting down
2020-03-18 17:40:41,258 [myid:] - INFO  [main:ZooKeeperServer@784] - shutting down
2020-03-18 17:40:41,258 [myid:] - WARN  [QuorumPeer[myid=2](plain=127.0.0.1:13936)(secure=disabled):Follower@129] - Exception when following the leader
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:96)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:134)
	at org.apache.zookeeper.server.quorum.Learner.readPacket(Learner.java:182)
	at org.apache.zookeeper.server.quorum.Follower.followLeader(Follower.java:125)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:1455)
2020-03-18 17:40:41,258 [myid:] - ERROR [LearnerHandler-/127.0.0.1:53972:LearnerHandler@707] - Unexpected exception causing shutdown while sock still open
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:96)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:134)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:643)
2020-03-18 17:40:41,258 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13936)(secure=disabled):Follower@143] - Disconnected from leader (with address: /127.0.0.1:13940). Was connected for 13958ms. Sync state: true
2020-03-18 17:40:41,258 [myid:] - INFO  [main:RequestThrottler@244] - Shutting down
2020-03-18 17:40:41,258 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13936)(secure=disabled):Follower@292] - shutdown Follower
2020-03-18 17:40:41,258 [myid:] - WARN  [LearnerHandler-/127.0.0.1:53972:LearnerHandler@730] - ******* GOODBYE /127.0.0.1:53972 ********
2020-03-18 17:40:41,258 [myid:] - INFO  [RequestThrottler:RequestThrottler@205] - Draining request throttler queue
2020-03-18 17:40:41,259 [myid:] - INFO  [RequestThrottler:RequestThrottler@181] - RequestThrottler shutdown. Dropped 0 requests
2020-03-18 17:40:41,259 [myid:] - INFO  [main:FollowerRequestProcessor@148] - Shutting down
2020-03-18 17:40:41,259 [myid:] - INFO  [main:CommitProcessor@617] - Shutting down
2020-03-18 17:40:41,259 [myid:] - INFO  [FollowerRequestProcessor:2:FollowerRequestProcessor@112] - FollowerRequestProcessor exited loop!
2020-03-18 17:40:41,259 [myid:] - INFO  [CommitProcessor:2:CommitProcessor@406] - CommitProcessor exited loop!
2020-03-18 17:40:41,259 [myid:] - INFO  [main:FinalRequestProcessor@662] - shutdown of request processor complete
2020-03-18 17:40:41,273 [myid:] - INFO  [main:SyncRequestProcessor@256] - Shutting down
2020-03-18 17:40:41,273 [myid:] - INFO  [SyncThread:2:SyncRequestProcessor@225] - SyncRequestProcessor exited!
2020-03-18 17:40:41,273 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13936)(secure=disabled):QuorumPeer@863] - Peer state changed: looking
2020-03-18 17:40:41,274 [myid:] - INFO  [NIOServerCxnFactory.SelectorThread-0:NIOServerCnxnFactory$SelectorThread@411] - selector thread exitted run method
2020-03-18 17:40:41,273 [myid:] - INFO  [NIOServerCxnFactory.AcceptThread:/127.0.0.1:13936:NIOServerCnxnFactory$AcceptThread@209] - accept thread exitted run method
2020-03-18 17:40:41,273 [myid:] - INFO  [ConnnectionExpirer:NIOServerCnxnFactory$ConnectionExpirerThread@578] - ConnnectionExpirerThread interrupted
2020-03-18 17:40:41,274 [myid:] - WARN  [QuorumPeer[myid=2](plain=127.0.0.1:13936)(secure=disabled):QuorumPeer@1501] - PeerState set to LOOKING
2020-03-18 17:40:41,275 [myid:] - WARN  [QuorumPeer[myid=2](plain=127.0.0.1:13936)(secure=disabled):QuorumPeer@1483] - QuorumPeer main thread exited
2020-03-18 17:40:41,276 [myid:] - INFO  [QuorumPeerListener:QuorumCnxManager$Listener@961] - Leaving listener
2020-03-18 17:40:41,276 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 2, my id = 3
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:40:41,276 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:40:41,276 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:40:41,276 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 3, my id = 2
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:40:41,277 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:40:41,276 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 3 my id = 2
2020-03-18 17:40:41,276 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:40:41,276 [myid:] - INFO  [main:QuorumUtil@254] - Shutting down leader election QuorumPeer[myid=2](plain=127.0.0.1:13936)(secure=disabled)
2020-03-18 17:40:41,277 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 2 my id = 3
2020-03-18 17:40:41,277 [myid:] - INFO  [main:QuorumUtil@259] - Waiting for QuorumPeer[myid=2](plain=127.0.0.1:13936)(secure=disabled) to exit thread
2020-03-18 17:40:41,277 [myid:] - INFO  [main:QuorumUtil@250] - Shutting down quorum peer QuorumPeer[myid=3](plain=127.0.0.1:13939)(secure=disabled)
2020-03-18 17:40:41,278 [myid:] - INFO  [main:Leader@792] - Shutting down
2020-03-18 17:40:41,278 [myid:] - INFO  [main:Leader@798] - Shutdown called. For the reason quorum Peer shutdown
2020-03-18 17:40:41,278 [myid:] - INFO  [main:ZooKeeperServer@784] - shutting down
2020-03-18 17:40:41,278 [myid:] - WARN  [LearnerCnxAcceptorHandler-/127.0.0.1:13940:Leader$LearnerCnxAcceptor$LearnerCnxAcceptorHandler@523] - Exception while shutting down acceptor.
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.Leader$LearnerCnxAcceptor$LearnerCnxAcceptorHandler.acceptConnections(Leader.java:510)
	at org.apache.zookeeper.server.quorum.Leader$LearnerCnxAcceptor$LearnerCnxAcceptorHandler.run(Leader.java:493)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2020-03-18 17:40:41,278 [myid:] - INFO  [main:RequestThrottler@244] - Shutting down
2020-03-18 17:40:41,279 [myid:] - INFO  [RequestThrottler:RequestThrottler@205] - Draining request throttler queue
2020-03-18 17:40:41,279 [myid:] - INFO  [RequestThrottler:RequestThrottler@181] - RequestThrottler shutdown. Dropped 0 requests
2020-03-18 17:40:41,279 [myid:] - INFO  [main:SessionTrackerImpl@247] - Shutting down
2020-03-18 17:40:41,280 [myid:] - INFO  [main:LeaderRequestProcessor@79] - Shutting down
2020-03-18 17:40:41,280 [myid:] - INFO  [main:PrepRequestProcessor@1047] - Shutting down
2020-03-18 17:40:41,280 [myid:] - INFO  [main:ProposalRequestProcessor@87] - Shutting down
2020-03-18 17:40:41,280 [myid:] - INFO  [main:CommitProcessor@617] - Shutting down
2020-03-18 17:40:41,280 [myid:] - INFO  [ProcessThread(sid:3 cport:-1)::PrepRequestProcessor@159] - PrepRequestProcessor exited loop!
2020-03-18 17:40:41,280 [myid:] - INFO  [main:Leader$ToBeAppliedRequestProcessor@1106] - Shutting down
2020-03-18 17:40:41,280 [myid:] - INFO  [main:FinalRequestProcessor@662] - shutdown of request processor complete
2020-03-18 17:40:41,281 [myid:] - INFO  [main:SyncRequestProcessor@256] - Shutting down
2020-03-18 17:40:41,280 [myid:] - INFO  [CommitProcessor:3:CommitProcessor@406] - CommitProcessor exited loop!
2020-03-18 17:40:41,281 [myid:] - INFO  [SyncThread:3:SyncRequestProcessor@225] - SyncRequestProcessor exited!
2020-03-18 17:40:41,293 [myid:] - INFO  [NIOServerCxnFactory.AcceptThread:/127.0.0.1:13939:NIOServerCnxnFactory$AcceptThread@209] - accept thread exitted run method
2020-03-18 17:40:41,293 [myid:] - INFO  [NIOServerCxnFactory.SelectorThread-0:NIOServerCnxnFactory$SelectorThread@411] - selector thread exitted run method
2020-03-18 17:40:41,293 [myid:] - INFO  [ConnnectionExpirer:NIOServerCnxnFactory$ConnectionExpirerThread@578] - ConnnectionExpirerThread interrupted
2020-03-18 17:40:41,294 [myid:] - WARN  [QuorumPeer[myid=3](plain=127.0.0.1:13939)(secure=disabled):QuorumPeer@1471] - Unexpected exception
java.lang.InterruptedException
	at java.lang.Object.wait(Native Method)
	at org.apache.zookeeper.server.quorum.Leader.lead(Leader.java:730)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:1468)
2020-03-18 17:40:41,295 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13939)(secure=disabled):Leader@792] - Shutting down
2020-03-18 17:40:41,295 [myid:] - INFO  [QuorumPeerListener:QuorumCnxManager$Listener@961] - Leaving listener
2020-03-18 17:40:41,295 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13939)(secure=disabled):QuorumPeer@863] - Peer state changed: looking
2020-03-18 17:40:41,295 [myid:] - WARN  [QuorumPeer[myid=3](plain=127.0.0.1:13939)(secure=disabled):QuorumPeer@1501] - PeerState set to LOOKING
2020-03-18 17:40:41,295 [myid:] - WARN  [QuorumPeer[myid=3](plain=127.0.0.1:13939)(secure=disabled):QuorumPeer@1483] - QuorumPeer main thread exited
2020-03-18 17:40:41,296 [myid:] - INFO  [main:QuorumUtil@254] - Shutting down leader election QuorumPeer[myid=3](plain=127.0.0.1:13939)(secure=disabled)
2020-03-18 17:40:41,296 [myid:] - INFO  [main:QuorumUtil@259] - Waiting for QuorumPeer[myid=3](plain=127.0.0.1:13939)(secure=disabled) to exit thread
2020-03-18 17:40:41,296 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13933
2020-03-18 17:40:41,297 [myid:] - INFO  [main:QuorumUtil@243] - 127.0.0.1:13933 is no longer accepting client connections
2020-03-18 17:40:41,297 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13936
2020-03-18 17:40:41,297 [myid:] - INFO  [main:QuorumUtil@243] - 127.0.0.1:13936 is no longer accepting client connections
2020-03-18 17:40:41,297 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13939
2020-03-18 17:40:41,298 [myid:] - INFO  [main:QuorumUtil@243] - 127.0.0.1:13939 is no longer accepting client connections
2020-03-18 17:40:41,298 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@89] - Memory used 171236
2020-03-18 17:40:41,298 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@94] - Number of threads 42
2020-03-18 17:40:41,298 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@109] - FINISHED TEST METHOD testResyncByDiffAfterFollowerCrashes
2020-03-18 17:40:41,299 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@76] - Error count 866
2020-03-18 17:40:41,299 [myid:] - INFO  [main:ZKTestCase$1@96] - SUCCEEDED testResyncByDiffAfterFollowerCrashes
2020-03-18 17:40:41,299 [myid:] - INFO  [main:ZKTestCase$1@91] - FINISHED testResyncByDiffAfterFollowerCrashes
2020-03-18 17:40:41,299 [myid:] - INFO  [main:ZKTestCase$1@86] - STARTING testFollowerSendsLastZxid
2020-03-18 17:40:41,299 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@84] - RUNNING TEST METHOD testFollowerSendsLastZxid
2020-03-18 17:40:41,301 [myid:] - INFO  [main:JMXEnv@58] - connecting to addr service:jmx:rmi://127.0.0.1/stub/rO0ABXNyAC5qYXZheC5tYW5hZ2VtZW50LnJlbW90ZS5ybWkuUk1JU2VydmVySW1wbF9TdHViAAAAAAAAAAICAAB4cgAaamF2YS5ybWkuc2VydmVyLlJlbW90ZVN0dWLp/tzJi+FlGgIAAHhyABxqYXZhLnJtaS5zZXJ2ZXIuUmVtb3RlT2JqZWN002G0kQxhMx4DAAB4cHc3AAtVbmljYXN0UmVmMgAADDE3Mi4xOC4xNC4zNAAAypuqi/3Sf7aXOef4H6IAAAFw7QNGc4AbAHg=
2020-03-18 17:40:41,311 [myid:] - INFO  [main:PortAssignment@87] - Assigned port 13942 from range 13914 - 16606.
2020-03-18 17:40:41,311 [myid:] - INFO  [main:PortAssignment@87] - Assigned port 13943 from range 13914 - 16606.
2020-03-18 17:40:41,311 [myid:] - INFO  [main:PortAssignment@87] - Assigned port 13944 from range 13914 - 16606.
2020-03-18 17:40:41,313 [myid:] - INFO  [main:PortAssignment@87] - Assigned port 13945 from range 13914 - 16606.
2020-03-18 17:40:41,313 [myid:] - INFO  [main:PortAssignment@87] - Assigned port 13946 from range 13914 - 16606.
2020-03-18 17:40:41,313 [myid:] - INFO  [main:PortAssignment@87] - Assigned port 13947 from range 13914 - 16606.
2020-03-18 17:40:41,315 [myid:] - INFO  [main:PortAssignment@87] - Assigned port 13948 from range 13914 - 16606.
2020-03-18 17:40:41,315 [myid:] - INFO  [main:PortAssignment@87] - Assigned port 13949 from range 13914 - 16606.
2020-03-18 17:40:41,316 [myid:] - INFO  [main:PortAssignment@87] - Assigned port 13950 from range 13914 - 16606.
2020-03-18 17:40:41,316 [myid:] - INFO  [main:QuorumUtil@118] - Creating QuorumPeer 1; public port 13942
2020-03-18 17:40:41,317 [myid:] - INFO  [main:ServerCnxnFactory@169] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2020-03-18 17:40:41,317 [myid:] - WARN  [main:ServerCnxnFactory@309] - maxCnxns is not configured, using default value 0.
2020-03-18 17:40:41,317 [myid:] - INFO  [main:NIOServerCnxnFactory@666] - Configuring NIO connection handler with 10s sessionless connection timeout, 1 selector thread(s), 8 worker threads, and 64 kB direct buffers.
2020-03-18 17:40:41,317 [myid:] - INFO  [main:NIOServerCnxnFactory@674] - binding to port /127.0.0.1:13942
2020-03-18 17:40:41,318 [myid:] - INFO  [main:FileTxnSnapLog@124] - zookeeper.snapshot.trust.empty : false
2020-03-18 17:40:41,318 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:41,319 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:41,319 [myid:] - INFO  [main:ZKDatabase@132] - zookeeper.snapshotSizeFactor = 0.33
2020-03-18 17:40:41,320 [myid:] - INFO  [main:ZKDatabase@152] - zookeeper.commitLogCount=500
2020-03-18 17:40:41,320 [myid:] - WARN  [main:QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:40:41,321 [myid:] - INFO  [main:QuorumUtil@118] - Creating QuorumPeer 2; public port 13945
2020-03-18 17:40:41,321 [myid:] - INFO  [main:ServerCnxnFactory@169] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2020-03-18 17:40:41,321 [myid:] - WARN  [main:ServerCnxnFactory@309] - maxCnxns is not configured, using default value 0.
2020-03-18 17:40:41,321 [myid:] - INFO  [main:NIOServerCnxnFactory@666] - Configuring NIO connection handler with 10s sessionless connection timeout, 1 selector thread(s), 8 worker threads, and 64 kB direct buffers.
2020-03-18 17:40:41,322 [myid:] - INFO  [main:NIOServerCnxnFactory@674] - binding to port /127.0.0.1:13945
2020-03-18 17:40:41,322 [myid:] - INFO  [main:FileTxnSnapLog@124] - zookeeper.snapshot.trust.empty : false
2020-03-18 17:40:41,329 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:41,329 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:41,329 [myid:] - INFO  [main:ZKDatabase@132] - zookeeper.snapshotSizeFactor = 0.33
2020-03-18 17:40:41,329 [myid:] - INFO  [main:ZKDatabase@152] - zookeeper.commitLogCount=500
2020-03-18 17:40:41,329 [myid:] - WARN  [main:QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:40:41,329 [myid:] - INFO  [main:QuorumUtil@118] - Creating QuorumPeer 3; public port 13948
2020-03-18 17:40:41,329 [myid:] - INFO  [main:ServerCnxnFactory@169] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2020-03-18 17:40:41,329 [myid:] - WARN  [main:ServerCnxnFactory@309] - maxCnxns is not configured, using default value 0.
2020-03-18 17:40:41,330 [myid:] - INFO  [main:NIOServerCnxnFactory@666] - Configuring NIO connection handler with 10s sessionless connection timeout, 1 selector thread(s), 8 worker threads, and 64 kB direct buffers.
2020-03-18 17:40:41,330 [myid:] - INFO  [main:NIOServerCnxnFactory@674] - binding to port /127.0.0.1:13948
2020-03-18 17:40:41,330 [myid:] - INFO  [main:FileTxnSnapLog@124] - zookeeper.snapshot.trust.empty : false
2020-03-18 17:40:41,331 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:41,332 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:41,332 [myid:] - INFO  [main:ZKDatabase@132] - zookeeper.snapshotSizeFactor = 0.33
2020-03-18 17:40:41,332 [myid:] - INFO  [main:ZKDatabase@152] - zookeeper.commitLogCount=500
2020-03-18 17:40:41,333 [myid:] - WARN  [main:QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:40:41,333 [myid:] - INFO  [main:QuorumUtil@250] - Shutting down quorum peer QuorumPeer
2020-03-18 17:40:41,333 [myid:] - INFO  [main:QuorumUtil@257] - No election available to shutdown QuorumPeer
2020-03-18 17:40:41,333 [myid:] - INFO  [main:QuorumUtil@259] - Waiting for QuorumPeer to exit thread
2020-03-18 17:40:41,333 [myid:] - INFO  [main:QuorumUtil@250] - Shutting down quorum peer QuorumPeer
2020-03-18 17:40:41,333 [myid:] - INFO  [main:QuorumUtil@257] - No election available to shutdown QuorumPeer
2020-03-18 17:40:41,333 [myid:] - INFO  [main:QuorumUtil@259] - Waiting for QuorumPeer to exit thread
2020-03-18 17:40:41,334 [myid:] - INFO  [main:QuorumUtil@250] - Shutting down quorum peer QuorumPeer
2020-03-18 17:40:41,334 [myid:] - INFO  [main:QuorumUtil@257] - No election available to shutdown QuorumPeer
2020-03-18 17:40:41,334 [myid:] - INFO  [main:QuorumUtil@259] - Waiting for QuorumPeer to exit thread
2020-03-18 17:40:41,334 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13942
2020-03-18 17:40:41,335 [myid:] - INFO  [main:QuorumUtil@243] - 127.0.0.1:13942 is no longer accepting client connections
2020-03-18 17:40:41,335 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13945
2020-03-18 17:40:41,335 [myid:] - INFO  [main:QuorumUtil@243] - 127.0.0.1:13945 is no longer accepting client connections
2020-03-18 17:40:41,335 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13948
2020-03-18 17:40:41,336 [myid:] - INFO  [main:QuorumUtil@243] - 127.0.0.1:13948 is no longer accepting client connections
2020-03-18 17:40:41,336 [myid:] - INFO  [main:QuorumUtil@204] - Creating QuorumPeer 1; public port 13942
2020-03-18 17:40:41,336 [myid:] - INFO  [main:ServerCnxnFactory@169] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2020-03-18 17:40:41,336 [myid:] - WARN  [main:ServerCnxnFactory@309] - maxCnxns is not configured, using default value 0.
2020-03-18 17:40:41,336 [myid:] - INFO  [main:NIOServerCnxnFactory@666] - Configuring NIO connection handler with 10s sessionless connection timeout, 1 selector thread(s), 8 worker threads, and 64 kB direct buffers.
2020-03-18 17:40:41,337 [myid:] - INFO  [main:NIOServerCnxnFactory@674] - binding to port /127.0.0.1:13942
2020-03-18 17:40:41,337 [myid:] - INFO  [main:FileTxnSnapLog@124] - zookeeper.snapshot.trust.empty : false
2020-03-18 17:40:41,338 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:41,338 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:41,338 [myid:] - INFO  [main:ZKDatabase@132] - zookeeper.snapshotSizeFactor = 0.33
2020-03-18 17:40:41,338 [myid:] - INFO  [main:ZKDatabase@152] - zookeeper.commitLogCount=500
2020-03-18 17:40:41,338 [myid:] - WARN  [main:QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:40:41,339 [myid:] - INFO  [main:FileTxnSnapLog@251] - Initialize file found, an empty database will not block voting participation
2020-03-18 17:40:41,340 [myid:] - INFO  [main:FileTxnSnapLog@470] - Snapshotting: 0x0 to /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test6399850577139094946.junit.dir/version-2/snapshot.0
2020-03-18 17:40:41,341 [myid:] - INFO  [main:ZKDatabase@289] - Snapshot loaded in 2 ms, highest zxid is 0x0, digest is 1371985504
2020-03-18 17:40:41,341 [myid:] - INFO  [main:QuorumPeer@1102] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2020-03-18 17:40:41,343 [myid:] - INFO  [main:QuorumPeer@1122] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2020-03-18 17:40:41,344 [myid:] - INFO  [main:QuorumPeer@2503] - Using 6000ms as the quorum cnxn socket timeout
2020-03-18 17:40:41,345 [myid:] - INFO  [main:QuorumCnxManager$Listener@906] - Election port bind maximum retries is 3
2020-03-18 17:40:41,345 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13944:QuorumCnxManager$Listener$ListenerHandler@1047] - My election bind port: /127.0.0.1:13944
2020-03-18 17:40:41,346 [myid:] - INFO  [main:QuorumUtil@146] - Started QuorumPeer 1
2020-03-18 17:40:41,346 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13942)(secure=disabled):QuorumPeer@1371] - LOOKING
2020-03-18 17:40:41,347 [myid:] - INFO  [main:QuorumUtil@204] - Creating QuorumPeer 2; public port 13945
2020-03-18 17:40:41,348 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13942)(secure=disabled):FastLeaderElection@931] - New election. My id = 1, proposed zxid=0x0
2020-03-18 17:40:41,348 [myid:] - INFO  [main:ServerCnxnFactory@169] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2020-03-18 17:40:41,348 [myid:] - WARN  [main:ServerCnxnFactory@309] - maxCnxns is not configured, using default value 0.
2020-03-18 17:40:41,349 [myid:] - INFO  [main:NIOServerCnxnFactory@666] - Configuring NIO connection handler with 10s sessionless connection timeout, 1 selector thread(s), 8 worker threads, and 64 kB direct buffers.
2020-03-18 17:40:41,349 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@716] - Cannot open channel to 2 at election address /127.0.0.1:13947
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:677)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:748)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:644)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:503)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:487)
	at java.lang.Thread.run(Thread.java:748)
2020-03-18 17:40:41,349 [myid:] - INFO  [main:NIOServerCnxnFactory@674] - binding to port /127.0.0.1:13945
2020-03-18 17:40:41,349 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@716] - Cannot open channel to 3 at election address /127.0.0.1:13950
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:677)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:748)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:644)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:503)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:487)
	at java.lang.Thread.run(Thread.java:748)
2020-03-18 17:40:41,349 [myid:] - INFO  [main:FileTxnSnapLog@124] - zookeeper.snapshot.trust.empty : false
2020-03-18 17:40:41,349 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:1, n.state:LOOKING, n.leader:1, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:41,350 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:41,350 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:41,350 [myid:] - INFO  [main:ZKDatabase@132] - zookeeper.snapshotSizeFactor = 0.33
2020-03-18 17:40:41,350 [myid:] - INFO  [main:ZKDatabase@152] - zookeeper.commitLogCount=500
2020-03-18 17:40:41,351 [myid:] - WARN  [main:QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:40:41,351 [myid:] - INFO  [main:FileTxnSnapLog@251] - Initialize file found, an empty database will not block voting participation
2020-03-18 17:40:41,351 [myid:] - INFO  [main:FileTxnSnapLog@470] - Snapshotting: 0x0 to /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test1920209834666259842.junit.dir/version-2/snapshot.0
2020-03-18 17:40:41,352 [myid:] - INFO  [main:ZKDatabase@289] - Snapshot loaded in 1 ms, highest zxid is 0x0, digest is 1371985504
2020-03-18 17:40:41,352 [myid:] - INFO  [main:QuorumPeer@1102] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2020-03-18 17:40:41,354 [myid:] - INFO  [main:QuorumPeer@1122] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2020-03-18 17:40:41,356 [myid:] - INFO  [main:QuorumPeer@2503] - Using 6000ms as the quorum cnxn socket timeout
2020-03-18 17:40:41,356 [myid:] - INFO  [main:QuorumCnxManager$Listener@906] - Election port bind maximum retries is 3
2020-03-18 17:40:41,357 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13947:QuorumCnxManager$Listener$ListenerHandler@1047] - My election bind port: /127.0.0.1:13947
2020-03-18 17:40:41,357 [myid:] - INFO  [main:QuorumUtil@146] - Started QuorumPeer 2
2020-03-18 17:40:41,358 [myid:] - INFO  [main:QuorumUtil@204] - Creating QuorumPeer 3; public port 13948
2020-03-18 17:40:41,358 [myid:] - INFO  [main:ServerCnxnFactory@169] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2020-03-18 17:40:41,358 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13945)(secure=disabled):QuorumPeer@1371] - LOOKING
2020-03-18 17:40:41,358 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13945)(secure=disabled):FastLeaderElection@931] - New election. My id = 2, proposed zxid=0x0
2020-03-18 17:40:41,358 [myid:] - WARN  [main:ServerCnxnFactory@309] - maxCnxns is not configured, using default value 0.
2020-03-18 17:40:41,359 [myid:] - INFO  [main:NIOServerCnxnFactory@666] - Configuring NIO connection handler with 10s sessionless connection timeout, 1 selector thread(s), 8 worker threads, and 64 kB direct buffers.
2020-03-18 17:40:41,359 [myid:] - INFO  [main:NIOServerCnxnFactory@674] - binding to port /127.0.0.1:13948
2020-03-18 17:40:41,359 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13944:QuorumCnxManager$Listener$ListenerHandler@1052] - Received connection request /127.0.0.1:54468
2020-03-18 17:40:41,359 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:2, n.state:LOOKING, n.leader:2, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:41,360 [myid:] - INFO  [main:FileTxnSnapLog@124] - zookeeper.snapshot.trust.empty : false
2020-03-18 17:40:41,361 [myid:] - WARN  [WorkerSender[myid=2]:QuorumCnxManager@716] - Cannot open channel to 3 at election address /127.0.0.1:13950
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:677)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:748)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:644)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:503)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:487)
	at java.lang.Thread.run(Thread.java:748)
2020-03-18 17:40:41,361 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:2, n.state:LOOKING, n.leader:2, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:41,361 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:1, n.state:LOOKING, n.leader:1, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:41,362 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:1, n.state:LOOKING, n.leader:2, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:41,362 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:1, n.state:LOOKING, n.leader:2, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:41,362 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@716] - Cannot open channel to 3 at election address /127.0.0.1:13950
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:677)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:748)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:644)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:503)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:487)
	at java.lang.Thread.run(Thread.java:748)
2020-03-18 17:40:41,362 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:41,363 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:41,363 [myid:] - INFO  [main:ZKDatabase@132] - zookeeper.snapshotSizeFactor = 0.33
2020-03-18 17:40:41,363 [myid:] - INFO  [main:ZKDatabase@152] - zookeeper.commitLogCount=500
2020-03-18 17:40:41,363 [myid:] - WARN  [main:QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:40:41,363 [myid:] - INFO  [main:FileTxnSnapLog@251] - Initialize file found, an empty database will not block voting participation
2020-03-18 17:40:41,364 [myid:] - INFO  [main:FileTxnSnapLog@470] - Snapshotting: 0x0 to /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test7870582493562124788.junit.dir/version-2/snapshot.0
2020-03-18 17:40:41,365 [myid:] - INFO  [main:ZKDatabase@289] - Snapshot loaded in 2 ms, highest zxid is 0x0, digest is 1371985504
2020-03-18 17:40:41,365 [myid:] - INFO  [main:QuorumPeer@1102] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2020-03-18 17:40:41,368 [myid:] - INFO  [main:QuorumPeer@1122] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2020-03-18 17:40:41,373 [myid:] - INFO  [main:QuorumPeer@2503] - Using 6000ms as the quorum cnxn socket timeout
2020-03-18 17:40:41,373 [myid:] - INFO  [main:QuorumCnxManager$Listener@906] - Election port bind maximum retries is 3
2020-03-18 17:40:41,374 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13950:QuorumCnxManager$Listener$ListenerHandler@1047] - My election bind port: /127.0.0.1:13950
2020-03-18 17:40:41,374 [myid:] - INFO  [main:QuorumUtil@146] - Started QuorumPeer 3
2020-03-18 17:40:41,375 [myid:] - INFO  [main:QuorumUtil@149] - Checking ports 127.0.0.1:13942,127.0.0.1:13945,127.0.0.1:13948
2020-03-18 17:40:41,375 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13942
2020-03-18 17:40:41,375 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13948)(secure=disabled):QuorumPeer@1371] - LOOKING
2020-03-18 17:40:41,375 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13948)(secure=disabled):FastLeaderElection@931] - New election. My id = 3, proposed zxid=0x0
2020-03-18 17:40:41,376 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13944:QuorumCnxManager$Listener$ListenerHandler@1052] - Received connection request /127.0.0.1:54473
2020-03-18 17:40:41,376 [myid:] - INFO  [NIOWorkerThread-1:NIOServerCnxn@507] - Processing stat command from /127.0.0.1:54472
2020-03-18 17:40:41,377 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13947:QuorumCnxManager$Listener$ListenerHandler@1052] - Received connection request /127.0.0.1:54474
2020-03-18 17:40:41,377 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:3, n.state:LOOKING, n.leader:3, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:41,378 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:1, n.state:LOOKING, n.leader:3, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:41,378 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:1, n.state:LOOKING, n.leader:3, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:41,378 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:1, n.state:LOOKING, n.leader:2, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:41,379 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:2, n.state:LOOKING, n.leader:2, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:41,379 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:3, n.state:LOOKING, n.leader:3, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:41,379 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:3, n.state:LOOKING, n.leader:3, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:41,379 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:1, n.state:LOOKING, n.leader:3, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:41,379 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:2, n.state:LOOKING, n.leader:3, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:41,380 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:2, n.state:LOOKING, n.leader:3, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:41,380 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:2, n.state:LOOKING, n.leader:3, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:41,452 [myid:] - INFO  [WorkerSender[myid=2]:FastLeaderElection$Messenger$WorkerSender@492] - WorkerSender is down
2020-03-18 17:40:41,452 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection$Messenger$WorkerReceiver@458] - WorkerReceiver is down
2020-03-18 17:40:41,452 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@458] - WorkerReceiver is down
2020-03-18 17:40:41,452 [myid:] - INFO  [WorkerSender[myid=3]:FastLeaderElection$Messenger$WorkerSender@492] - WorkerSender is down
2020-03-18 17:40:41,452 [myid:] - INFO  [WorkerSender[myid=1]:FastLeaderElection$Messenger$WorkerSender@492] - WorkerSender is down
2020-03-18 17:40:41,455 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@458] - WorkerReceiver is down
2020-03-18 17:40:41,586 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13948)(secure=disabled):QuorumPeer@857] - Peer state changed: leading
2020-03-18 17:40:41,586 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13942)(secure=disabled):QuorumPeer@857] - Peer state changed: following
2020-03-18 17:40:41,586 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13945)(secure=disabled):QuorumPeer@857] - Peer state changed: following
2020-03-18 17:40:41,586 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13942)(secure=disabled):QuorumPeer@1453] - FOLLOWING
2020-03-18 17:40:41,586 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13948)(secure=disabled):QuorumPeer@1465] - LEADING
2020-03-18 17:40:41,587 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13942)(secure=disabled):ZooKeeperServer@1246] - minSessionTimeout set to 4000
2020-03-18 17:40:41,587 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13945)(secure=disabled):QuorumPeer@1453] - FOLLOWING
2020-03-18 17:40:41,587 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13942)(secure=disabled):ZooKeeperServer@1255] - maxSessionTimeout set to 40000
2020-03-18 17:40:41,587 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13948)(secure=disabled):ZooKeeperServer@1246] - minSessionTimeout set to 4000
2020-03-18 17:40:41,587 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13948)(secure=disabled):ZooKeeperServer@1255] - maxSessionTimeout set to 40000
2020-03-18 17:40:41,587 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13942)(secure=disabled):ResponseCache@45] - Response cache size is initialized with value 400.
2020-03-18 17:40:41,587 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13942)(secure=disabled):ResponseCache@45] - Response cache size is initialized with value 400.
2020-03-18 17:40:41,587 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13945)(secure=disabled):ZooKeeperServer@1246] - minSessionTimeout set to 4000
2020-03-18 17:40:41,587 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13945)(secure=disabled):ZooKeeperServer@1255] - maxSessionTimeout set to 40000
2020-03-18 17:40:41,587 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13945)(secure=disabled):ResponseCache@45] - Response cache size is initialized with value 400.
2020-03-18 17:40:41,587 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13945)(secure=disabled):ResponseCache@45] - Response cache size is initialized with value 400.
2020-03-18 17:40:41,587 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13942)(secure=disabled):RequestPathMetricsCollector@111] - zookeeper.pathStats.slotCapacity = 60
2020-03-18 17:40:41,587 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13942)(secure=disabled):RequestPathMetricsCollector@112] - zookeeper.pathStats.slotDuration = 15
2020-03-18 17:40:41,587 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13942)(secure=disabled):RequestPathMetricsCollector@113] - zookeeper.pathStats.maxDepth = 6
2020-03-18 17:40:41,587 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13942)(secure=disabled):RequestPathMetricsCollector@114] - zookeeper.pathStats.initialDelay = 5
2020-03-18 17:40:41,587 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13942)(secure=disabled):RequestPathMetricsCollector@115] - zookeeper.pathStats.delay = 5
2020-03-18 17:40:41,588 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13942)(secure=disabled):RequestPathMetricsCollector@116] - zookeeper.pathStats.enabled = false
2020-03-18 17:40:41,588 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13942)(secure=disabled):ZooKeeperServer@1470] - The max bytes for all large requests are set to 104857600
2020-03-18 17:40:41,588 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13942)(secure=disabled):ZooKeeperServer@1484] - The large request threshold is set to -1
2020-03-18 17:40:41,588 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13942)(secure=disabled):ZooKeeperServer@329] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 clientPortListenBacklog -1 datadir /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test6399850577139094946.junit.dir/version-2 snapdir /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test6399850577139094946.junit.dir/version-2
2020-03-18 17:40:41,587 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13948)(secure=disabled):ResponseCache@45] - Response cache size is initialized with value 400.
2020-03-18 17:40:41,588 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13942)(secure=disabled):Follower@75] - FOLLOWING - LEADER ELECTION TOOK - 240 MS
2020-03-18 17:40:41,587 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13945)(secure=disabled):RequestPathMetricsCollector@111] - zookeeper.pathStats.slotCapacity = 60
2020-03-18 17:40:41,588 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13945)(secure=disabled):RequestPathMetricsCollector@112] - zookeeper.pathStats.slotDuration = 15
2020-03-18 17:40:41,588 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13945)(secure=disabled):RequestPathMetricsCollector@113] - zookeeper.pathStats.maxDepth = 6
2020-03-18 17:40:41,588 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13945)(secure=disabled):RequestPathMetricsCollector@114] - zookeeper.pathStats.initialDelay = 5
2020-03-18 17:40:41,588 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13945)(secure=disabled):RequestPathMetricsCollector@115] - zookeeper.pathStats.delay = 5
2020-03-18 17:40:41,588 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13945)(secure=disabled):RequestPathMetricsCollector@116] - zookeeper.pathStats.enabled = false
2020-03-18 17:40:41,588 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13948)(secure=disabled):ResponseCache@45] - Response cache size is initialized with value 400.
2020-03-18 17:40:41,588 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13945)(secure=disabled):ZooKeeperServer@1470] - The max bytes for all large requests are set to 104857600
2020-03-18 17:40:41,588 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13942)(secure=disabled):QuorumPeer@863] - Peer state changed: following - discovery
2020-03-18 17:40:41,588 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13945)(secure=disabled):ZooKeeperServer@1484] - The large request threshold is set to -1
2020-03-18 17:40:41,588 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13948)(secure=disabled):RequestPathMetricsCollector@111] - zookeeper.pathStats.slotCapacity = 60
2020-03-18 17:40:41,589 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13948)(secure=disabled):RequestPathMetricsCollector@112] - zookeeper.pathStats.slotDuration = 15
2020-03-18 17:40:41,589 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13948)(secure=disabled):RequestPathMetricsCollector@113] - zookeeper.pathStats.maxDepth = 6
2020-03-18 17:40:41,589 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13948)(secure=disabled):RequestPathMetricsCollector@114] - zookeeper.pathStats.initialDelay = 5
2020-03-18 17:40:41,589 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13948)(secure=disabled):RequestPathMetricsCollector@115] - zookeeper.pathStats.delay = 5
2020-03-18 17:40:41,589 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13948)(secure=disabled):RequestPathMetricsCollector@116] - zookeeper.pathStats.enabled = false
2020-03-18 17:40:41,588 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13945)(secure=disabled):ZooKeeperServer@329] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 clientPortListenBacklog -1 datadir /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test1920209834666259842.junit.dir/version-2 snapdir /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test1920209834666259842.junit.dir/version-2
2020-03-18 17:40:41,589 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13948)(secure=disabled):ZooKeeperServer@1470] - The max bytes for all large requests are set to 104857600
2020-03-18 17:40:41,589 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13945)(secure=disabled):Follower@75] - FOLLOWING - LEADER ELECTION TOOK - 231 MS
2020-03-18 17:40:41,589 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13948)(secure=disabled):ZooKeeperServer@1484] - The large request threshold is set to -1
2020-03-18 17:40:41,589 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13948)(secure=disabled):ZooKeeperServer@329] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 clientPortListenBacklog -1 datadir /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test7870582493562124788.junit.dir/version-2 snapdir /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test7870582493562124788.junit.dir/version-2
2020-03-18 17:40:41,589 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13945)(secure=disabled):QuorumPeer@863] - Peer state changed: following - discovery
2020-03-18 17:40:41,589 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13948)(secure=disabled):Leader@581] - LEADING - LEADER ELECTION TOOK - 214 MS
2020-03-18 17:40:41,589 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13948)(secure=disabled):QuorumPeer@863] - Peer state changed: leading - discovery
2020-03-18 17:40:41,589 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13948)(secure=disabled):FileTxnSnapLog@470] - Snapshotting: 0x0 to /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test7870582493562124788.junit.dir/version-2/snapshot.0
2020-03-18 17:40:41,590 [myid:] - INFO  [LeaderConnector-/127.0.0.1:13949:Learner$LeaderConnector@328] - Successfully connected to leader, using address: /127.0.0.1:13949
2020-03-18 17:40:41,591 [myid:] - INFO  [LeaderConnector-/127.0.0.1:13949:Learner$LeaderConnector@328] - Successfully connected to leader, using address: /127.0.0.1:13949
2020-03-18 17:40:41,592 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13948)(secure=disabled):ZooKeeperServer@519] - Snapshot taken in 2 ms
2020-03-18 17:40:41,593 [myid:] - INFO  [LearnerHandler-/127.0.0.1:54484:LearnerHandler@504] - Follower sid: 2 : info : 127.0.0.1:13946:13947:participant;127.0.0.1:13945
2020-03-18 17:40:41,593 [myid:] - INFO  [LearnerHandler-/127.0.0.1:54482:LearnerHandler@504] - Follower sid: 1 : info : 127.0.0.1:13943:13944:participant;127.0.0.1:13942
2020-03-18 17:40:41,595 [myid:] - WARN  [QuorumPeer[myid=3](plain=127.0.0.1:13948)(secure=disabled):QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:40:41,596 [myid:] - INFO  [LearnerHandler-/127.0.0.1:54484:ZKDatabase@345] - On disk txn sync enabled with snapshotSizeFactor 0.33
2020-03-18 17:40:41,596 [myid:] - INFO  [LearnerHandler-/127.0.0.1:54482:ZKDatabase@345] - On disk txn sync enabled with snapshotSizeFactor 0.33
2020-03-18 17:40:41,596 [myid:] - INFO  [LearnerHandler-/127.0.0.1:54484:LearnerHandler@800] - Synchronizing with Learner sid: 2 maxCommittedLog=0x0 minCommittedLog=0x0 lastProcessedZxid=0x0 peerLastZxid=0x0
2020-03-18 17:40:41,596 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13942)(secure=disabled):QuorumPeer@863] - Peer state changed: following - synchronization
2020-03-18 17:40:41,596 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13945)(secure=disabled):QuorumPeer@863] - Peer state changed: following - synchronization
2020-03-18 17:40:41,597 [myid:] - INFO  [LearnerHandler-/127.0.0.1:54482:LearnerHandler@800] - Synchronizing with Learner sid: 1 maxCommittedLog=0x0 minCommittedLog=0x0 lastProcessedZxid=0x0 peerLastZxid=0x0
2020-03-18 17:40:41,597 [myid:] - INFO  [LearnerHandler-/127.0.0.1:54484:LearnerHandler@845] - Sending DIFF zxid=0x0 for peer sid: 2
2020-03-18 17:40:41,597 [myid:] - INFO  [LearnerHandler-/127.0.0.1:54482:LearnerHandler@845] - Sending DIFF zxid=0x0 for peer sid: 1
2020-03-18 17:40:41,598 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13945)(secure=disabled):Learner@509] - Getting a diff from the leader 0x0
2020-03-18 17:40:41,599 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13942)(secure=disabled):Learner@509] - Getting a diff from the leader 0x0
2020-03-18 17:40:41,599 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13945)(secure=disabled):QuorumPeer@868] - Peer state changed: following - synchronization - diff
2020-03-18 17:40:41,598 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13948)(secure=disabled):QuorumPeer@863] - Peer state changed: leading - synchronization
2020-03-18 17:40:41,599 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13942)(secure=disabled):QuorumPeer@868] - Peer state changed: following - synchronization - diff
2020-03-18 17:40:41,599 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13945)(secure=disabled):Learner@675] - Learner received NEWLEADER message
2020-03-18 17:40:41,599 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13942)(secure=disabled):Learner@675] - Learner received NEWLEADER message
2020-03-18 17:40:41,599 [myid:] - WARN  [QuorumPeer[myid=2](plain=127.0.0.1:13945)(secure=disabled):QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:40:41,600 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13942)(secure=disabled):QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:40:41,601 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13948)(secure=disabled):Leader@1501] - Have quorum of supporters, sids: [[2, 3],[2, 3]]; starting up and setting last processed zxid: 0x100000000
2020-03-18 17:40:41,602 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13948)(secure=disabled):CommitProcessor@476] - Configuring CommitProcessor with readBatchSize -1 commitBatchSize 1
2020-03-18 17:40:41,602 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13948)(secure=disabled):CommitProcessor@438] - Configuring CommitProcessor with 4 worker threads.
2020-03-18 17:40:41,602 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13948)(secure=disabled):ContainerManager@83] - Using checkIntervalMs=60000 maxPerMinute=10000 maxNeverUsedIntervalMs=0
2020-03-18 17:40:41,603 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13948)(secure=disabled):QuorumPeer@863] - Peer state changed: leading - broadcast
2020-03-18 17:40:41,603 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13945)(secure=disabled):Learner@659] - Learner received UPTODATE message
2020-03-18 17:40:41,603 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13942)(secure=disabled):Learner@659] - Learner received UPTODATE message
2020-03-18 17:40:41,603 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13945)(secure=disabled):QuorumPeer@868] - Peer state changed: following - synchronization
2020-03-18 17:40:41,603 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13942)(secure=disabled):QuorumPeer@868] - Peer state changed: following - synchronization
2020-03-18 17:40:41,603 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13945)(secure=disabled):CommitProcessor@476] - Configuring CommitProcessor with readBatchSize -1 commitBatchSize 1
2020-03-18 17:40:41,603 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13945)(secure=disabled):CommitProcessor@438] - Configuring CommitProcessor with 4 worker threads.
2020-03-18 17:40:41,603 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13942)(secure=disabled):CommitProcessor@476] - Configuring CommitProcessor with readBatchSize -1 commitBatchSize 1
2020-03-18 17:40:41,603 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13942)(secure=disabled):CommitProcessor@438] - Configuring CommitProcessor with 4 worker threads.
2020-03-18 17:40:41,604 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13945)(secure=disabled):QuorumPeer@863] - Peer state changed: following - broadcast
2020-03-18 17:40:41,604 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13942)(secure=disabled):QuorumPeer@863] - Peer state changed: following - broadcast
2020-03-18 17:40:41,628 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13942
2020-03-18 17:40:41,629 [myid:] - INFO  [NIOWorkerThread-2:NIOServerCnxn@507] - Processing stat command from /127.0.0.1:54485
2020-03-18 17:40:41,629 [myid:] - INFO  [NIOWorkerThread-2:StatCommand@52] - Stat command output
2020-03-18 17:40:41,630 [myid:] - INFO  [main:QuorumUtil@152] - 127.0.0.1:13942 is accepting client connections
2020-03-18 17:40:41,630 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13945
2020-03-18 17:40:41,631 [myid:] - INFO  [NIOWorkerThread-1:NIOServerCnxn@507] - Processing stat command from /127.0.0.1:54486
2020-03-18 17:40:41,631 [myid:] - INFO  [NIOWorkerThread-1:StatCommand@52] - Stat command output
2020-03-18 17:40:41,631 [myid:] - INFO  [main:QuorumUtil@152] - 127.0.0.1:13945 is accepting client connections
2020-03-18 17:40:41,631 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13948
2020-03-18 17:40:41,633 [myid:] - INFO  [NIOWorkerThread-1:NIOServerCnxn@507] - Processing stat command from /127.0.0.1:54487
2020-03-18 17:40:41,633 [myid:] - INFO  [NIOWorkerThread-1:StatCommand@52] - Stat command output
2020-03-18 17:40:41,634 [myid:] - INFO  [main:QuorumUtil@152] - 127.0.0.1:13948 is accepting client connections
2020-03-18 17:40:41,634 [myid:] - INFO  [main:JMXEnv@191] - JMXEnv.dump() follows
2020-03-18 17:40:41,636 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.2
2020-03-18 17:40:41,636 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1
2020-03-18 17:40:41,636 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.3,name2=Leader,name3=Learner_Connections,name4="127.0.0.1:54484",name5="id:2"
2020-03-18 17:40:41,636 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1,name2=Follower,name3=InMemoryDataTree
2020-03-18 17:40:41,636 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.3
2020-03-18 17:40:41,636 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.3
2020-03-18 17:40:41,636 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id1
2020-03-18 17:40:41,636 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.2
2020-03-18 17:40:41,637 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id2
2020-03-18 17:40:41,637 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.1
2020-03-18 17:40:41,637 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3
2020-03-18 17:40:41,637 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.2,name2=Follower,name3=InMemoryDataTree
2020-03-18 17:40:41,637 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.3,name2=Leader
2020-03-18 17:40:41,637 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.2
2020-03-18 17:40:41,638 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.1
2020-03-18 17:40:41,638 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.3,name2=Leader,name3=Learner_Connections,name4="127.0.0.1:54482",name5="id:1"
2020-03-18 17:40:41,638 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.3
2020-03-18 17:40:41,638 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.3,name2=Leader,name3=InMemoryDataTree
2020-03-18 17:40:41,638 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1,name2=Follower
2020-03-18 17:40:41,638 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.2,name2=Follower
2020-03-18 17:40:41,640 [myid:] - INFO  [main:JMXEnv@116] - expect:InMemoryDataTree
2020-03-18 17:40:41,640 [myid:] - INFO  [main:JMXEnv@119] - found:InMemoryDataTree org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1,name2=Follower,name3=InMemoryDataTree
2020-03-18 17:40:41,640 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id1,name1=replica.1,name2=
2020-03-18 17:40:41,640 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id1,name1=replica.1,name2= org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1,name2=Follower
2020-03-18 17:40:41,640 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id2,name1=replica.2,name2=
2020-03-18 17:40:41,641 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id2,name1=replica.2,name2= org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.2,name2=Follower,name3=InMemoryDataTree
2020-03-18 17:40:41,641 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id3,name1=replica.3,name2=
2020-03-18 17:40:41,641 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id3,name1=replica.3,name2= org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.3,name2=Leader,name3=Learner_Connections,name4="127.0.0.1:54484",name5="id:2"
2020-03-18 17:40:41,641 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id1,name1=replica.1
2020-03-18 17:40:41,641 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id1,name1=replica.1 org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1
2020-03-18 17:40:41,641 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id1,name1=replica.2
2020-03-18 17:40:41,641 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id1,name1=replica.2 org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.2
2020-03-18 17:40:41,641 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id1,name1=replica.3
2020-03-18 17:40:41,642 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id1,name1=replica.3 org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.3
2020-03-18 17:40:41,642 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id2,name1=replica.1
2020-03-18 17:40:41,642 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id2,name1=replica.1 org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.1
2020-03-18 17:40:41,642 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id2,name1=replica.2
2020-03-18 17:40:41,642 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id2,name1=replica.2 org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.2
2020-03-18 17:40:41,642 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id2,name1=replica.3
2020-03-18 17:40:41,642 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id2,name1=replica.3 org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.3
2020-03-18 17:40:41,642 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id3,name1=replica.1
2020-03-18 17:40:41,642 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id3,name1=replica.1 org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.1
2020-03-18 17:40:41,643 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id3,name1=replica.2
2020-03-18 17:40:41,643 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id3,name1=replica.2 org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.2
2020-03-18 17:40:41,643 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id3,name1=replica.3
2020-03-18 17:40:41,643 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id3,name1=replica.3 org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.3,name2=Leader
2020-03-18 17:40:41,643 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id1
2020-03-18 17:40:41,643 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id1 org.apache.ZooKeeperService:name0=ReplicatedServer_id1
2020-03-18 17:40:41,643 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id2
2020-03-18 17:40:41,644 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id2 org.apache.ZooKeeperService:name0=ReplicatedServer_id2
2020-03-18 17:40:41,644 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id3
2020-03-18 17:40:41,644 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id3 org.apache.ZooKeeperService:name0=ReplicatedServer_id3
2020-03-18 17:40:41,644 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@658] - Connecting to follower: 1
2020-03-18 17:40:41,646 [myid:] - INFO  [main:ZooKeeper@1005] - Initiating client connection, connectString=localhost:13942 sessionTimeout=30000 watcher=org.apache.zookeeper.test.ClientBase$CountdownWatcher@3d8314f0
2020-03-18 17:40:41,647 [myid:] - INFO  [main:ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes
2020-03-18 17:40:41,647 [myid:] - INFO  [main:ClientCnxn@1703] - zookeeper.request.timeout value is 0. feature enabled=false
2020-03-18 17:40:41,649 [myid:localhost:13942] - INFO  [main-SendThread(localhost:13942):ClientCnxn$SendThread@1154] - Opening socket connection to server localhost/0:0:0:0:0:0:0:1:13942.
2020-03-18 17:40:41,649 [myid:localhost:13942] - INFO  [main-SendThread(localhost:13942):ClientCnxn$SendThread@1156] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2020-03-18 17:40:41,649 [myid:localhost:13942] - WARN  [main-SendThread(localhost:13942):ClientCnxn$SendThread@1272] - Session 0x0 for sever localhost/0:0:0:0:0:0:0:1:13942, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:717)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:342)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1262)
2020-03-18 17:40:42,249 [myid:] - INFO  [SessionTracker:SessionTrackerImpl@170] - SessionTrackerImpl exited loop!
2020-03-18 17:40:42,755 [myid:localhost:13942] - INFO  [main-SendThread(localhost:13942):ClientCnxn$SendThread@1154] - Opening socket connection to server localhost/0:0:0:0:0:0:0:1:13942.
2020-03-18 17:40:42,755 [myid:localhost:13942] - INFO  [main-SendThread(localhost:13942):ClientCnxn$SendThread@1156] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2020-03-18 17:40:42,756 [myid:localhost:13942] - WARN  [main-SendThread(localhost:13942):ClientCnxn$SendThread@1272] - Session 0x0 for sever localhost/0:0:0:0:0:0:0:1:13942, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:717)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:342)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1262)
2020-03-18 17:40:43,861 [myid:localhost:13942] - INFO  [main-SendThread(localhost:13942):ClientCnxn$SendThread@1154] - Opening socket connection to server localhost/127.0.0.1:13942.
2020-03-18 17:40:43,861 [myid:localhost:13942] - INFO  [main-SendThread(localhost:13942):ClientCnxn$SendThread@1156] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2020-03-18 17:40:43,862 [myid:localhost:13942] - INFO  [main-SendThread(localhost:13942):ClientCnxn$SendThread@986] - Socket connection established, initiating session, client: /127.0.0.1:54517, server: localhost/127.0.0.1:13942
2020-03-18 17:40:43,865 [myid:] - WARN  [QuorumPeer[myid=2](plain=127.0.0.1:13945)(secure=disabled):Follower@170] - Got zxid 0x100000001 expected 0x1
2020-03-18 17:40:43,865 [myid:] - INFO  [SyncThread:3:FileTxnLog@284] - Creating new log file: log.100000001
2020-03-18 17:40:43,865 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13942)(secure=disabled):Follower@170] - Got zxid 0x100000001 expected 0x1
2020-03-18 17:40:43,865 [myid:] - INFO  [SyncThread:2:FileTxnLog@284] - Creating new log file: log.100000001
2020-03-18 17:40:43,866 [myid:] - INFO  [SyncThread:1:FileTxnLog@284] - Creating new log file: log.100000001
2020-03-18 17:40:43,868 [myid:] - INFO  [CommitProcessor:1:LearnerSessionTracker@116] - Committing global session 0x100015e9b480000
2020-03-18 17:40:43,868 [myid:] - INFO  [CommitProcessor:2:LearnerSessionTracker@116] - Committing global session 0x100015e9b480000
2020-03-18 17:40:43,868 [myid:] - INFO  [CommitProcessor:3:LeaderSessionTracker@104] - Committing global session 0x100015e9b480000
2020-03-18 17:40:43,869 [myid:localhost:13942] - INFO  [main-SendThread(localhost:13942):ClientCnxn$SendThread@1420] - Session establishment complete on server localhost/127.0.0.1:13942, session id = 0x100015e9b480000, negotiated timeout = 30000
2020-03-18 17:40:43,871 [myid:] - INFO  [RequestThrottler:QuorumZooKeeperServer@158] - Submitting global closeSession request for session 0x100015e9b480000
2020-03-18 17:40:43,973 [myid:] - INFO  [main:ZooKeeper@1618] - Session: 0x100015e9b480000 closed
2020-03-18 17:40:43,973 [myid:] - INFO  [main:QuorumUtil@250] - Shutting down quorum peer QuorumPeer[myid=1](plain=127.0.0.1:13942)(secure=disabled)
2020-03-18 17:40:43,974 [myid:] - INFO  [main:Follower@292] - shutdown Follower
2020-03-18 17:40:43,973 [myid:] - INFO  [main-EventThread:ClientCnxn$EventThread@566] - EventThread shut down for session: 0x100015e9b480000
2020-03-18 17:40:43,975 [myid:] - INFO  [main:LearnerZooKeeperServer@160] - Shutting down
2020-03-18 17:40:43,975 [myid:] - INFO  [main:ZooKeeperServer@784] - shutting down
2020-03-18 17:40:43,976 [myid:] - INFO  [main:RequestThrottler@244] - Shutting down
2020-03-18 17:40:43,976 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13942)(secure=disabled):Follower@129] - Exception when following the leader
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:96)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:134)
	at org.apache.zookeeper.server.quorum.Learner.readPacket(Learner.java:182)
	at org.apache.zookeeper.server.quorum.Follower.followLeader(Follower.java:125)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:1455)
2020-03-18 17:40:43,976 [myid:] - INFO  [RequestThrottler:RequestThrottler@205] - Draining request throttler queue
2020-03-18 17:40:43,976 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13942)(secure=disabled):Follower@143] - Disconnected from leader (with address: /127.0.0.1:13949). Was connected for 2385ms. Sync state: true
2020-03-18 17:40:43,976 [myid:] - INFO  [RequestThrottler:RequestThrottler@181] - RequestThrottler shutdown. Dropped 0 requests
2020-03-18 17:40:43,976 [myid:] - ERROR [LearnerHandler-/127.0.0.1:54482:LearnerHandler@707] - Unexpected exception causing shutdown while sock still open
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:96)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:134)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:643)
2020-03-18 17:40:43,977 [myid:] - WARN  [LearnerHandler-/127.0.0.1:54482:LearnerHandler@730] - ******* GOODBYE /127.0.0.1:54482 ********
2020-03-18 17:40:43,977 [myid:] - INFO  [main:FollowerRequestProcessor@148] - Shutting down
2020-03-18 17:40:43,978 [myid:] - INFO  [main:CommitProcessor@617] - Shutting down
2020-03-18 17:40:43,976 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13942)(secure=disabled):Follower@292] - shutdown Follower
2020-03-18 17:40:43,979 [myid:] - INFO  [main:FinalRequestProcessor@662] - shutdown of request processor complete
2020-03-18 17:40:43,978 [myid:] - INFO  [CommitProcessor:1:CommitProcessor@406] - CommitProcessor exited loop!
2020-03-18 17:40:43,979 [myid:] - INFO  [main:SyncRequestProcessor@256] - Shutting down
2020-03-18 17:40:43,978 [myid:] - INFO  [FollowerRequestProcessor:1:FollowerRequestProcessor@112] - FollowerRequestProcessor exited loop!
2020-03-18 17:40:43,980 [myid:] - INFO  [SyncThread:1:SyncRequestProcessor@225] - SyncRequestProcessor exited!
2020-03-18 17:40:43,982 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13942)(secure=disabled):QuorumPeer@863] - Peer state changed: looking
2020-03-18 17:40:43,982 [myid:] - INFO  [NIOServerCxnFactory.AcceptThread:/127.0.0.1:13942:NIOServerCnxnFactory$AcceptThread@209] - accept thread exitted run method
2020-03-18 17:40:43,982 [myid:] - INFO  [ConnnectionExpirer:NIOServerCnxnFactory$ConnectionExpirerThread@578] - ConnnectionExpirerThread interrupted
2020-03-18 17:40:43,982 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13942)(secure=disabled):QuorumPeer@1501] - PeerState set to LOOKING
2020-03-18 17:40:43,983 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13942)(secure=disabled):QuorumPeer@1483] - QuorumPeer main thread exited
2020-03-18 17:40:43,982 [myid:] - INFO  [NIOServerCxnFactory.SelectorThread-0:NIOServerCnxnFactory$SelectorThread@411] - selector thread exitted run method
2020-03-18 17:40:43,984 [myid:] - INFO  [QuorumPeerListener:QuorumCnxManager$Listener@961] - Leaving listener
2020-03-18 17:40:43,985 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 1, my id = 2
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:40:43,985 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 2, my id = 1
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:40:43,985 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:40:43,985 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:40:43,986 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 3, my id = 1
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:40:43,986 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:40:43,985 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:40:43,988 [myid:] - INFO  [main:QuorumUtil@254] - Shutting down leader election QuorumPeer[myid=1](plain=127.0.0.1:13942)(secure=disabled)
2020-03-18 17:40:43,989 [myid:] - INFO  [main:QuorumUtil@259] - Waiting for QuorumPeer[myid=1](plain=127.0.0.1:13942)(secure=disabled) to exit thread
2020-03-18 17:40:43,989 [myid:] - INFO  [main:QuorumUtil@250] - Shutting down quorum peer QuorumPeer[myid=2](plain=127.0.0.1:13945)(secure=disabled)
2020-03-18 17:40:43,989 [myid:] - INFO  [main:Follower@292] - shutdown Follower
2020-03-18 17:40:43,989 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:40:43,990 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 1 my id = 2
2020-03-18 17:40:43,990 [myid:] - ERROR [LearnerHandler-/127.0.0.1:54484:LearnerHandler@707] - Unexpected exception causing shutdown while sock still open
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:96)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:134)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:643)
2020-03-18 17:40:43,990 [myid:] - WARN  [LearnerHandler-/127.0.0.1:54484:LearnerHandler@730] - ******* GOODBYE /127.0.0.1:54484 ********
2020-03-18 17:40:43,986 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 2 my id = 1
2020-03-18 17:40:43,986 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:40:43,992 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 3 my id = 1
2020-03-18 17:40:43,985 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 1, my id = 3
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:40:43,992 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:40:43,990 [myid:] - WARN  [QuorumPeer[myid=2](plain=127.0.0.1:13945)(secure=disabled):Follower@129] - Exception when following the leader
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:96)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:134)
	at org.apache.zookeeper.server.quorum.Learner.readPacket(Learner.java:182)
	at org.apache.zookeeper.server.quorum.Follower.followLeader(Follower.java:125)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:1455)
2020-03-18 17:40:43,993 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13945)(secure=disabled):Follower@143] - Disconnected from leader (with address: /127.0.0.1:13949). Was connected for 2402ms. Sync state: true
2020-03-18 17:40:43,994 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13945)(secure=disabled):Follower@292] - shutdown Follower
2020-03-18 17:40:43,990 [myid:] - INFO  [main:LearnerZooKeeperServer@160] - Shutting down
2020-03-18 17:40:43,994 [myid:] - INFO  [main:ZooKeeperServer@784] - shutting down
2020-03-18 17:40:43,995 [myid:] - INFO  [main:RequestThrottler@244] - Shutting down
2020-03-18 17:40:43,993 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:40:43,996 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 1 my id = 3
2020-03-18 17:40:43,996 [myid:] - INFO  [RequestThrottler:RequestThrottler@205] - Draining request throttler queue
2020-03-18 17:40:43,997 [myid:] - INFO  [RequestThrottler:RequestThrottler@181] - RequestThrottler shutdown. Dropped 0 requests
2020-03-18 17:40:43,997 [myid:] - INFO  [main:FollowerRequestProcessor@148] - Shutting down
2020-03-18 17:40:43,997 [myid:] - INFO  [main:CommitProcessor@617] - Shutting down
2020-03-18 17:40:43,998 [myid:] - INFO  [main:FinalRequestProcessor@662] - shutdown of request processor complete
2020-03-18 17:40:43,998 [myid:] - INFO  [FollowerRequestProcessor:2:FollowerRequestProcessor@112] - FollowerRequestProcessor exited loop!
2020-03-18 17:40:43,998 [myid:] - INFO  [CommitProcessor:2:CommitProcessor@406] - CommitProcessor exited loop!
2020-03-18 17:40:43,999 [myid:] - INFO  [main:SyncRequestProcessor@256] - Shutting down
2020-03-18 17:40:44,000 [myid:] - INFO  [SyncThread:2:SyncRequestProcessor@225] - SyncRequestProcessor exited!
2020-03-18 17:40:44,002 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13945)(secure=disabled):QuorumPeer@863] - Peer state changed: looking
2020-03-18 17:40:44,002 [myid:] - INFO  [ConnnectionExpirer:NIOServerCnxnFactory$ConnectionExpirerThread@578] - ConnnectionExpirerThread interrupted
2020-03-18 17:40:44,003 [myid:] - WARN  [QuorumPeer[myid=2](plain=127.0.0.1:13945)(secure=disabled):QuorumPeer@1501] - PeerState set to LOOKING
2020-03-18 17:40:44,003 [myid:] - WARN  [QuorumPeer[myid=2](plain=127.0.0.1:13945)(secure=disabled):QuorumPeer@1483] - QuorumPeer main thread exited
2020-03-18 17:40:44,002 [myid:] - INFO  [NIOServerCxnFactory.SelectorThread-0:NIOServerCnxnFactory$SelectorThread@411] - selector thread exitted run method
2020-03-18 17:40:44,002 [myid:] - INFO  [NIOServerCxnFactory.AcceptThread:/127.0.0.1:13945:NIOServerCnxnFactory$AcceptThread@209] - accept thread exitted run method
2020-03-18 17:40:44,005 [myid:] - INFO  [QuorumPeerListener:QuorumCnxManager$Listener@961] - Leaving listener
2020-03-18 17:40:44,005 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:40:44,005 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 2, my id = 3
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:40:44,006 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:40:44,005 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 3, my id = 2
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:40:44,006 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:40:44,006 [myid:] - INFO  [main:QuorumUtil@254] - Shutting down leader election QuorumPeer[myid=2](plain=127.0.0.1:13945)(secure=disabled)
2020-03-18 17:40:44,005 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 3 my id = 2
2020-03-18 17:40:44,007 [myid:] - INFO  [main:QuorumUtil@259] - Waiting for QuorumPeer[myid=2](plain=127.0.0.1:13945)(secure=disabled) to exit thread
2020-03-18 17:40:44,006 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:40:44,007 [myid:] - INFO  [main:QuorumUtil@250] - Shutting down quorum peer QuorumPeer[myid=3](plain=127.0.0.1:13948)(secure=disabled)
2020-03-18 17:40:44,007 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 2 my id = 3
2020-03-18 17:40:44,007 [myid:] - INFO  [main:Leader@792] - Shutting down
2020-03-18 17:40:44,007 [myid:] - INFO  [main:Leader@798] - Shutdown called. For the reason quorum Peer shutdown
2020-03-18 17:40:44,007 [myid:] - INFO  [main:ZooKeeperServer@784] - shutting down
2020-03-18 17:40:44,008 [myid:] - WARN  [LearnerCnxAcceptorHandler-/127.0.0.1:13949:Leader$LearnerCnxAcceptor$LearnerCnxAcceptorHandler@523] - Exception while shutting down acceptor.
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.Leader$LearnerCnxAcceptor$LearnerCnxAcceptorHandler.acceptConnections(Leader.java:510)
	at org.apache.zookeeper.server.quorum.Leader$LearnerCnxAcceptor$LearnerCnxAcceptorHandler.run(Leader.java:493)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2020-03-18 17:40:44,008 [myid:] - INFO  [main:RequestThrottler@244] - Shutting down
2020-03-18 17:40:44,008 [myid:] - INFO  [RequestThrottler:RequestThrottler@205] - Draining request throttler queue
2020-03-18 17:40:44,008 [myid:] - INFO  [RequestThrottler:RequestThrottler@181] - RequestThrottler shutdown. Dropped 0 requests
2020-03-18 17:40:44,009 [myid:] - INFO  [main:SessionTrackerImpl@247] - Shutting down
2020-03-18 17:40:44,009 [myid:] - INFO  [main:LeaderRequestProcessor@79] - Shutting down
2020-03-18 17:40:44,009 [myid:] - INFO  [main:PrepRequestProcessor@1047] - Shutting down
2020-03-18 17:40:44,009 [myid:] - INFO  [main:ProposalRequestProcessor@87] - Shutting down
2020-03-18 17:40:44,009 [myid:] - INFO  [main:CommitProcessor@617] - Shutting down
2020-03-18 17:40:44,009 [myid:] - INFO  [ProcessThread(sid:3 cport:-1)::PrepRequestProcessor@159] - PrepRequestProcessor exited loop!
2020-03-18 17:40:44,009 [myid:] - INFO  [main:Leader$ToBeAppliedRequestProcessor@1106] - Shutting down
2020-03-18 17:40:44,010 [myid:] - INFO  [main:FinalRequestProcessor@662] - shutdown of request processor complete
2020-03-18 17:40:44,010 [myid:] - INFO  [main:SyncRequestProcessor@256] - Shutting down
2020-03-18 17:40:44,009 [myid:] - INFO  [CommitProcessor:3:CommitProcessor@406] - CommitProcessor exited loop!
2020-03-18 17:40:44,010 [myid:] - INFO  [SyncThread:3:SyncRequestProcessor@225] - SyncRequestProcessor exited!
2020-03-18 17:40:44,011 [myid:] - INFO  [ConnnectionExpirer:NIOServerCnxnFactory$ConnectionExpirerThread@578] - ConnnectionExpirerThread interrupted
2020-03-18 17:40:44,011 [myid:] - INFO  [NIOServerCxnFactory.AcceptThread:/127.0.0.1:13948:NIOServerCnxnFactory$AcceptThread@209] - accept thread exitted run method
2020-03-18 17:40:44,011 [myid:] - INFO  [NIOServerCxnFactory.SelectorThread-0:NIOServerCnxnFactory$SelectorThread@411] - selector thread exitted run method
2020-03-18 17:40:44,011 [myid:] - WARN  [QuorumPeer[myid=3](plain=127.0.0.1:13948)(secure=disabled):QuorumPeer@1471] - Unexpected exception
java.lang.InterruptedException
	at java.lang.Object.wait(Native Method)
	at org.apache.zookeeper.server.quorum.Leader.lead(Leader.java:730)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:1468)
2020-03-18 17:40:44,012 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13948)(secure=disabled):Leader@792] - Shutting down
2020-03-18 17:40:44,012 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13948)(secure=disabled):QuorumPeer@863] - Peer state changed: looking
2020-03-18 17:40:44,012 [myid:] - WARN  [QuorumPeer[myid=3](plain=127.0.0.1:13948)(secure=disabled):QuorumPeer@1501] - PeerState set to LOOKING
2020-03-18 17:40:44,012 [myid:] - WARN  [QuorumPeer[myid=3](plain=127.0.0.1:13948)(secure=disabled):QuorumPeer@1483] - QuorumPeer main thread exited
2020-03-18 17:40:44,012 [myid:] - INFO  [QuorumPeerListener:QuorumCnxManager$Listener@961] - Leaving listener
2020-03-18 17:40:44,013 [myid:] - INFO  [main:QuorumUtil@254] - Shutting down leader election QuorumPeer[myid=3](plain=127.0.0.1:13948)(secure=disabled)
2020-03-18 17:40:44,013 [myid:] - INFO  [main:QuorumUtil@259] - Waiting for QuorumPeer[myid=3](plain=127.0.0.1:13948)(secure=disabled) to exit thread
2020-03-18 17:40:44,013 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13942
2020-03-18 17:40:44,014 [myid:] - INFO  [main:QuorumUtil@243] - 127.0.0.1:13942 is no longer accepting client connections
2020-03-18 17:40:44,014 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13945
2020-03-18 17:40:44,014 [myid:] - INFO  [main:QuorumUtil@243] - 127.0.0.1:13945 is no longer accepting client connections
2020-03-18 17:40:44,014 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13948
2020-03-18 17:40:44,015 [myid:] - INFO  [main:QuorumUtil@243] - 127.0.0.1:13948 is no longer accepting client connections
2020-03-18 17:40:44,015 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@89] - Memory used 180464
2020-03-18 17:40:44,015 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@94] - Number of threads 47
2020-03-18 17:40:44,015 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@109] - FINISHED TEST METHOD testFollowerSendsLastZxid
2020-03-18 17:40:44,015 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@76] - Error count 0
2020-03-18 17:40:44,015 [myid:] - INFO  [main:ZKTestCase$1@96] - SUCCEEDED testFollowerSendsLastZxid
2020-03-18 17:40:44,015 [myid:] - INFO  [main:ZKTestCase$1@91] - FINISHED testFollowerSendsLastZxid
2020-03-18 17:40:44,016 [myid:] - INFO  [main:ZKTestCase$1@86] - STARTING testResyncBySnapThenDiffAfterFollowerCrashes
2020-03-18 17:40:44,016 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@84] - RUNNING TEST METHOD testResyncBySnapThenDiffAfterFollowerCrashes
2020-03-18 17:40:44,016 [myid:] - INFO  [main:JMXEnv@58] - connecting to addr service:jmx:rmi://127.0.0.1/stub/rO0ABXNyAC5qYXZheC5tYW5hZ2VtZW50LnJlbW90ZS5ybWkuUk1JU2VydmVySW1wbF9TdHViAAAAAAAAAAICAAB4cgAaamF2YS5ybWkuc2VydmVyLlJlbW90ZVN0dWLp/tzJi+FlGgIAAHhyABxqYXZhLnJtaS5zZXJ2ZXIuUmVtb3RlT2JqZWN002G0kQxhMx4DAAB4cHc3AAtVbmljYXN0UmVmMgAADDE3Mi4xOC4xNC4zNAAAypvdFe8ajPQNquf4H6IAAAFw7QNGc4AjAHg=
2020-03-18 17:40:44,023 [myid:] - INFO  [main:PortAssignment@87] - Assigned port 13951 from range 13914 - 16606.
2020-03-18 17:40:44,024 [myid:] - INFO  [main:PortAssignment@87] - Assigned port 13952 from range 13914 - 16606.
2020-03-18 17:40:44,024 [myid:] - INFO  [main:PortAssignment@87] - Assigned port 13953 from range 13914 - 16606.
2020-03-18 17:40:44,025 [myid:] - INFO  [main:PortAssignment@87] - Assigned port 13954 from range 13914 - 16606.
2020-03-18 17:40:44,025 [myid:] - INFO  [main:PortAssignment@87] - Assigned port 13955 from range 13914 - 16606.
2020-03-18 17:40:44,025 [myid:] - INFO  [main:PortAssignment@87] - Assigned port 13956 from range 13914 - 16606.
2020-03-18 17:40:44,027 [myid:] - INFO  [main:PortAssignment@87] - Assigned port 13957 from range 13914 - 16606.
2020-03-18 17:40:44,027 [myid:] - INFO  [main:PortAssignment@87] - Assigned port 13958 from range 13914 - 16606.
2020-03-18 17:40:44,027 [myid:] - INFO  [main:PortAssignment@87] - Assigned port 13959 from range 13914 - 16606.
2020-03-18 17:40:44,027 [myid:] - INFO  [main:QuorumUtil@118] - Creating QuorumPeer 1; public port 13951
2020-03-18 17:40:44,028 [myid:] - INFO  [main:ServerCnxnFactory@169] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2020-03-18 17:40:44,028 [myid:] - WARN  [main:ServerCnxnFactory@309] - maxCnxns is not configured, using default value 0.
2020-03-18 17:40:44,028 [myid:] - INFO  [main:NIOServerCnxnFactory@666] - Configuring NIO connection handler with 10s sessionless connection timeout, 1 selector thread(s), 8 worker threads, and 64 kB direct buffers.
2020-03-18 17:40:44,028 [myid:] - INFO  [main:NIOServerCnxnFactory@674] - binding to port /127.0.0.1:13951
2020-03-18 17:40:44,029 [myid:] - INFO  [main:FileTxnSnapLog@124] - zookeeper.snapshot.trust.empty : false
2020-03-18 17:40:44,030 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:44,030 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:44,030 [myid:] - INFO  [main:ZKDatabase@132] - zookeeper.snapshotSizeFactor = 0.33
2020-03-18 17:40:44,030 [myid:] - INFO  [main:ZKDatabase@152] - zookeeper.commitLogCount=500
2020-03-18 17:40:44,030 [myid:] - WARN  [main:QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:40:44,031 [myid:] - INFO  [main:QuorumUtil@118] - Creating QuorumPeer 2; public port 13954
2020-03-18 17:40:44,031 [myid:] - INFO  [main:ServerCnxnFactory@169] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2020-03-18 17:40:44,031 [myid:] - WARN  [main:ServerCnxnFactory@309] - maxCnxns is not configured, using default value 0.
2020-03-18 17:40:44,031 [myid:] - INFO  [main:NIOServerCnxnFactory@666] - Configuring NIO connection handler with 10s sessionless connection timeout, 1 selector thread(s), 8 worker threads, and 64 kB direct buffers.
2020-03-18 17:40:44,031 [myid:] - INFO  [main:NIOServerCnxnFactory@674] - binding to port /127.0.0.1:13954
2020-03-18 17:40:44,031 [myid:] - INFO  [main:FileTxnSnapLog@124] - zookeeper.snapshot.trust.empty : false
2020-03-18 17:40:44,032 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:44,032 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:44,033 [myid:] - INFO  [main:ZKDatabase@132] - zookeeper.snapshotSizeFactor = 0.33
2020-03-18 17:40:44,033 [myid:] - INFO  [main:ZKDatabase@152] - zookeeper.commitLogCount=500
2020-03-18 17:40:44,033 [myid:] - WARN  [main:QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:40:44,033 [myid:] - INFO  [main:QuorumUtil@118] - Creating QuorumPeer 3; public port 13957
2020-03-18 17:40:44,033 [myid:] - INFO  [main:ServerCnxnFactory@169] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2020-03-18 17:40:44,033 [myid:] - WARN  [main:ServerCnxnFactory@309] - maxCnxns is not configured, using default value 0.
2020-03-18 17:40:44,033 [myid:] - INFO  [main:NIOServerCnxnFactory@666] - Configuring NIO connection handler with 10s sessionless connection timeout, 1 selector thread(s), 8 worker threads, and 64 kB direct buffers.
2020-03-18 17:40:44,034 [myid:] - INFO  [main:NIOServerCnxnFactory@674] - binding to port /127.0.0.1:13957
2020-03-18 17:40:44,034 [myid:] - INFO  [main:FileTxnSnapLog@124] - zookeeper.snapshot.trust.empty : false
2020-03-18 17:40:44,035 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:44,035 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:44,035 [myid:] - INFO  [main:ZKDatabase@132] - zookeeper.snapshotSizeFactor = 0.33
2020-03-18 17:40:44,035 [myid:] - INFO  [main:ZKDatabase@152] - zookeeper.commitLogCount=500
2020-03-18 17:40:44,036 [myid:] - WARN  [main:QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:40:44,036 [myid:] - INFO  [main:QuorumUtil@250] - Shutting down quorum peer QuorumPeer
2020-03-18 17:40:44,036 [myid:] - INFO  [main:QuorumUtil@257] - No election available to shutdown QuorumPeer
2020-03-18 17:40:44,036 [myid:] - INFO  [main:QuorumUtil@259] - Waiting for QuorumPeer to exit thread
2020-03-18 17:40:44,036 [myid:] - INFO  [main:QuorumUtil@250] - Shutting down quorum peer QuorumPeer
2020-03-18 17:40:44,036 [myid:] - INFO  [main:QuorumUtil@257] - No election available to shutdown QuorumPeer
2020-03-18 17:40:44,036 [myid:] - INFO  [main:QuorumUtil@259] - Waiting for QuorumPeer to exit thread
2020-03-18 17:40:44,037 [myid:] - INFO  [main:QuorumUtil@250] - Shutting down quorum peer QuorumPeer
2020-03-18 17:40:44,037 [myid:] - INFO  [main:QuorumUtil@257] - No election available to shutdown QuorumPeer
2020-03-18 17:40:44,037 [myid:] - INFO  [main:QuorumUtil@259] - Waiting for QuorumPeer to exit thread
2020-03-18 17:40:44,037 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13951
2020-03-18 17:40:44,038 [myid:] - INFO  [main:QuorumUtil@243] - 127.0.0.1:13951 is no longer accepting client connections
2020-03-18 17:40:44,038 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13954
2020-03-18 17:40:44,039 [myid:] - INFO  [main:QuorumUtil@243] - 127.0.0.1:13954 is no longer accepting client connections
2020-03-18 17:40:44,039 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13957
2020-03-18 17:40:44,039 [myid:] - INFO  [main:QuorumUtil@243] - 127.0.0.1:13957 is no longer accepting client connections
2020-03-18 17:40:44,039 [myid:] - INFO  [main:QuorumUtil@204] - Creating QuorumPeer 1; public port 13951
2020-03-18 17:40:44,039 [myid:] - INFO  [main:ServerCnxnFactory@169] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2020-03-18 17:40:44,040 [myid:] - WARN  [main:ServerCnxnFactory@309] - maxCnxns is not configured, using default value 0.
2020-03-18 17:40:44,040 [myid:] - INFO  [main:NIOServerCnxnFactory@666] - Configuring NIO connection handler with 10s sessionless connection timeout, 1 selector thread(s), 8 worker threads, and 64 kB direct buffers.
2020-03-18 17:40:44,040 [myid:] - INFO  [main:NIOServerCnxnFactory@674] - binding to port /127.0.0.1:13951
2020-03-18 17:40:44,040 [myid:] - INFO  [main:FileTxnSnapLog@124] - zookeeper.snapshot.trust.empty : false
2020-03-18 17:40:44,041 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:44,041 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:44,041 [myid:] - INFO  [main:ZKDatabase@132] - zookeeper.snapshotSizeFactor = 0.33
2020-03-18 17:40:44,041 [myid:] - INFO  [main:ZKDatabase@152] - zookeeper.commitLogCount=500
2020-03-18 17:40:44,041 [myid:] - WARN  [main:QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:40:44,042 [myid:] - INFO  [main:FileTxnSnapLog@251] - Initialize file found, an empty database will not block voting participation
2020-03-18 17:40:44,042 [myid:] - INFO  [main:FileTxnSnapLog@470] - Snapshotting: 0x0 to /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test6981947867598337616.junit.dir/version-2/snapshot.0
2020-03-18 17:40:44,043 [myid:] - INFO  [main:ZKDatabase@289] - Snapshot loaded in 1 ms, highest zxid is 0x0, digest is 1371985504
2020-03-18 17:40:44,043 [myid:] - INFO  [main:QuorumPeer@1102] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2020-03-18 17:40:44,045 [myid:] - INFO  [main:QuorumPeer@1122] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2020-03-18 17:40:44,047 [myid:] - INFO  [main:QuorumPeer@2503] - Using 6000ms as the quorum cnxn socket timeout
2020-03-18 17:40:44,048 [myid:] - INFO  [main:QuorumCnxManager$Listener@906] - Election port bind maximum retries is 3
2020-03-18 17:40:44,048 [myid:] - INFO  [main:QuorumUtil@146] - Started QuorumPeer 1
2020-03-18 17:40:44,048 [myid:] - INFO  [main:QuorumUtil@204] - Creating QuorumPeer 2; public port 13954
2020-03-18 17:40:44,049 [myid:] - INFO  [main:ServerCnxnFactory@169] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2020-03-18 17:40:44,049 [myid:] - WARN  [main:ServerCnxnFactory@309] - maxCnxns is not configured, using default value 0.
2020-03-18 17:40:44,049 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13953:QuorumCnxManager$Listener$ListenerHandler@1047] - My election bind port: /127.0.0.1:13953
2020-03-18 17:40:44,049 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):QuorumPeer@1371] - LOOKING
2020-03-18 17:40:44,049 [myid:] - INFO  [main:NIOServerCnxnFactory@666] - Configuring NIO connection handler with 10s sessionless connection timeout, 1 selector thread(s), 8 worker threads, and 64 kB direct buffers.
2020-03-18 17:40:44,049 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):FastLeaderElection@931] - New election. My id = 1, proposed zxid=0x0
2020-03-18 17:40:44,049 [myid:] - INFO  [main:NIOServerCnxnFactory@674] - binding to port /127.0.0.1:13954
2020-03-18 17:40:44,049 [myid:] - INFO  [main:FileTxnSnapLog@124] - zookeeper.snapshot.trust.empty : false
2020-03-18 17:40:44,050 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:1, n.state:LOOKING, n.leader:1, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:44,050 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@716] - Cannot open channel to 2 at election address /127.0.0.1:13956
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:677)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:748)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:644)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:503)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:487)
	at java.lang.Thread.run(Thread.java:748)
2020-03-18 17:40:44,050 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:44,050 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:44,050 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@716] - Cannot open channel to 3 at election address /127.0.0.1:13959
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:677)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:748)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:644)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:503)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:487)
	at java.lang.Thread.run(Thread.java:748)
2020-03-18 17:40:44,050 [myid:] - INFO  [main:ZKDatabase@132] - zookeeper.snapshotSizeFactor = 0.33
2020-03-18 17:40:44,051 [myid:] - INFO  [main:ZKDatabase@152] - zookeeper.commitLogCount=500
2020-03-18 17:40:44,051 [myid:] - WARN  [main:QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:40:44,051 [myid:] - INFO  [main:FileTxnSnapLog@251] - Initialize file found, an empty database will not block voting participation
2020-03-18 17:40:44,052 [myid:] - INFO  [main:FileTxnSnapLog@470] - Snapshotting: 0x0 to /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test430484798048663777.junit.dir/version-2/snapshot.0
2020-03-18 17:40:44,053 [myid:] - INFO  [main:ZKDatabase@289] - Snapshot loaded in 2 ms, highest zxid is 0x0, digest is 1371985504
2020-03-18 17:40:44,053 [myid:] - INFO  [main:QuorumPeer@1102] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2020-03-18 17:40:44,054 [myid:] - INFO  [main:QuorumPeer@1122] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2020-03-18 17:40:44,056 [myid:] - INFO  [main:QuorumPeer@2503] - Using 6000ms as the quorum cnxn socket timeout
2020-03-18 17:40:44,056 [myid:] - INFO  [main:QuorumCnxManager$Listener@906] - Election port bind maximum retries is 3
2020-03-18 17:40:44,057 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13956:QuorumCnxManager$Listener$ListenerHandler@1047] - My election bind port: /127.0.0.1:13956
2020-03-18 17:40:44,057 [myid:] - INFO  [main:QuorumUtil@146] - Started QuorumPeer 2
2020-03-18 17:40:44,057 [myid:] - INFO  [main:QuorumUtil@204] - Creating QuorumPeer 3; public port 13957
2020-03-18 17:40:44,057 [myid:] - INFO  [main:ServerCnxnFactory@169] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2020-03-18 17:40:44,057 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13954)(secure=disabled):QuorumPeer@1371] - LOOKING
2020-03-18 17:40:44,058 [myid:] - WARN  [main:ServerCnxnFactory@309] - maxCnxns is not configured, using default value 0.
2020-03-18 17:40:44,058 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13954)(secure=disabled):FastLeaderElection@931] - New election. My id = 2, proposed zxid=0x0
2020-03-18 17:40:44,058 [myid:] - INFO  [main:NIOServerCnxnFactory@666] - Configuring NIO connection handler with 10s sessionless connection timeout, 1 selector thread(s), 8 worker threads, and 64 kB direct buffers.
2020-03-18 17:40:44,058 [myid:] - INFO  [main:NIOServerCnxnFactory@674] - binding to port /127.0.0.1:13957
2020-03-18 17:40:44,058 [myid:] - INFO  [main:FileTxnSnapLog@124] - zookeeper.snapshot.trust.empty : false
2020-03-18 17:40:44,058 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13953:QuorumCnxManager$Listener$ListenerHandler@1052] - Received connection request /127.0.0.1:54526
2020-03-18 17:40:44,059 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:2, n.state:LOOKING, n.leader:2, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:44,059 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:2, n.state:LOOKING, n.leader:2, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:44,059 [myid:] - WARN  [WorkerSender[myid=2]:QuorumCnxManager@716] - Cannot open channel to 3 at election address /127.0.0.1:13959
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:677)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:748)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:644)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:503)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:487)
	at java.lang.Thread.run(Thread.java:748)
2020-03-18 17:40:44,060 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:1, n.state:LOOKING, n.leader:1, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:44,060 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:1, n.state:LOOKING, n.leader:2, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:44,061 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@716] - Cannot open channel to 3 at election address /127.0.0.1:13959
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:677)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:748)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:644)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:503)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:487)
	at java.lang.Thread.run(Thread.java:748)
2020-03-18 17:40:44,062 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:1, n.state:LOOKING, n.leader:2, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:44,063 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:44,063 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:44,063 [myid:] - INFO  [main:ZKDatabase@132] - zookeeper.snapshotSizeFactor = 0.33
2020-03-18 17:40:44,063 [myid:] - INFO  [main:ZKDatabase@152] - zookeeper.commitLogCount=500
2020-03-18 17:40:44,063 [myid:] - WARN  [main:QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:40:44,064 [myid:] - INFO  [main:FileTxnSnapLog@251] - Initialize file found, an empty database will not block voting participation
2020-03-18 17:40:44,065 [myid:] - INFO  [main:FileTxnSnapLog@470] - Snapshotting: 0x0 to /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test4937010007157074123.junit.dir/version-2/snapshot.0
2020-03-18 17:40:44,066 [myid:] - INFO  [main:ZKDatabase@289] - Snapshot loaded in 2 ms, highest zxid is 0x0, digest is 1371985504
2020-03-18 17:40:44,066 [myid:] - INFO  [main:QuorumPeer@1102] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2020-03-18 17:40:44,068 [myid:] - INFO  [main:QuorumPeer@1122] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2020-03-18 17:40:44,070 [myid:] - INFO  [main:QuorumPeer@2503] - Using 6000ms as the quorum cnxn socket timeout
2020-03-18 17:40:44,070 [myid:] - INFO  [main:QuorumCnxManager$Listener@906] - Election port bind maximum retries is 3
2020-03-18 17:40:44,070 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13959:QuorumCnxManager$Listener$ListenerHandler@1047] - My election bind port: /127.0.0.1:13959
2020-03-18 17:40:44,070 [myid:] - INFO  [main:QuorumUtil@146] - Started QuorumPeer 3
2020-03-18 17:40:44,071 [myid:] - INFO  [main:QuorumUtil@149] - Checking ports 127.0.0.1:13951,127.0.0.1:13954,127.0.0.1:13957
2020-03-18 17:40:44,071 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13951
2020-03-18 17:40:44,071 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13957)(secure=disabled):QuorumPeer@1371] - LOOKING
2020-03-18 17:40:44,071 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13957)(secure=disabled):FastLeaderElection@931] - New election. My id = 3, proposed zxid=0x0
2020-03-18 17:40:44,072 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13953:QuorumCnxManager$Listener$ListenerHandler@1052] - Received connection request /127.0.0.1:54532
2020-03-18 17:40:44,072 [myid:] - INFO  [NIOWorkerThread-1:NIOServerCnxn@507] - Processing stat command from /127.0.0.1:54531
2020-03-18 17:40:44,072 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13956:QuorumCnxManager$Listener$ListenerHandler@1052] - Received connection request /127.0.0.1:54533
2020-03-18 17:40:44,072 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:3, n.state:LOOKING, n.leader:3, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:44,073 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:1, n.state:LOOKING, n.leader:2, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:44,073 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:1, n.state:LOOKING, n.leader:3, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:44,073 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:1, n.state:LOOKING, n.leader:3, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:44,073 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:3, n.state:LOOKING, n.leader:3, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:44,073 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:2, n.state:LOOKING, n.leader:2, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:44,073 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:1, n.state:LOOKING, n.leader:3, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:44,074 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:2, n.state:LOOKING, n.leader:3, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:44,074 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:2, n.state:LOOKING, n.leader:3, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:44,074 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:2, n.state:LOOKING, n.leader:3, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:44,075 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:3, n.state:LOOKING, n.leader:3, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:44,249 [myid:] - INFO  [SessionTracker:SessionTrackerImpl@170] - SessionTrackerImpl exited loop!
2020-03-18 17:40:44,274 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):QuorumPeer@857] - Peer state changed: following
2020-03-18 17:40:44,274 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13957)(secure=disabled):QuorumPeer@857] - Peer state changed: leading
2020-03-18 17:40:44,274 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):QuorumPeer@1453] - FOLLOWING
2020-03-18 17:40:44,274 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13957)(secure=disabled):QuorumPeer@1465] - LEADING
2020-03-18 17:40:44,274 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13957)(secure=disabled):ZooKeeperServer@1246] - minSessionTimeout set to 4000
2020-03-18 17:40:44,274 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):ZooKeeperServer@1246] - minSessionTimeout set to 4000
2020-03-18 17:40:44,275 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):ZooKeeperServer@1255] - maxSessionTimeout set to 40000
2020-03-18 17:40:44,275 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13957)(secure=disabled):ZooKeeperServer@1255] - maxSessionTimeout set to 40000
2020-03-18 17:40:44,275 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):ResponseCache@45] - Response cache size is initialized with value 400.
2020-03-18 17:40:44,275 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13957)(secure=disabled):ResponseCache@45] - Response cache size is initialized with value 400.
2020-03-18 17:40:44,275 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):ResponseCache@45] - Response cache size is initialized with value 400.
2020-03-18 17:40:44,275 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13957)(secure=disabled):ResponseCache@45] - Response cache size is initialized with value 400.
2020-03-18 17:40:44,275 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):RequestPathMetricsCollector@111] - zookeeper.pathStats.slotCapacity = 60
2020-03-18 17:40:44,275 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):RequestPathMetricsCollector@112] - zookeeper.pathStats.slotDuration = 15
2020-03-18 17:40:44,275 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):RequestPathMetricsCollector@113] - zookeeper.pathStats.maxDepth = 6
2020-03-18 17:40:44,275 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):RequestPathMetricsCollector@114] - zookeeper.pathStats.initialDelay = 5
2020-03-18 17:40:44,275 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):RequestPathMetricsCollector@115] - zookeeper.pathStats.delay = 5
2020-03-18 17:40:44,275 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):RequestPathMetricsCollector@116] - zookeeper.pathStats.enabled = false
2020-03-18 17:40:44,275 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13957)(secure=disabled):RequestPathMetricsCollector@111] - zookeeper.pathStats.slotCapacity = 60
2020-03-18 17:40:44,276 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13957)(secure=disabled):RequestPathMetricsCollector@112] - zookeeper.pathStats.slotDuration = 15
2020-03-18 17:40:44,276 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13957)(secure=disabled):RequestPathMetricsCollector@113] - zookeeper.pathStats.maxDepth = 6
2020-03-18 17:40:44,276 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13957)(secure=disabled):RequestPathMetricsCollector@114] - zookeeper.pathStats.initialDelay = 5
2020-03-18 17:40:44,276 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13957)(secure=disabled):RequestPathMetricsCollector@115] - zookeeper.pathStats.delay = 5
2020-03-18 17:40:44,275 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):ZooKeeperServer@1470] - The max bytes for all large requests are set to 104857600
2020-03-18 17:40:44,276 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):ZooKeeperServer@1484] - The large request threshold is set to -1
2020-03-18 17:40:44,276 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13957)(secure=disabled):RequestPathMetricsCollector@116] - zookeeper.pathStats.enabled = false
2020-03-18 17:40:44,276 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):ZooKeeperServer@329] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 clientPortListenBacklog -1 datadir /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test6981947867598337616.junit.dir/version-2 snapdir /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test6981947867598337616.junit.dir/version-2
2020-03-18 17:40:44,276 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):Follower@75] - FOLLOWING - LEADER ELECTION TOOK - 227 MS
2020-03-18 17:40:44,276 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13957)(secure=disabled):ZooKeeperServer@1470] - The max bytes for all large requests are set to 104857600
2020-03-18 17:40:44,276 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13957)(secure=disabled):ZooKeeperServer@1484] - The large request threshold is set to -1
2020-03-18 17:40:44,276 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):QuorumPeer@863] - Peer state changed: following - discovery
2020-03-18 17:40:44,276 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13957)(secure=disabled):ZooKeeperServer@329] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 clientPortListenBacklog -1 datadir /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test4937010007157074123.junit.dir/version-2 snapdir /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test4937010007157074123.junit.dir/version-2
2020-03-18 17:40:44,277 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13957)(secure=disabled):Leader@581] - LEADING - LEADER ELECTION TOOK - 206 MS
2020-03-18 17:40:44,277 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13957)(secure=disabled):QuorumPeer@863] - Peer state changed: leading - discovery
2020-03-18 17:40:44,277 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13957)(secure=disabled):FileTxnSnapLog@470] - Snapshotting: 0x0 to /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test4937010007157074123.junit.dir/version-2/snapshot.0
2020-03-18 17:40:44,277 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13954)(secure=disabled):QuorumPeer@857] - Peer state changed: following
2020-03-18 17:40:44,277 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13954)(secure=disabled):QuorumPeer@1453] - FOLLOWING
2020-03-18 17:40:44,277 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13954)(secure=disabled):ZooKeeperServer@1246] - minSessionTimeout set to 4000
2020-03-18 17:40:44,277 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13954)(secure=disabled):ZooKeeperServer@1255] - maxSessionTimeout set to 40000
2020-03-18 17:40:44,277 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13954)(secure=disabled):ResponseCache@45] - Response cache size is initialized with value 400.
2020-03-18 17:40:44,277 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13954)(secure=disabled):ResponseCache@45] - Response cache size is initialized with value 400.
2020-03-18 17:40:44,278 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13954)(secure=disabled):RequestPathMetricsCollector@111] - zookeeper.pathStats.slotCapacity = 60
2020-03-18 17:40:44,278 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13954)(secure=disabled):RequestPathMetricsCollector@112] - zookeeper.pathStats.slotDuration = 15
2020-03-18 17:40:44,278 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13954)(secure=disabled):RequestPathMetricsCollector@113] - zookeeper.pathStats.maxDepth = 6
2020-03-18 17:40:44,278 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13954)(secure=disabled):RequestPathMetricsCollector@114] - zookeeper.pathStats.initialDelay = 5
2020-03-18 17:40:44,278 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13954)(secure=disabled):RequestPathMetricsCollector@115] - zookeeper.pathStats.delay = 5
2020-03-18 17:40:44,278 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13954)(secure=disabled):RequestPathMetricsCollector@116] - zookeeper.pathStats.enabled = false
2020-03-18 17:40:44,278 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13954)(secure=disabled):ZooKeeperServer@1470] - The max bytes for all large requests are set to 104857600
2020-03-18 17:40:44,278 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13954)(secure=disabled):ZooKeeperServer@1484] - The large request threshold is set to -1
2020-03-18 17:40:44,278 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13954)(secure=disabled):ZooKeeperServer@329] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 clientPortListenBacklog -1 datadir /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test430484798048663777.junit.dir/version-2 snapdir /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test430484798048663777.junit.dir/version-2
2020-03-18 17:40:44,278 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13954)(secure=disabled):Follower@75] - FOLLOWING - LEADER ELECTION TOOK - 220 MS
2020-03-18 17:40:44,278 [myid:] - INFO  [LeaderConnector-/127.0.0.1:13958:Learner$LeaderConnector@328] - Successfully connected to leader, using address: /127.0.0.1:13958
2020-03-18 17:40:44,278 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13954)(secure=disabled):QuorumPeer@863] - Peer state changed: following - discovery
2020-03-18 17:40:44,280 [myid:] - INFO  [LeaderConnector-/127.0.0.1:13958:Learner$LeaderConnector@328] - Successfully connected to leader, using address: /127.0.0.1:13958
2020-03-18 17:40:44,280 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13957)(secure=disabled):ZooKeeperServer@519] - Snapshot taken in 3 ms
2020-03-18 17:40:44,282 [myid:] - INFO  [LearnerHandler-/127.0.0.1:54540:LearnerHandler@504] - Follower sid: 1 : info : 127.0.0.1:13952:13953:participant;127.0.0.1:13951
2020-03-18 17:40:44,282 [myid:] - INFO  [LearnerHandler-/127.0.0.1:54542:LearnerHandler@504] - Follower sid: 2 : info : 127.0.0.1:13955:13956:participant;127.0.0.1:13954
2020-03-18 17:40:44,284 [myid:] - WARN  [QuorumPeer[myid=3](plain=127.0.0.1:13957)(secure=disabled):QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:40:44,285 [myid:] - INFO  [LearnerHandler-/127.0.0.1:54540:ZKDatabase@345] - On disk txn sync enabled with snapshotSizeFactor 0.33
2020-03-18 17:40:44,285 [myid:] - INFO  [LearnerHandler-/127.0.0.1:54540:LearnerHandler@800] - Synchronizing with Learner sid: 1 maxCommittedLog=0x0 minCommittedLog=0x0 lastProcessedZxid=0x0 peerLastZxid=0x0
2020-03-18 17:40:44,285 [myid:] - INFO  [LearnerHandler-/127.0.0.1:54540:LearnerHandler@845] - Sending DIFF zxid=0x0 for peer sid: 1
2020-03-18 17:40:44,285 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):QuorumPeer@863] - Peer state changed: following - synchronization
2020-03-18 17:40:44,285 [myid:] - INFO  [LearnerHandler-/127.0.0.1:54542:ZKDatabase@345] - On disk txn sync enabled with snapshotSizeFactor 0.33
2020-03-18 17:40:44,285 [myid:] - INFO  [LearnerHandler-/127.0.0.1:54542:LearnerHandler@800] - Synchronizing with Learner sid: 2 maxCommittedLog=0x0 minCommittedLog=0x0 lastProcessedZxid=0x0 peerLastZxid=0x0
2020-03-18 17:40:44,285 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13954)(secure=disabled):QuorumPeer@863] - Peer state changed: following - synchronization
2020-03-18 17:40:44,286 [myid:] - INFO  [LearnerHandler-/127.0.0.1:54542:LearnerHandler@845] - Sending DIFF zxid=0x0 for peer sid: 2
2020-03-18 17:40:44,287 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13957)(secure=disabled):QuorumPeer@863] - Peer state changed: leading - synchronization
2020-03-18 17:40:44,288 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):Learner@509] - Getting a diff from the leader 0x0
2020-03-18 17:40:44,288 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13954)(secure=disabled):Learner@509] - Getting a diff from the leader 0x0
2020-03-18 17:40:44,288 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13954)(secure=disabled):QuorumPeer@868] - Peer state changed: following - synchronization - diff
2020-03-18 17:40:44,288 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):QuorumPeer@868] - Peer state changed: following - synchronization - diff
2020-03-18 17:40:44,288 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13954)(secure=disabled):Learner@675] - Learner received NEWLEADER message
2020-03-18 17:40:44,288 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):Learner@675] - Learner received NEWLEADER message
2020-03-18 17:40:44,288 [myid:] - WARN  [QuorumPeer[myid=2](plain=127.0.0.1:13954)(secure=disabled):QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:40:44,288 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:40:44,290 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13957)(secure=disabled):Leader@1501] - Have quorum of supporters, sids: [[1, 3],[1, 3]]; starting up and setting last processed zxid: 0x100000000
2020-03-18 17:40:44,291 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13957)(secure=disabled):CommitProcessor@476] - Configuring CommitProcessor with readBatchSize -1 commitBatchSize 1
2020-03-18 17:40:44,291 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13957)(secure=disabled):CommitProcessor@438] - Configuring CommitProcessor with 4 worker threads.
2020-03-18 17:40:44,291 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13957)(secure=disabled):ContainerManager@83] - Using checkIntervalMs=60000 maxPerMinute=10000 maxNeverUsedIntervalMs=0
2020-03-18 17:40:44,306 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13957)(secure=disabled):QuorumPeer@863] - Peer state changed: leading - broadcast
2020-03-18 17:40:44,306 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):Learner@659] - Learner received UPTODATE message
2020-03-18 17:40:44,307 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):QuorumPeer@868] - Peer state changed: following - synchronization
2020-03-18 17:40:44,306 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13954)(secure=disabled):Learner@659] - Learner received UPTODATE message
2020-03-18 17:40:44,307 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13954)(secure=disabled):QuorumPeer@868] - Peer state changed: following - synchronization
2020-03-18 17:40:44,307 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13954)(secure=disabled):CommitProcessor@476] - Configuring CommitProcessor with readBatchSize -1 commitBatchSize 1
2020-03-18 17:40:44,307 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13954)(secure=disabled):CommitProcessor@438] - Configuring CommitProcessor with 4 worker threads.
2020-03-18 17:40:44,307 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):CommitProcessor@476] - Configuring CommitProcessor with readBatchSize -1 commitBatchSize 1
2020-03-18 17:40:44,307 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):CommitProcessor@438] - Configuring CommitProcessor with 4 worker threads.
2020-03-18 17:40:44,308 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):QuorumPeer@863] - Peer state changed: following - broadcast
2020-03-18 17:40:44,309 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13954)(secure=disabled):QuorumPeer@863] - Peer state changed: following - broadcast
2020-03-18 17:40:44,323 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13951
2020-03-18 17:40:44,324 [myid:] - INFO  [NIOWorkerThread-2:NIOServerCnxn@507] - Processing stat command from /127.0.0.1:54544
2020-03-18 17:40:44,325 [myid:] - INFO  [NIOWorkerThread-2:StatCommand@52] - Stat command output
2020-03-18 17:40:44,325 [myid:] - INFO  [main:QuorumUtil@152] - 127.0.0.1:13951 is accepting client connections
2020-03-18 17:40:44,325 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13954
2020-03-18 17:40:44,326 [myid:] - INFO  [NIOWorkerThread-1:NIOServerCnxn@507] - Processing stat command from /127.0.0.1:54545
2020-03-18 17:40:44,326 [myid:] - INFO  [NIOWorkerThread-1:StatCommand@52] - Stat command output
2020-03-18 17:40:44,328 [myid:] - INFO  [main:QuorumUtil@152] - 127.0.0.1:13954 is accepting client connections
2020-03-18 17:40:44,328 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13957
2020-03-18 17:40:44,329 [myid:] - INFO  [NIOWorkerThread-1:NIOServerCnxn@507] - Processing stat command from /127.0.0.1:54546
2020-03-18 17:40:44,329 [myid:] - INFO  [NIOWorkerThread-1:StatCommand@52] - Stat command output
2020-03-18 17:40:44,329 [myid:] - INFO  [main:QuorumUtil@152] - 127.0.0.1:13957 is accepting client connections
2020-03-18 17:40:44,329 [myid:] - INFO  [main:JMXEnv@191] - JMXEnv.dump() follows
2020-03-18 17:40:44,331 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.2
2020-03-18 17:40:44,331 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1
2020-03-18 17:40:44,332 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1,name2=Follower,name3=InMemoryDataTree
2020-03-18 17:40:44,332 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.3
2020-03-18 17:40:44,332 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.3,name2=Leader,name3=Learner_Connections,name4="127.0.0.1:54542",name5="id:2"
2020-03-18 17:40:44,332 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.3
2020-03-18 17:40:44,332 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id1
2020-03-18 17:40:44,332 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.2
2020-03-18 17:40:44,332 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id2
2020-03-18 17:40:44,332 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.1
2020-03-18 17:40:44,332 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3
2020-03-18 17:40:44,333 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.3,name2=Leader,name3=Learner_Connections,name4="127.0.0.1:54540",name5="id:1"
2020-03-18 17:40:44,333 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.2,name2=Follower,name3=InMemoryDataTree
2020-03-18 17:40:44,333 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.3,name2=Leader
2020-03-18 17:40:44,333 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.2
2020-03-18 17:40:44,333 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.1
2020-03-18 17:40:44,333 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.3
2020-03-18 17:40:44,333 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.3,name2=Leader,name3=InMemoryDataTree
2020-03-18 17:40:44,333 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1,name2=Follower
2020-03-18 17:40:44,333 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.2,name2=Follower
2020-03-18 17:40:44,336 [myid:] - INFO  [main:JMXEnv@116] - expect:InMemoryDataTree
2020-03-18 17:40:44,336 [myid:] - INFO  [main:JMXEnv@119] - found:InMemoryDataTree org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1,name2=Follower,name3=InMemoryDataTree
2020-03-18 17:40:44,336 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id1,name1=replica.1,name2=
2020-03-18 17:40:44,336 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id1,name1=replica.1,name2= org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1,name2=Follower
2020-03-18 17:40:44,336 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id2,name1=replica.2,name2=
2020-03-18 17:40:44,336 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id2,name1=replica.2,name2= org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.2,name2=Follower,name3=InMemoryDataTree
2020-03-18 17:40:44,336 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id3,name1=replica.3,name2=
2020-03-18 17:40:44,337 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id3,name1=replica.3,name2= org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.3,name2=Leader,name3=Learner_Connections,name4="127.0.0.1:54542",name5="id:2"
2020-03-18 17:40:44,337 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id1,name1=replica.1
2020-03-18 17:40:44,337 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id1,name1=replica.1 org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1
2020-03-18 17:40:44,337 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id1,name1=replica.2
2020-03-18 17:40:44,337 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id1,name1=replica.2 org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.2
2020-03-18 17:40:44,337 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id1,name1=replica.3
2020-03-18 17:40:44,337 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id1,name1=replica.3 org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.3
2020-03-18 17:40:44,337 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id2,name1=replica.1
2020-03-18 17:40:44,337 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id2,name1=replica.1 org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.1
2020-03-18 17:40:44,337 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id2,name1=replica.2
2020-03-18 17:40:44,338 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id2,name1=replica.2 org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.2
2020-03-18 17:40:44,338 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id2,name1=replica.3
2020-03-18 17:40:44,338 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id2,name1=replica.3 org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.3
2020-03-18 17:40:44,338 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id3,name1=replica.1
2020-03-18 17:40:44,338 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id3,name1=replica.1 org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.1
2020-03-18 17:40:44,338 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id3,name1=replica.2
2020-03-18 17:40:44,338 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id3,name1=replica.2 org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.2
2020-03-18 17:40:44,339 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id3,name1=replica.3
2020-03-18 17:40:44,339 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id3,name1=replica.3 org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.3,name2=Leader,name3=Learner_Connections,name4="127.0.0.1:54540",name5="id:1"
2020-03-18 17:40:44,339 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id1
2020-03-18 17:40:44,339 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id1 org.apache.ZooKeeperService:name0=ReplicatedServer_id1
2020-03-18 17:40:44,339 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id2
2020-03-18 17:40:44,339 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id2 org.apache.ZooKeeperService:name0=ReplicatedServer_id2
2020-03-18 17:40:44,339 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id3
2020-03-18 17:40:44,339 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id3 org.apache.ZooKeeperService:name0=ReplicatedServer_id3
2020-03-18 17:40:44,339 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@220] - Connecting to follower: 1
2020-03-18 17:40:44,340 [myid:] - INFO  [main:QuorumUtil@250] - Shutting down quorum peer QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled)
2020-03-18 17:40:44,340 [myid:] - INFO  [main:Follower@292] - shutdown Follower
2020-03-18 17:40:44,340 [myid:] - INFO  [main:LearnerZooKeeperServer@160] - Shutting down
2020-03-18 17:40:44,340 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):Follower@129] - Exception when following the leader
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:96)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:134)
	at org.apache.zookeeper.server.quorum.Learner.readPacket(Learner.java:182)
	at org.apache.zookeeper.server.quorum.Follower.followLeader(Follower.java:125)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:1455)
2020-03-18 17:40:44,340 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):Follower@143] - Disconnected from leader (with address: /127.0.0.1:13958). Was connected for 61ms. Sync state: true
2020-03-18 17:40:44,340 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):Follower@292] - shutdown Follower
2020-03-18 17:40:44,340 [myid:] - INFO  [main:ZooKeeperServer@784] - shutting down
2020-03-18 17:40:44,340 [myid:] - ERROR [LearnerHandler-/127.0.0.1:54540:LearnerHandler@707] - Unexpected exception causing shutdown while sock still open
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:96)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:134)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:643)
2020-03-18 17:40:44,341 [myid:] - INFO  [main:RequestThrottler@244] - Shutting down
2020-03-18 17:40:44,341 [myid:] - WARN  [LearnerHandler-/127.0.0.1:54540:LearnerHandler@730] - ******* GOODBYE /127.0.0.1:54540 ********
2020-03-18 17:40:44,341 [myid:] - INFO  [RequestThrottler:RequestThrottler@205] - Draining request throttler queue
2020-03-18 17:40:44,341 [myid:] - INFO  [RequestThrottler:RequestThrottler@181] - RequestThrottler shutdown. Dropped 0 requests
2020-03-18 17:40:44,341 [myid:] - INFO  [main:FollowerRequestProcessor@148] - Shutting down
2020-03-18 17:40:44,342 [myid:] - INFO  [main:CommitProcessor@617] - Shutting down
2020-03-18 17:40:44,342 [myid:] - INFO  [FollowerRequestProcessor:1:FollowerRequestProcessor@112] - FollowerRequestProcessor exited loop!
2020-03-18 17:40:44,342 [myid:] - INFO  [CommitProcessor:1:CommitProcessor@406] - CommitProcessor exited loop!
2020-03-18 17:40:44,342 [myid:] - INFO  [main:FinalRequestProcessor@662] - shutdown of request processor complete
2020-03-18 17:40:44,343 [myid:] - INFO  [main:SyncRequestProcessor@256] - Shutting down
2020-03-18 17:40:44,343 [myid:] - INFO  [SyncThread:1:SyncRequestProcessor@225] - SyncRequestProcessor exited!
2020-03-18 17:40:44,344 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):QuorumPeer@863] - Peer state changed: looking
2020-03-18 17:40:44,344 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):QuorumPeer@1501] - PeerState set to LOOKING
2020-03-18 17:40:44,344 [myid:] - INFO  [ConnnectionExpirer:NIOServerCnxnFactory$ConnectionExpirerThread@578] - ConnnectionExpirerThread interrupted
2020-03-18 17:40:44,344 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):QuorumPeer@1483] - QuorumPeer main thread exited
2020-03-18 17:40:44,344 [myid:] - INFO  [NIOServerCxnFactory.AcceptThread:/127.0.0.1:13951:NIOServerCnxnFactory$AcceptThread@209] - accept thread exitted run method
2020-03-18 17:40:44,344 [myid:] - INFO  [NIOServerCxnFactory.SelectorThread-0:NIOServerCnxnFactory$SelectorThread@411] - selector thread exitted run method
2020-03-18 17:40:44,345 [myid:] - INFO  [QuorumPeerListener:QuorumCnxManager$Listener@961] - Leaving listener
2020-03-18 17:40:44,345 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 1, my id = 2
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:40:44,346 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:40:44,346 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 2, my id = 1
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:40:44,346 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:40:44,346 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:40:44,346 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 1, my id = 3
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:40:44,347 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:40:44,346 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 2 my id = 1
2020-03-18 17:40:44,346 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:40:44,347 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 1 my id = 2
2020-03-18 17:40:44,347 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:40:44,347 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 3, my id = 1
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:40:44,347 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:40:44,347 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:40:44,347 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 1 my id = 3
2020-03-18 17:40:44,347 [myid:] - INFO  [main:QuorumUtil@254] - Shutting down leader election QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled)
2020-03-18 17:40:44,347 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 3 my id = 1
2020-03-18 17:40:44,348 [myid:] - INFO  [main:QuorumUtil@259] - Waiting for QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled) to exit thread
2020-03-18 17:40:44,348 [myid:] - INFO  [main:ZooKeeper@1005] - Initiating client connection, connectString=127.0.0.1:13957 sessionTimeout=30000 watcher=org.apache.zookeeper.test.ClientBase$CountdownWatcher@799d4f69
2020-03-18 17:40:44,348 [myid:] - INFO  [main:ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes
2020-03-18 17:40:44,349 [myid:] - INFO  [main:ClientCnxn@1703] - zookeeper.request.timeout value is 0. feature enabled=false
2020-03-18 17:40:44,352 [myid:127.0.0.1:13957] - INFO  [main-SendThread(127.0.0.1:13957):ClientCnxn$SendThread@1154] - Opening socket connection to server localhost/127.0.0.1:13957.
2020-03-18 17:40:44,352 [myid:127.0.0.1:13957] - INFO  [main-SendThread(127.0.0.1:13957):ClientCnxn$SendThread@1156] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2020-03-18 17:40:44,352 [myid:127.0.0.1:13957] - INFO  [main-SendThread(127.0.0.1:13957):ClientCnxn$SendThread@986] - Socket connection established, initiating session, client: /127.0.0.1:54548, server: localhost/127.0.0.1:13957
2020-03-18 17:40:44,354 [myid:] - INFO  [SyncThread:3:FileTxnLog@284] - Creating new log file: log.100000001
2020-03-18 17:40:44,354 [myid:] - WARN  [QuorumPeer[myid=2](plain=127.0.0.1:13954)(secure=disabled):Follower@170] - Got zxid 0x100000001 expected 0x1
2020-03-18 17:40:44,355 [myid:] - INFO  [SyncThread:2:FileTxnLog@284] - Creating new log file: log.100000001
2020-03-18 17:40:44,356 [myid:] - INFO  [CommitProcessor:2:LearnerSessionTracker@116] - Committing global session 0x300015ea5cc0000
2020-03-18 17:40:44,356 [myid:] - INFO  [CommitProcessor:3:LeaderSessionTracker@104] - Committing global session 0x300015ea5cc0000
2020-03-18 17:40:44,357 [myid:127.0.0.1:13957] - INFO  [main-SendThread(127.0.0.1:13957):ClientCnxn$SendThread@1420] - Session establishment complete on server localhost/127.0.0.1:13957, session id = 0x300015ea5cc0000, negotiated timeout = 30000
2020-03-18 17:40:44,357 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@225] - zk3 has session id 0x300015ea5cc0000
2020-03-18 17:40:44,360 [myid:] - INFO  [main:QuorumUtil@204] - Creating QuorumPeer 1; public port 13951
2020-03-18 17:40:44,360 [myid:] - INFO  [main:ServerCnxnFactory@169] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2020-03-18 17:40:44,360 [myid:] - WARN  [main:ServerCnxnFactory@309] - maxCnxns is not configured, using default value 0.
2020-03-18 17:40:44,360 [myid:] - INFO  [main:NIOServerCnxnFactory@666] - Configuring NIO connection handler with 10s sessionless connection timeout, 1 selector thread(s), 8 worker threads, and 64 kB direct buffers.
2020-03-18 17:40:44,361 [myid:] - INFO  [main:NIOServerCnxnFactory@674] - binding to port /127.0.0.1:13951
2020-03-18 17:40:44,361 [myid:] - INFO  [main:FileTxnSnapLog@124] - zookeeper.snapshot.trust.empty : false
2020-03-18 17:40:44,361 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:44,361 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:44,362 [myid:] - INFO  [main:ZKDatabase@132] - zookeeper.snapshotSizeFactor = 0.33
2020-03-18 17:40:44,362 [myid:] - INFO  [main:ZKDatabase@152] - zookeeper.commitLogCount=500
2020-03-18 17:40:44,362 [myid:] - WARN  [main:QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:40:44,363 [myid:] - INFO  [main:FileSnap@85] - Reading snapshot /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test6981947867598337616.junit.dir/version-2/snapshot.0
2020-03-18 17:40:44,364 [myid:] - INFO  [main:DataTree@1737] - The digest value is empty in snapshot
2020-03-18 17:40:44,364 [myid:] - INFO  [main:ZKDatabase@289] - Snapshot loaded in 2 ms, highest zxid is 0x0, digest is 1371985504
2020-03-18 17:40:44,368 [myid:] - INFO  [main:QuorumPeer@2503] - Using 6000ms as the quorum cnxn socket timeout
2020-03-18 17:40:44,368 [myid:] - INFO  [main:QuorumCnxManager$Listener@906] - Election port bind maximum retries is 3
2020-03-18 17:40:44,369 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13953:QuorumCnxManager$Listener$ListenerHandler@1047] - My election bind port: /127.0.0.1:13953
2020-03-18 17:40:44,369 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13951
2020-03-18 17:40:44,370 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):QuorumPeer@1371] - LOOKING
2020-03-18 17:40:44,371 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):FastLeaderElection@931] - New election. My id = 1, proposed zxid=0x0
2020-03-18 17:40:44,372 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13956:QuorumCnxManager$Listener$ListenerHandler@1052] - Received connection request /127.0.0.1:54550
2020-03-18 17:40:44,372 [myid:] - INFO  [WorkerSender[myid=1]:QuorumCnxManager@462] - Have smaller server identifier, so dropping the connection: (2, 1)
2020-03-18 17:40:44,372 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:1, n.state:LOOKING, n.leader:1, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:44,372 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13953:QuorumCnxManager$Listener$ListenerHandler@1052] - Received connection request /127.0.0.1:54551
2020-03-18 17:40:44,372 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13959:QuorumCnxManager$Listener$ListenerHandler@1052] - Received connection request /127.0.0.1:54552
2020-03-18 17:40:44,372 [myid:] - INFO  [WorkerSender[myid=1]:QuorumCnxManager@462] - Have smaller server identifier, so dropping the connection: (3, 1)
2020-03-18 17:40:44,373 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13953:QuorumCnxManager$Listener$ListenerHandler@1052] - Received connection request /127.0.0.1:54553
2020-03-18 17:40:44,373 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:FOLLOWING; n.sid:1, n.state:LOOKING, n.leader:1, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:44,373 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LEADING; n.sid:1, n.state:LOOKING, n.leader:1, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:44,374 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:2, n.state:LOOKING, n.leader:3, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:44,374 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:3, n.state:LOOKING, n.leader:3, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:44,374 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:2, n.state:FOLLOWING, n.leader:3, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:44,374 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:3, n.state:LEADING, n.leader:3, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:44,374 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):QuorumPeer@857] - Peer state changed: following
2020-03-18 17:40:44,374 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):QuorumPeer@1453] - FOLLOWING
2020-03-18 17:40:44,374 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):ZooKeeperServer@1246] - minSessionTimeout set to 4000
2020-03-18 17:40:44,375 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):ZooKeeperServer@1255] - maxSessionTimeout set to 40000
2020-03-18 17:40:44,375 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):ResponseCache@45] - Response cache size is initialized with value 400.
2020-03-18 17:40:44,375 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):ResponseCache@45] - Response cache size is initialized with value 400.
2020-03-18 17:40:44,375 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):RequestPathMetricsCollector@111] - zookeeper.pathStats.slotCapacity = 60
2020-03-18 17:40:44,375 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):RequestPathMetricsCollector@112] - zookeeper.pathStats.slotDuration = 15
2020-03-18 17:40:44,375 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):RequestPathMetricsCollector@113] - zookeeper.pathStats.maxDepth = 6
2020-03-18 17:40:44,375 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):RequestPathMetricsCollector@114] - zookeeper.pathStats.initialDelay = 5
2020-03-18 17:40:44,375 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):RequestPathMetricsCollector@115] - zookeeper.pathStats.delay = 5
2020-03-18 17:40:44,375 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):RequestPathMetricsCollector@116] - zookeeper.pathStats.enabled = false
2020-03-18 17:40:44,375 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):ZooKeeperServer@1470] - The max bytes for all large requests are set to 104857600
2020-03-18 17:40:44,375 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):ZooKeeperServer@1484] - The large request threshold is set to -1
2020-03-18 17:40:44,375 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):ZooKeeperServer@329] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 clientPortListenBacklog -1 datadir /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test6981947867598337616.junit.dir/version-2 snapdir /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test6981947867598337616.junit.dir/version-2
2020-03-18 17:40:44,375 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):Follower@75] - FOLLOWING - LEADER ELECTION TOOK - 5 MS
2020-03-18 17:40:44,376 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):QuorumPeer@863] - Peer state changed: following - discovery
2020-03-18 17:40:44,377 [myid:] - INFO  [LeaderConnector-/127.0.0.1:13958:Learner$LeaderConnector@328] - Successfully connected to leader, using address: /127.0.0.1:13958
2020-03-18 17:40:44,391 [myid:] - INFO  [LearnerHandler-/127.0.0.1:54557:LearnerHandler@504] - Follower sid: 1 : info : 127.0.0.1:13952:13953:participant;127.0.0.1:13951
2020-03-18 17:40:44,392 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):QuorumPeer@863] - Peer state changed: following - synchronization
2020-03-18 17:40:44,392 [myid:] - INFO  [LearnerHandler-/127.0.0.1:54557:ZKDatabase@347] - On disk txn sync disabled
2020-03-18 17:40:44,392 [myid:] - INFO  [LearnerHandler-/127.0.0.1:54557:LearnerHandler@800] - Synchronizing with Learner sid: 1 maxCommittedLog=0x100000002 minCommittedLog=0x100000001 lastProcessedZxid=0x100000002 peerLastZxid=0x0
2020-03-18 17:40:44,392 [myid:] - WARN  [LearnerHandler-/127.0.0.1:54557:LearnerHandler@903] - Unhandled scenario for peer sid: 1 maxCommittedLog=0x100000002 minCommittedLog=0x100000001 lastProcessedZxid=0x100000002 peerLastZxid=0x0 txnLogSyncEnabled=false
2020-03-18 17:40:44,393 [myid:] - INFO  [LearnerHandler-/127.0.0.1:54557:LearnerHandler@565] - Sending snapshot last zxid of peer is 0x0, zxid of leader is 0x100000002, send zxid of db as 0x100000002, 1 concurrent snapshot sync, snapshot sync was exempt from throttle
2020-03-18 17:40:44,393 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):QuorumPeer@868] - Peer state changed: following - synchronization - snap
2020-03-18 17:40:44,393 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):Learner@514] - Getting a snapshot from leader 0x100000002
2020-03-18 17:40:44,393 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:44,393 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:44,394 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):Learner@675] - Learner received NEWLEADER message
2020-03-18 17:40:44,394 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection$Messenger$WorkerReceiver@458] - WorkerReceiver is down
2020-03-18 17:40:44,394 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@458] - WorkerReceiver is down
2020-03-18 17:40:44,394 [myid:] - INFO  [WorkerSender[myid=2]:FastLeaderElection$Messenger$WorkerSender@492] - WorkerSender is down
2020-03-18 17:40:44,394 [myid:] - INFO  [WorkerSender[myid=3]:FastLeaderElection$Messenger$WorkerSender@492] - WorkerSender is down
2020-03-18 17:40:44,394 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@458] - WorkerReceiver is down
2020-03-18 17:40:44,394 [myid:] - INFO  [WorkerSender[myid=1]:FastLeaderElection$Messenger$WorkerSender@492] - WorkerSender is down
2020-03-18 17:40:44,395 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:40:44,395 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):FileTxnSnapLog@470] - Snapshotting: 0x100000002 to /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test6981947867598337616.junit.dir/version-2/snapshot.100000002
2020-03-18 17:40:44,396 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):ZooKeeperServer@519] - Snapshot taken in 1 ms
2020-03-18 17:40:44,398 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):Learner@659] - Learner received UPTODATE message
2020-03-18 17:40:44,398 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):QuorumPeer@868] - Peer state changed: following - synchronization
2020-03-18 17:40:44,398 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):CommitProcessor@476] - Configuring CommitProcessor with readBatchSize -1 commitBatchSize 1
2020-03-18 17:40:44,398 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):CommitProcessor@438] - Configuring CommitProcessor with 4 worker threads.
2020-03-18 17:40:44,398 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):QuorumPeer@863] - Peer state changed: following - broadcast
2020-03-18 17:40:44,399 [myid:] - INFO  [NIOWorkerThread-1:NIOServerCnxn@507] - Processing stat command from /127.0.0.1:54549
2020-03-18 17:40:44,651 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13951
2020-03-18 17:40:44,652 [myid:] - INFO  [NIOWorkerThread-2:NIOServerCnxn@507] - Processing stat command from /127.0.0.1:54561
2020-03-18 17:40:44,652 [myid:] - INFO  [NIOWorkerThread-2:StatCommand@52] - Stat command output
2020-03-18 17:40:44,653 [myid:] - INFO  [main:ZooKeeper@1005] - Initiating client connection, connectString=127.0.0.1:13951 sessionTimeout=30000 watcher=org.apache.zookeeper.test.ClientBase$CountdownWatcher@17776a8
2020-03-18 17:40:44,653 [myid:] - INFO  [main:ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes
2020-03-18 17:40:44,653 [myid:] - INFO  [main:ClientCnxn@1703] - zookeeper.request.timeout value is 0. feature enabled=false
2020-03-18 17:40:44,655 [myid:127.0.0.1:13951] - INFO  [main-SendThread(127.0.0.1:13951):ClientCnxn$SendThread@1154] - Opening socket connection to server localhost/127.0.0.1:13951.
2020-03-18 17:40:44,655 [myid:127.0.0.1:13951] - INFO  [main-SendThread(127.0.0.1:13951):ClientCnxn$SendThread@1156] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2020-03-18 17:40:44,656 [myid:127.0.0.1:13951] - INFO  [main-SendThread(127.0.0.1:13951):ClientCnxn$SendThread@986] - Socket connection established, initiating session, client: /127.0.0.1:54562, server: localhost/127.0.0.1:13951
2020-03-18 17:40:44,657 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):Follower@170] - Got zxid 0x100000003 expected 0x1
2020-03-18 17:40:44,658 [myid:] - INFO  [SyncThread:1:FileTxnLog@284] - Creating new log file: log.100000003
2020-03-18 17:40:44,658 [myid:] - INFO  [CommitProcessor:3:LeaderSessionTracker@104] - Committing global session 0x100015ea6320000
2020-03-18 17:40:44,658 [myid:] - INFO  [CommitProcessor:1:LearnerSessionTracker@116] - Committing global session 0x100015ea6320000
2020-03-18 17:40:44,658 [myid:] - INFO  [CommitProcessor:2:LearnerSessionTracker@116] - Committing global session 0x100015ea6320000
2020-03-18 17:40:44,659 [myid:127.0.0.1:13951] - INFO  [main-SendThread(127.0.0.1:13951):ClientCnxn$SendThread@1420] - Session establishment complete on server localhost/127.0.0.1:13951, session id = 0x100015ea6320000, negotiated timeout = 30000
2020-03-18 17:40:44,659 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@232] - zk1 has session id 0x100015ea6320000
2020-03-18 17:40:44,660 [myid:] - INFO  [main:ZooKeeper@1005] - Initiating client connection, connectString=127.0.0.1:13951 sessionTimeout=30000 watcher=org.apache.zookeeper.test.ClientBase$CountdownWatcher@2d127a61
2020-03-18 17:40:44,660 [myid:] - INFO  [main:ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes
2020-03-18 17:40:44,660 [myid:] - INFO  [main:ClientCnxn@1703] - zookeeper.request.timeout value is 0. feature enabled=false
2020-03-18 17:40:44,662 [myid:127.0.0.1:13951] - INFO  [main-SendThread(127.0.0.1:13951):ClientCnxn$SendThread@1154] - Opening socket connection to server localhost/127.0.0.1:13951.
2020-03-18 17:40:44,662 [myid:127.0.0.1:13951] - INFO  [main-SendThread(127.0.0.1:13951):ClientCnxn$SendThread@1156] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2020-03-18 17:40:44,662 [myid:127.0.0.1:13951] - INFO  [main-SendThread(127.0.0.1:13951):ClientCnxn$SendThread@986] - Socket connection established, initiating session, client: /127.0.0.1:54563, server: localhost/127.0.0.1:13951
2020-03-18 17:40:44,664 [myid:] - INFO  [CommitProcessor:3:LeaderSessionTracker@104] - Committing global session 0x100015ea6320001
2020-03-18 17:40:44,664 [myid:] - INFO  [CommitProcessor:1:LearnerSessionTracker@116] - Committing global session 0x100015ea6320001
2020-03-18 17:40:44,664 [myid:] - INFO  [CommitProcessor:2:LearnerSessionTracker@116] - Committing global session 0x100015ea6320001
2020-03-18 17:40:44,665 [myid:127.0.0.1:13951] - INFO  [main-SendThread(127.0.0.1:13951):ClientCnxn$SendThread@1420] - Session establishment complete on server localhost/127.0.0.1:13951, session id = 0x100015ea6320001, negotiated timeout = 30000
2020-03-18 17:40:44,665 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@235] - zk2 has session id 0x100015ea6320001
2020-03-18 17:40:47,074 [myid:] - INFO  [WorkerSender[myid=1]:FastLeaderElection$Messenger$WorkerSender@492] - WorkerSender is down
2020-03-18 17:40:47,079 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@458] - WorkerReceiver is down
2020-03-18 17:40:49,683 [myid:] - INFO  [main:QuorumUtil@250] - Shutting down quorum peer QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled)
2020-03-18 17:40:49,683 [myid:] - INFO  [main:Follower@292] - shutdown Follower
2020-03-18 17:40:49,684 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):Follower@143] - Disconnected from leader (with address: /127.0.0.1:13958). Was connected for 5293ms. Sync state: true
2020-03-18 17:40:49,684 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):Follower@292] - shutdown Follower
2020-03-18 17:40:49,684 [myid:] - INFO  [main:LearnerZooKeeperServer@160] - Shutting down
2020-03-18 17:40:49,684 [myid:] - ERROR [FollowerRequestProcessor:1:ZooKeeperCriticalThread@49] - Severe unrecoverable error, from thread : FollowerRequestProcessor:1
java.net.SocketException: Socket closed
	at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:118)
	at java.net.SocketOutputStream.write(SocketOutputStream.java:155)
	at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:82)
	at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:140)
	at org.apache.zookeeper.server.quorum.Learner.writePacket(Learner.java:168)
	at org.apache.zookeeper.server.quorum.Learner.request(Learner.java:217)
	at org.apache.zookeeper.server.quorum.FollowerRequestProcessor.run(FollowerRequestProcessor.java:98)
2020-03-18 17:40:49,684 [myid:] - INFO  [FollowerRequestProcessor:1:ZooKeeperServerListenerImpl@43] - Thread FollowerRequestProcessor:1 exits, error code 1
2020-03-18 17:40:49,684 [myid:] - INFO  [FollowerRequestProcessor:1:FollowerRequestProcessor@112] - FollowerRequestProcessor exited loop!
2020-03-18 17:40:49,684 [myid:] - WARN  [Sender-/127.0.0.1:54557:LearnerHandler@361] - Unexpected exception at LearnerHandler Socket[addr=/127.0.0.1,port=54557,localport=13958] tickOfNextAckDeadline:5 synced?:true queuedPacketLength:0
java.net.SocketException: Broken pipe (Write failed)
	at java.net.SocketOutputStream.socketWrite0(Native Method)
	at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:111)
	at java.net.SocketOutputStream.write(SocketOutputStream.java:155)
	at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:82)
	at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:140)
	at org.apache.zookeeper.server.quorum.LearnerHandler.sendPackets(LearnerHandler.java:324)
	at org.apache.zookeeper.server.quorum.LearnerHandler.access$200(LearnerHandler.java:62)
	at org.apache.zookeeper.server.quorum.LearnerHandler$1.run(LearnerHandler.java:746)
2020-03-18 17:40:49,684 [myid:] - INFO  [main:ZooKeeperServer@784] - shutting down
2020-03-18 17:40:49,686 [myid:] - WARN  [SyncThread:1:SendAckRequestProcessor@65] - Closing connection to leader, exception during packet send
java.net.SocketException: Socket closed
	at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:118)
	at java.net.SocketOutputStream.write(SocketOutputStream.java:155)
	at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:82)
	at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:140)
	at org.apache.zookeeper.server.quorum.Learner.writePacket(Learner.java:168)
	at org.apache.zookeeper.server.quorum.SendAckRequestProcessor.flush(SendAckRequestProcessor.java:63)
	at org.apache.zookeeper.server.SyncRequestProcessor.flush(SyncRequestProcessor.java:249)
	at org.apache.zookeeper.server.SyncRequestProcessor.run(SyncRequestProcessor.java:169)
2020-03-18 17:40:49,686 [myid:] - WARN  [LearnerHandler-/127.0.0.1:54557:LearnerHandler@730] - ******* GOODBYE /127.0.0.1:54557 ********
2020-03-18 17:40:49,686 [myid:127.0.0.1:13951] - WARN  [main-SendThread(127.0.0.1:13951):ClientCnxn$SendThread@1272] - Session 0x100015ea6320000 for sever localhost/127.0.0.1:13951, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
EndOfStreamException: Unable to read additional data from server sessionid 0x100015ea6320000, likely server has closed socket
	at org.apache.zookeeper.ClientCnxnSocketNIO.doIO(ClientCnxnSocketNIO.java:75)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:348)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1262)
2020-03-18 17:40:49,685 [myid:127.0.0.1:13951] - WARN  [main-SendThread(127.0.0.1:13951):ClientCnxn$SendThread@1272] - Session 0x100015ea6320001 for sever localhost/127.0.0.1:13951, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
EndOfStreamException: Unable to read additional data from server sessionid 0x100015ea6320001, likely server has closed socket
	at org.apache.zookeeper.ClientCnxnSocketNIO.doIO(ClientCnxnSocketNIO.java:75)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:348)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1262)
2020-03-18 17:40:49,686 [myid:] - INFO  [main:RequestThrottler@244] - Shutting down
2020-03-18 17:40:49,687 [myid:] - INFO  [RequestThrottler:RequestThrottler@205] - Draining request throttler queue
2020-03-18 17:40:49,687 [myid:] - INFO  [RequestThrottler:RequestThrottler@181] - RequestThrottler shutdown. Dropped 0 requests
2020-03-18 17:40:49,687 [myid:] - INFO  [main:FollowerRequestProcessor@148] - Shutting down
2020-03-18 17:40:49,687 [myid:] - INFO  [main:CommitProcessor@617] - Shutting down
2020-03-18 17:40:49,688 [myid:] - INFO  [main:FinalRequestProcessor@662] - shutdown of request processor complete
2020-03-18 17:40:49,688 [myid:] - INFO  [CommitProcessor:1:CommitProcessor@406] - CommitProcessor exited loop!
2020-03-18 17:40:49,696 [myid:] - INFO  [main:FileTxnSnapLog@363] - 2 txns loaded in 0 ms
2020-03-18 17:40:49,697 [myid:] - INFO  [main:SyncRequestProcessor@256] - Shutting down
2020-03-18 17:40:49,697 [myid:] - INFO  [SyncThread:1:SyncRequestProcessor@225] - SyncRequestProcessor exited!
2020-03-18 17:40:49,698 [myid:] - INFO  [ConnnectionExpirer:NIOServerCnxnFactory$ConnectionExpirerThread@578] - ConnnectionExpirerThread interrupted
2020-03-18 17:40:49,698 [myid:] - INFO  [NIOServerCxnFactory.SelectorThread-0:NIOServerCnxnFactory$SelectorThread@411] - selector thread exitted run method
2020-03-18 17:40:49,698 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):QuorumPeer@863] - Peer state changed: looking
2020-03-18 17:40:49,699 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):QuorumPeer@1501] - PeerState set to LOOKING
2020-03-18 17:40:49,698 [myid:] - INFO  [NIOServerCxnFactory.AcceptThread:/127.0.0.1:13951:NIOServerCnxnFactory$AcceptThread@209] - accept thread exitted run method
2020-03-18 17:40:49,699 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):QuorumPeer@1483] - QuorumPeer main thread exited
2020-03-18 17:40:49,700 [myid:] - INFO  [QuorumPeerListener:QuorumCnxManager$Listener@961] - Leaving listener
2020-03-18 17:40:49,700 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 1, my id = 2
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:40:49,700 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 2, my id = 1
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:40:49,700 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:40:49,700 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:40:49,701 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 3 my id = 1
2020-03-18 17:40:49,700 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:40:49,700 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:40:49,701 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 2 my id = 1
2020-03-18 17:40:49,701 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:40:49,702 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 1 my id = 2
2020-03-18 17:40:49,701 [myid:] - INFO  [main:QuorumUtil@254] - Shutting down leader election QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled)
2020-03-18 17:40:49,702 [myid:] - INFO  [main:QuorumUtil@259] - Waiting for QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled) to exit thread
2020-03-18 17:40:49,702 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@294] - Shutting down s1
2020-03-18 17:40:49,701 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 3, my id = 1
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:40:49,703 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:40:49,700 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 1, my id = 3
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:40:49,703 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:40:49,703 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:40:49,703 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 1 my id = 3
2020-03-18 17:40:50,377 [myid:] - INFO  [WorkerSender[myid=1]:FastLeaderElection$Messenger$WorkerSender@492] - WorkerSender is down
2020-03-18 17:40:50,378 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@458] - WorkerReceiver is down
2020-03-18 17:40:50,941 [myid:127.0.0.1:13951] - INFO  [main-SendThread(127.0.0.1:13951):ClientCnxn$SendThread@1154] - Opening socket connection to server localhost/127.0.0.1:13951.
2020-03-18 17:40:50,941 [myid:127.0.0.1:13951] - INFO  [main-SendThread(127.0.0.1:13951):ClientCnxn$SendThread@1156] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2020-03-18 17:40:50,941 [myid:127.0.0.1:13951] - WARN  [main-SendThread(127.0.0.1:13951):ClientCnxn$SendThread@1272] - Session 0x100015ea6320000 for sever localhost/127.0.0.1:13951, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:717)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:342)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1262)
2020-03-18 17:40:51,150 [myid:127.0.0.1:13951] - INFO  [main-SendThread(127.0.0.1:13951):ClientCnxn$SendThread@1154] - Opening socket connection to server localhost/127.0.0.1:13951.
2020-03-18 17:40:51,150 [myid:127.0.0.1:13951] - INFO  [main-SendThread(127.0.0.1:13951):ClientCnxn$SendThread@1156] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2020-03-18 17:40:51,151 [myid:127.0.0.1:13951] - WARN  [main-SendThread(127.0.0.1:13951):ClientCnxn$SendThread@1272] - Session 0x100015ea6320001 for sever localhost/127.0.0.1:13951, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:717)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:342)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1262)
2020-03-18 17:40:52,511 [myid:127.0.0.1:13951] - INFO  [main-SendThread(127.0.0.1:13951):ClientCnxn$SendThread@1154] - Opening socket connection to server localhost/127.0.0.1:13951.
2020-03-18 17:40:52,511 [myid:127.0.0.1:13951] - INFO  [main-SendThread(127.0.0.1:13951):ClientCnxn$SendThread@1156] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2020-03-18 17:40:52,511 [myid:127.0.0.1:13951] - WARN  [main-SendThread(127.0.0.1:13951):ClientCnxn$SendThread@1272] - Session 0x100015ea6320001 for sever localhost/127.0.0.1:13951, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:717)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:342)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1262)
2020-03-18 17:40:53,034 [myid:127.0.0.1:13951] - INFO  [main-SendThread(127.0.0.1:13951):ClientCnxn$SendThread@1154] - Opening socket connection to server localhost/127.0.0.1:13951.
2020-03-18 17:40:53,034 [myid:127.0.0.1:13951] - INFO  [main-SendThread(127.0.0.1:13951):ClientCnxn$SendThread@1156] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2020-03-18 17:40:53,035 [myid:127.0.0.1:13951] - WARN  [main-SendThread(127.0.0.1:13951):ClientCnxn$SendThread@1272] - Session 0x100015ea6320000 for sever localhost/127.0.0.1:13951, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:717)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:342)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1262)
2020-03-18 17:40:53,701 [myid:127.0.0.1:13951] - INFO  [main-SendThread(127.0.0.1:13951):ClientCnxn$SendThread@1154] - Opening socket connection to server localhost/127.0.0.1:13951.
2020-03-18 17:40:53,701 [myid:127.0.0.1:13951] - INFO  [main-SendThread(127.0.0.1:13951):ClientCnxn$SendThread@1156] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2020-03-18 17:40:53,701 [myid:127.0.0.1:13951] - WARN  [main-SendThread(127.0.0.1:13951):ClientCnxn$SendThread@1272] - Session 0x100015ea6320001 for sever localhost/127.0.0.1:13951, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:717)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:342)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1262)
2020-03-18 17:40:54,387 [myid:127.0.0.1:13951] - INFO  [main-SendThread(127.0.0.1:13951):ClientCnxn$SendThread@1154] - Opening socket connection to server localhost/127.0.0.1:13951.
2020-03-18 17:40:54,387 [myid:127.0.0.1:13951] - INFO  [main-SendThread(127.0.0.1:13951):ClientCnxn$SendThread@1156] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2020-03-18 17:40:54,388 [myid:127.0.0.1:13951] - WARN  [main-SendThread(127.0.0.1:13951):ClientCnxn$SendThread@1272] - Session 0x100015ea6320000 for sever localhost/127.0.0.1:13951, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:717)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:342)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1262)
2020-03-18 17:40:55,521 [myid:127.0.0.1:13951] - INFO  [main-SendThread(127.0.0.1:13951):ClientCnxn$SendThread@1154] - Opening socket connection to server localhost/127.0.0.1:13951.
2020-03-18 17:40:55,521 [myid:127.0.0.1:13951] - INFO  [main-SendThread(127.0.0.1:13951):ClientCnxn$SendThread@1156] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2020-03-18 17:40:55,522 [myid:127.0.0.1:13951] - WARN  [main-SendThread(127.0.0.1:13951):ClientCnxn$SendThread@1272] - Session 0x100015ea6320001 for sever localhost/127.0.0.1:13951, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:717)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:342)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1262)
2020-03-18 17:40:55,766 [myid:127.0.0.1:13951] - INFO  [main-SendThread(127.0.0.1:13951):ClientCnxn$SendThread@1154] - Opening socket connection to server localhost/127.0.0.1:13951.
2020-03-18 17:40:55,766 [myid:127.0.0.1:13951] - INFO  [main-SendThread(127.0.0.1:13951):ClientCnxn$SendThread@1156] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2020-03-18 17:40:55,767 [myid:127.0.0.1:13951] - WARN  [main-SendThread(127.0.0.1:13951):ClientCnxn$SendThread@1272] - Session 0x100015ea6320000 for sever localhost/127.0.0.1:13951, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:717)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:342)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1262)
2020-03-18 17:40:56,696 [myid:127.0.0.1:13951] - INFO  [main-SendThread(127.0.0.1:13951):ClientCnxn$SendThread@1154] - Opening socket connection to server localhost/127.0.0.1:13951.
2020-03-18 17:40:56,696 [myid:127.0.0.1:13951] - INFO  [main-SendThread(127.0.0.1:13951):ClientCnxn$SendThread@1156] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2020-03-18 17:40:56,697 [myid:127.0.0.1:13951] - WARN  [main-SendThread(127.0.0.1:13951):ClientCnxn$SendThread@1272] - Session 0x100015ea6320001 for sever localhost/127.0.0.1:13951, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:717)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:342)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1262)
2020-03-18 17:40:56,723 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@302] - Restarting follower: 1
2020-03-18 17:40:56,723 [myid:] - INFO  [main:QuorumUtil@204] - Creating QuorumPeer 1; public port 13951
2020-03-18 17:40:56,724 [myid:] - INFO  [main:ServerCnxnFactory@169] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2020-03-18 17:40:56,724 [myid:] - WARN  [main:ServerCnxnFactory@309] - maxCnxns is not configured, using default value 0.
2020-03-18 17:40:56,724 [myid:] - INFO  [main:NIOServerCnxnFactory@666] - Configuring NIO connection handler with 10s sessionless connection timeout, 1 selector thread(s), 8 worker threads, and 64 kB direct buffers.
2020-03-18 17:40:56,724 [myid:] - INFO  [main:NIOServerCnxnFactory@674] - binding to port /127.0.0.1:13951
2020-03-18 17:40:56,725 [myid:] - INFO  [main:FileTxnSnapLog@124] - zookeeper.snapshot.trust.empty : false
2020-03-18 17:40:56,725 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:56,726 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:56,726 [myid:] - INFO  [main:ZKDatabase@132] - zookeeper.snapshotSizeFactor = 0.33
2020-03-18 17:40:56,726 [myid:] - INFO  [main:ZKDatabase@152] - zookeeper.commitLogCount=500
2020-03-18 17:40:56,726 [myid:] - WARN  [main:QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:40:56,727 [myid:] - INFO  [main:FileSnap@85] - Reading snapshot /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test6981947867598337616.junit.dir/version-2/snapshot.100000002
2020-03-18 17:40:56,727 [myid:] - INFO  [main:DataTree@1737] - The digest value is empty in snapshot
2020-03-18 17:40:56,774 [myid:] - INFO  [main:FileTxnSnapLog@363] - 4086 txns loaded in 46 ms
2020-03-18 17:40:56,774 [myid:] - INFO  [main:ZKDatabase@289] - Snapshot loaded in 48 ms, highest zxid is 0x100000ff8, digest is 8766293151232
2020-03-18 17:40:56,775 [myid:] - INFO  [main:QuorumPeer@2503] - Using 6000ms as the quorum cnxn socket timeout
2020-03-18 17:40:56,776 [myid:] - INFO  [main:QuorumCnxManager$Listener@906] - Election port bind maximum retries is 3
2020-03-18 17:40:56,777 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13951
2020-03-18 17:40:56,778 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13953:QuorumCnxManager$Listener$ListenerHandler@1047] - My election bind port: /127.0.0.1:13953
2020-03-18 17:40:56,779 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):QuorumPeer@1371] - LOOKING
2020-03-18 17:40:56,779 [myid:] - INFO  [NIOWorkerThread-1:NIOServerCnxn@507] - Processing stat command from /127.0.0.1:54800
2020-03-18 17:40:56,779 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):FastLeaderElection@931] - New election. My id = 1, proposed zxid=0x100000ff8
2020-03-18 17:40:56,780 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13956:QuorumCnxManager$Listener$ListenerHandler@1052] - Received connection request /127.0.0.1:54801
2020-03-18 17:40:56,780 [myid:] - INFO  [WorkerSender[myid=1]:QuorumCnxManager@462] - Have smaller server identifier, so dropping the connection: (2, 1)
2020-03-18 17:40:56,782 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13953:QuorumCnxManager$Listener$ListenerHandler@1052] - Received connection request /127.0.0.1:54802
2020-03-18 17:40:56,782 [myid:] - INFO  [WorkerSender[myid=1]:QuorumCnxManager@462] - Have smaller server identifier, so dropping the connection: (3, 1)
2020-03-18 17:40:56,782 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13959:QuorumCnxManager$Listener$ListenerHandler@1052] - Received connection request /127.0.0.1:54803
2020-03-18 17:40:56,782 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:1, n.state:LOOKING, n.leader:1, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x100000ff8, message format version:0x2, n.config version:0x0
2020-03-18 17:40:56,783 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13953:QuorumCnxManager$Listener$ListenerHandler@1052] - Received connection request /127.0.0.1:54804
2020-03-18 17:40:56,783 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:FOLLOWING; n.sid:1, n.state:LOOKING, n.leader:1, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x100000ff8, message format version:0x2, n.config version:0x0
2020-03-18 17:40:56,784 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:2, n.state:FOLLOWING, n.leader:3, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:56,785 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:2, n.state:FOLLOWING, n.leader:3, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:56,785 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LEADING; n.sid:1, n.state:LOOKING, n.leader:1, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x100000ff8, message format version:0x2, n.config version:0x0
2020-03-18 17:40:56,785 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:3, n.state:LEADING, n.leader:3, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:56,786 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):QuorumPeer@857] - Peer state changed: following
2020-03-18 17:40:56,786 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):QuorumPeer@1453] - FOLLOWING
2020-03-18 17:40:56,786 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):ZooKeeperServer@1246] - minSessionTimeout set to 4000
2020-03-18 17:40:56,786 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):ZooKeeperServer@1255] - maxSessionTimeout set to 40000
2020-03-18 17:40:56,786 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):ResponseCache@45] - Response cache size is initialized with value 400.
2020-03-18 17:40:56,786 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):ResponseCache@45] - Response cache size is initialized with value 400.
2020-03-18 17:40:56,786 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):RequestPathMetricsCollector@111] - zookeeper.pathStats.slotCapacity = 60
2020-03-18 17:40:56,786 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):RequestPathMetricsCollector@112] - zookeeper.pathStats.slotDuration = 15
2020-03-18 17:40:56,786 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):RequestPathMetricsCollector@113] - zookeeper.pathStats.maxDepth = 6
2020-03-18 17:40:56,786 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):RequestPathMetricsCollector@114] - zookeeper.pathStats.initialDelay = 5
2020-03-18 17:40:56,786 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:FOLLOWING; n.sid:3, n.state:LEADING, n.leader:3, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:56,787 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):RequestPathMetricsCollector@115] - zookeeper.pathStats.delay = 5
2020-03-18 17:40:56,787 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):RequestPathMetricsCollector@116] - zookeeper.pathStats.enabled = false
2020-03-18 17:40:56,787 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):ZooKeeperServer@1470] - The max bytes for all large requests are set to 104857600
2020-03-18 17:40:56,787 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):ZooKeeperServer@1484] - The large request threshold is set to -1
2020-03-18 17:40:56,787 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):ZooKeeperServer@329] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 clientPortListenBacklog -1 datadir /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test6981947867598337616.junit.dir/version-2 snapdir /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test6981947867598337616.junit.dir/version-2
2020-03-18 17:40:56,787 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):Follower@75] - FOLLOWING - LEADER ELECTION TOOK - 8 MS
2020-03-18 17:40:56,787 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):QuorumPeer@863] - Peer state changed: following - discovery
2020-03-18 17:40:56,789 [myid:] - INFO  [LeaderConnector-/127.0.0.1:13958:Learner$LeaderConnector@328] - Successfully connected to leader, using address: /127.0.0.1:13958
2020-03-18 17:40:56,790 [myid:] - INFO  [LearnerHandler-/127.0.0.1:54808:LearnerHandler@504] - Follower sid: 1 : info : 127.0.0.1:13952:13953:participant;127.0.0.1:13951
2020-03-18 17:40:56,790 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):QuorumPeer@863] - Peer state changed: following - synchronization
2020-03-18 17:40:56,791 [myid:] - INFO  [LearnerHandler-/127.0.0.1:54808:ZKDatabase@347] - On disk txn sync disabled
2020-03-18 17:40:56,791 [myid:] - INFO  [LearnerHandler-/127.0.0.1:54808:LearnerHandler@800] - Synchronizing with Learner sid: 1 maxCommittedLog=0x100002c73 minCommittedLog=0x100002a7f lastProcessedZxid=0x100002c73 peerLastZxid=0x100000ff8
2020-03-18 17:40:56,791 [myid:] - WARN  [LearnerHandler-/127.0.0.1:54808:LearnerHandler@903] - Unhandled scenario for peer sid: 1 maxCommittedLog=0x100002c73 minCommittedLog=0x100002a7f lastProcessedZxid=0x100002c73 peerLastZxid=0x100000ff8 txnLogSyncEnabled=false
2020-03-18 17:40:56,791 [myid:] - INFO  [LearnerHandler-/127.0.0.1:54808:LearnerHandler@565] - Sending snapshot last zxid of peer is 0x100000ff8, zxid of leader is 0x100002c75, send zxid of db as 0x100002c73, 1 concurrent snapshot sync, snapshot sync was exempt from throttle
2020-03-18 17:40:56,791 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):QuorumPeer@868] - Peer state changed: following - synchronization - snap
2020-03-18 17:40:56,791 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):Learner@514] - Getting a snapshot from leader 0x100002c73
2020-03-18 17:40:56,791 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:56,791 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:56,835 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):Learner@575] - Got zxid 0x100002c74 expected 0x1
2020-03-18 17:40:56,836 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):Learner@675] - Learner received NEWLEADER message
2020-03-18 17:40:56,838 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:40:56,838 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):FileTxnSnapLog@470] - Snapshotting: 0x100002c88 to /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test6981947867598337616.junit.dir/version-2/snapshot.100002c88
2020-03-18 17:40:56,891 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):ZooKeeperServer@519] - Snapshot taken in 53 ms
2020-03-18 17:40:56,894 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):Learner@659] - Learner received UPTODATE message
2020-03-18 17:40:56,894 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):QuorumPeer@868] - Peer state changed: following - synchronization
2020-03-18 17:40:56,895 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):CommitProcessor@476] - Configuring CommitProcessor with readBatchSize -1 commitBatchSize 1
2020-03-18 17:40:56,895 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):CommitProcessor@438] - Configuring CommitProcessor with 4 worker threads.
2020-03-18 17:40:56,897 [myid:] - INFO  [SyncThread:1:FileTxnLog@284] - Creating new log file: log.100002c89
2020-03-18 17:40:56,898 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):QuorumPeer@863] - Peer state changed: following - broadcast
2020-03-18 17:40:56,898 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):Follower@170] - Got zxid 0x100002d5b expected 0x1
2020-03-18 17:40:57,031 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13951
2020-03-18 17:40:57,032 [myid:] - INFO  [NIOWorkerThread-2:NIOServerCnxn@507] - Processing stat command from /127.0.0.1:54810
2020-03-18 17:40:57,032 [myid:] - INFO  [NIOWorkerThread-2:StatCommand@52] - Stat command output
2020-03-18 17:40:57,333 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@305] - Shutdown follower: 1
2020-03-18 17:40:57,333 [myid:] - INFO  [main:QuorumUtil@250] - Shutting down quorum peer QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled)
2020-03-18 17:40:57,333 [myid:] - INFO  [main:Follower@292] - shutdown Follower
2020-03-18 17:40:57,334 [myid:] - INFO  [main:LearnerZooKeeperServer@160] - Shutting down
2020-03-18 17:40:57,334 [myid:] - INFO  [main:ZooKeeperServer@784] - shutting down
2020-03-18 17:40:57,334 [myid:] - ERROR [LearnerHandler-/127.0.0.1:54808:LearnerHandler@707] - Unexpected exception causing shutdown while sock still open
java.net.SocketException: Connection reset
	at java.net.SocketInputStream.read(SocketInputStream.java:210)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:96)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:134)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:643)
2020-03-18 17:40:57,334 [myid:] - WARN  [Sender-/127.0.0.1:54808:LearnerHandler@361] - Unexpected exception at LearnerHandler Socket[addr=/127.0.0.1,port=54808,localport=13958] tickOfNextAckDeadline:9 synced?:true queuedPacketLength:0
java.net.SocketException: Broken pipe (Write failed)
	at java.net.SocketOutputStream.socketWrite0(Native Method)
	at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:111)
	at java.net.SocketOutputStream.write(SocketOutputStream.java:155)
	at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:82)
	at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:140)
	at org.apache.zookeeper.server.quorum.LearnerHandler.sendPackets(LearnerHandler.java:324)
	at org.apache.zookeeper.server.quorum.LearnerHandler.access$200(LearnerHandler.java:62)
	at org.apache.zookeeper.server.quorum.LearnerHandler$1.run(LearnerHandler.java:746)
2020-03-18 17:40:57,334 [myid:] - WARN  [LearnerHandler-/127.0.0.1:54808:LearnerHandler@730] - ******* GOODBYE /127.0.0.1:54808 ********
2020-03-18 17:40:57,334 [myid:] - INFO  [main:RequestThrottler@244] - Shutting down
2020-03-18 17:40:57,335 [myid:] - INFO  [RequestThrottler:RequestThrottler@205] - Draining request throttler queue
2020-03-18 17:40:57,335 [myid:] - INFO  [RequestThrottler:RequestThrottler@181] - RequestThrottler shutdown. Dropped 0 requests
2020-03-18 17:40:57,336 [myid:] - INFO  [main:FollowerRequestProcessor@148] - Shutting down
2020-03-18 17:40:57,336 [myid:] - INFO  [main:CommitProcessor@617] - Shutting down
2020-03-18 17:40:57,336 [myid:] - INFO  [CommitProcessor:1:CommitProcessor@406] - CommitProcessor exited loop!
2020-03-18 17:40:57,336 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):Follower@129] - Exception when following the leader
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:96)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:134)
	at org.apache.zookeeper.server.quorum.Learner.readPacket(Learner.java:182)
	at org.apache.zookeeper.server.quorum.Follower.followLeader(Follower.java:125)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:1455)
2020-03-18 17:40:57,336 [myid:] - INFO  [FollowerRequestProcessor:1:FollowerRequestProcessor@112] - FollowerRequestProcessor exited loop!
2020-03-18 17:40:57,336 [myid:] - INFO  [main:FinalRequestProcessor@662] - shutdown of request processor complete
2020-03-18 17:40:57,337 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):Follower@143] - Disconnected from leader (with address: /127.0.0.1:13958). Was connected for 548ms. Sync state: true
2020-03-18 17:40:57,337 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):Follower@292] - shutdown Follower
2020-03-18 17:40:57,338 [myid:] - INFO  [main:SyncRequestProcessor@256] - Shutting down
2020-03-18 17:40:57,339 [myid:] - INFO  [SyncThread:1:SyncRequestProcessor@225] - SyncRequestProcessor exited!
2020-03-18 17:40:57,339 [myid:] - INFO  [ConnnectionExpirer:NIOServerCnxnFactory$ConnectionExpirerThread@578] - ConnnectionExpirerThread interrupted
2020-03-18 17:40:57,340 [myid:] - INFO  [NIOServerCxnFactory.AcceptThread:/127.0.0.1:13951:NIOServerCnxnFactory$AcceptThread@209] - accept thread exitted run method
2020-03-18 17:40:57,342 [myid:] - INFO  [NIOServerCxnFactory.SelectorThread-0:NIOServerCnxnFactory$SelectorThread@411] - selector thread exitted run method
2020-03-18 17:40:57,342 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):QuorumPeer@863] - Peer state changed: looking
2020-03-18 17:40:57,343 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):QuorumPeer@1501] - PeerState set to LOOKING
2020-03-18 17:40:57,343 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):QuorumPeer@1483] - QuorumPeer main thread exited
2020-03-18 17:40:57,343 [myid:] - INFO  [QuorumPeerListener:QuorumCnxManager$Listener@961] - Leaving listener
2020-03-18 17:40:57,343 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:40:57,343 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 2 my id = 1
2020-03-18 17:40:57,343 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:40:57,343 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 2, my id = 1
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:40:57,344 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:40:57,343 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 1, my id = 2
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:40:57,344 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:40:57,344 [myid:] - INFO  [main:QuorumUtil@254] - Shutting down leader election QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled)
2020-03-18 17:40:57,344 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 3 my id = 1
2020-03-18 17:40:57,343 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 3, my id = 1
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:40:57,345 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:40:57,343 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 1, my id = 3
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:40:57,345 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:40:57,345 [myid:] - INFO  [main:QuorumUtil@259] - Waiting for QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled) to exit thread
2020-03-18 17:40:57,345 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:40:57,345 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:40:57,345 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 1 my id = 3
2020-03-18 17:40:57,345 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 1 my id = 2
2020-03-18 17:40:57,542 [myid:127.0.0.1:13951] - INFO  [main-SendThread(127.0.0.1:13951):ClientCnxn$SendThread@1154] - Opening socket connection to server localhost/127.0.0.1:13951.
2020-03-18 17:40:57,542 [myid:127.0.0.1:13951] - INFO  [main-SendThread(127.0.0.1:13951):ClientCnxn$SendThread@1156] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2020-03-18 17:40:57,543 [myid:127.0.0.1:13951] - WARN  [main-SendThread(127.0.0.1:13951):ClientCnxn$SendThread@1272] - Session 0x100015ea6320000 for sever localhost/127.0.0.1:13951, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:717)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:342)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1262)
2020-03-18 17:40:57,649 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@308] - Restarting follower: 1
2020-03-18 17:40:57,649 [myid:] - INFO  [main:QuorumUtil@204] - Creating QuorumPeer 1; public port 13951
2020-03-18 17:40:57,650 [myid:] - INFO  [main:ServerCnxnFactory@169] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2020-03-18 17:40:57,650 [myid:] - WARN  [main:ServerCnxnFactory@309] - maxCnxns is not configured, using default value 0.
2020-03-18 17:40:57,650 [myid:] - INFO  [main:NIOServerCnxnFactory@666] - Configuring NIO connection handler with 10s sessionless connection timeout, 1 selector thread(s), 8 worker threads, and 64 kB direct buffers.
2020-03-18 17:40:57,650 [myid:] - INFO  [main:NIOServerCnxnFactory@674] - binding to port /127.0.0.1:13951
2020-03-18 17:40:57,650 [myid:] - INFO  [main:FileTxnSnapLog@124] - zookeeper.snapshot.trust.empty : false
2020-03-18 17:40:57,651 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:57,651 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:40:57,651 [myid:] - INFO  [main:ZKDatabase@132] - zookeeper.snapshotSizeFactor = 0.33
2020-03-18 17:40:57,651 [myid:] - INFO  [main:ZKDatabase@152] - zookeeper.commitLogCount=500
2020-03-18 17:40:57,651 [myid:] - WARN  [main:QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:40:57,652 [myid:] - INFO  [main:FileSnap@85] - Reading snapshot /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test6981947867598337616.junit.dir/version-2/snapshot.100002c88
2020-03-18 17:40:57,696 [myid:] - INFO  [main:DataTree@1730] - The digest in the snapshot has digest version of 2, , with zxid as 0x100002c88, and digest value as 24428243291923
2020-03-18 17:40:57,708 [myid:] - INFO  [main:FileTxnSnapLog@363] - 739 txns loaded in 5 ms
2020-03-18 17:40:57,709 [myid:] - INFO  [main:ZKDatabase@289] - Snapshot loaded in 57 ms, highest zxid is 0x100002f6b, digest is 26004283469563
2020-03-18 17:40:57,709 [myid:] - INFO  [main:QuorumPeer@2503] - Using 6000ms as the quorum cnxn socket timeout
2020-03-18 17:40:57,710 [myid:] - INFO  [main:QuorumCnxManager$Listener@906] - Election port bind maximum retries is 3
2020-03-18 17:40:57,711 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13951
2020-03-18 17:40:57,711 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13953:QuorumCnxManager$Listener$ListenerHandler@1047] - My election bind port: /127.0.0.1:13953
2020-03-18 17:40:57,712 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):QuorumPeer@1371] - LOOKING
2020-03-18 17:40:57,712 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):FastLeaderElection@931] - New election. My id = 1, proposed zxid=0x100002f6b
2020-03-18 17:40:57,713 [myid:] - INFO  [NIOWorkerThread-1:NIOServerCnxn@507] - Processing stat command from /127.0.0.1:54815
2020-03-18 17:40:57,714 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13956:QuorumCnxManager$Listener$ListenerHandler@1052] - Received connection request /127.0.0.1:54816
2020-03-18 17:40:57,714 [myid:] - INFO  [WorkerSender[myid=1]:QuorumCnxManager@462] - Have smaller server identifier, so dropping the connection: (2, 1)
2020-03-18 17:40:57,714 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13953:QuorumCnxManager$Listener$ListenerHandler@1052] - Received connection request /127.0.0.1:54817
2020-03-18 17:40:57,714 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13959:QuorumCnxManager$Listener$ListenerHandler@1052] - Received connection request /127.0.0.1:54818
2020-03-18 17:40:57,714 [myid:] - INFO  [WorkerSender[myid=1]:QuorumCnxManager@462] - Have smaller server identifier, so dropping the connection: (3, 1)
2020-03-18 17:40:57,715 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:1, n.state:LOOKING, n.leader:1, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x100002f6b, message format version:0x2, n.config version:0x0
2020-03-18 17:40:57,715 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13953:QuorumCnxManager$Listener$ListenerHandler@1052] - Received connection request /127.0.0.1:54819
2020-03-18 17:40:57,715 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:FOLLOWING; n.sid:1, n.state:LOOKING, n.leader:1, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x100002f6b, message format version:0x2, n.config version:0x0
2020-03-18 17:40:57,716 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:2, n.state:FOLLOWING, n.leader:3, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:57,716 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LEADING; n.sid:1, n.state:LOOKING, n.leader:1, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x100002f6b, message format version:0x2, n.config version:0x0
2020-03-18 17:40:57,716 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:3, n.state:LEADING, n.leader:3, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:57,716 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:2, n.state:FOLLOWING, n.leader:3, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:57,717 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):QuorumPeer@857] - Peer state changed: following
2020-03-18 17:40:57,717 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):QuorumPeer@1453] - FOLLOWING
2020-03-18 17:40:57,717 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):ZooKeeperServer@1246] - minSessionTimeout set to 4000
2020-03-18 17:40:57,717 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):ZooKeeperServer@1255] - maxSessionTimeout set to 40000
2020-03-18 17:40:57,717 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):ResponseCache@45] - Response cache size is initialized with value 400.
2020-03-18 17:40:57,717 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):ResponseCache@45] - Response cache size is initialized with value 400.
2020-03-18 17:40:57,717 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):RequestPathMetricsCollector@111] - zookeeper.pathStats.slotCapacity = 60
2020-03-18 17:40:57,717 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):RequestPathMetricsCollector@112] - zookeeper.pathStats.slotDuration = 15
2020-03-18 17:40:57,717 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):RequestPathMetricsCollector@113] - zookeeper.pathStats.maxDepth = 6
2020-03-18 17:40:57,717 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):RequestPathMetricsCollector@114] - zookeeper.pathStats.initialDelay = 5
2020-03-18 17:40:57,717 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):RequestPathMetricsCollector@115] - zookeeper.pathStats.delay = 5
2020-03-18 17:40:57,717 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):RequestPathMetricsCollector@116] - zookeeper.pathStats.enabled = false
2020-03-18 17:40:57,717 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):ZooKeeperServer@1470] - The max bytes for all large requests are set to 104857600
2020-03-18 17:40:57,717 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):ZooKeeperServer@1484] - The large request threshold is set to -1
2020-03-18 17:40:57,718 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):ZooKeeperServer@329] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 clientPortListenBacklog -1 datadir /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test6981947867598337616.junit.dir/version-2 snapdir /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test6981947867598337616.junit.dir/version-2
2020-03-18 17:40:57,718 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):Follower@75] - FOLLOWING - LEADER ELECTION TOOK - 6 MS
2020-03-18 17:40:57,718 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):QuorumPeer@863] - Peer state changed: following - discovery
2020-03-18 17:40:57,718 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:FOLLOWING; n.sid:3, n.state:LEADING, n.leader:3, n.round:0x1, n.peerEpoch:0x1, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:40:57,719 [myid:] - INFO  [LeaderConnector-/127.0.0.1:13958:Learner$LeaderConnector@328] - Successfully connected to leader, using address: /127.0.0.1:13958
2020-03-18 17:40:57,720 [myid:] - INFO  [LearnerHandler-/127.0.0.1:54823:LearnerHandler@504] - Follower sid: 1 : info : 127.0.0.1:13952:13953:participant;127.0.0.1:13951
2020-03-18 17:40:57,720 [myid:] - INFO  [LearnerHandler-/127.0.0.1:54823:ZKDatabase@347] - On disk txn sync disabled
2020-03-18 17:40:57,720 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):QuorumPeer@863] - Peer state changed: following - synchronization
2020-03-18 17:40:57,720 [myid:] - INFO  [LearnerHandler-/127.0.0.1:54823:LearnerHandler@800] - Synchronizing with Learner sid: 1 maxCommittedLog=0x100002f93 minCommittedLog=0x100002d9f lastProcessedZxid=0x100002f93 peerLastZxid=0x100002f6b
2020-03-18 17:40:57,721 [myid:] - INFO  [LearnerHandler-/127.0.0.1:54823:LearnerHandler@864] - Using committedLog for peer sid: 1
2020-03-18 17:40:57,721 [myid:] - INFO  [LearnerHandler-/127.0.0.1:54823:LearnerHandler@972] - Sending DIFF zxid=0x100002f93  for peer sid: 1
2020-03-18 17:40:57,722 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):Learner@509] - Getting a diff from the leader 0x100002f93
2020-03-18 17:40:57,722 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):QuorumPeer@868] - Peer state changed: following - synchronization - diff
2020-03-18 17:40:57,722 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):Learner@575] - Got zxid 0x100002f6c expected 0x1
2020-03-18 17:40:57,722 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):Learner@675] - Learner received NEWLEADER message
2020-03-18 17:40:57,723 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:40:57,726 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):Learner@659] - Learner received UPTODATE message
2020-03-18 17:40:57,726 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):QuorumPeer@868] - Peer state changed: following - synchronization
2020-03-18 17:40:57,726 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):CommitProcessor@476] - Configuring CommitProcessor with readBatchSize -1 commitBatchSize 1
2020-03-18 17:40:57,726 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):CommitProcessor@438] - Configuring CommitProcessor with 4 worker threads.
2020-03-18 17:40:57,727 [myid:] - INFO  [SyncThread:1:FileTxnLog@284] - Creating new log file: log.100002f6c
2020-03-18 17:40:57,727 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):QuorumPeer@863] - Peer state changed: following - broadcast
2020-03-18 17:40:57,738 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):Follower@170] - Got zxid 0x100002f94 expected 0x1
2020-03-18 17:40:57,964 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13951
2020-03-18 17:40:57,965 [myid:] - INFO  [NIOWorkerThread-2:NIOServerCnxn@507] - Processing stat command from /127.0.0.1:54832
2020-03-18 17:40:57,965 [myid:] - INFO  [NIOWorkerThread-2:StatCommand@52] - Stat command output
2020-03-18 17:40:57,965 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@310] - Setting up server: 1
2020-03-18 17:40:58,768 [myid:127.0.0.1:13951] - INFO  [main-SendThread(127.0.0.1:13951):ClientCnxn$SendThread@1154] - Opening socket connection to server localhost/127.0.0.1:13951.
2020-03-18 17:40:58,768 [myid:127.0.0.1:13951] - INFO  [main-SendThread(127.0.0.1:13951):ClientCnxn$SendThread@1156] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2020-03-18 17:40:58,768 [myid:127.0.0.1:13951] - INFO  [main-SendThread(127.0.0.1:13951):ClientCnxn$SendThread@986] - Socket connection established, initiating session, client: /127.0.0.1:54871, server: localhost/127.0.0.1:13951
2020-03-18 17:40:58,769 [myid:] - INFO  [NIOWorkerThread-3:Learner@137] - Revalidating client: 0x100015ea6320001
2020-03-18 17:40:58,770 [myid:127.0.0.1:13951] - INFO  [main-SendThread(127.0.0.1:13951):ClientCnxn$SendThread@1420] - Session establishment complete on server localhost/127.0.0.1:13951, session id = 0x100015ea6320001, negotiated timeout = 30000
2020-03-18 17:40:59,437 [myid:127.0.0.1:13951] - INFO  [main-SendThread(127.0.0.1:13951):ClientCnxn$SendThread@1154] - Opening socket connection to server localhost/127.0.0.1:13951.
2020-03-18 17:40:59,437 [myid:127.0.0.1:13951] - INFO  [main-SendThread(127.0.0.1:13951):ClientCnxn$SendThread@1156] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2020-03-18 17:40:59,437 [myid:127.0.0.1:13951] - INFO  [main-SendThread(127.0.0.1:13951):ClientCnxn$SendThread@986] - Socket connection established, initiating session, client: /127.0.0.1:54876, server: localhost/127.0.0.1:13951
2020-03-18 17:40:59,437 [myid:] - INFO  [NIOWorkerThread-3:Learner@137] - Revalidating client: 0x100015ea6320000
2020-03-18 17:40:59,439 [myid:127.0.0.1:13951] - INFO  [main-SendThread(127.0.0.1:13951):ClientCnxn$SendThread@1420] - Session establishment complete on server localhost/127.0.0.1:13951, session id = 0x100015ea6320000, negotiated timeout = 30000
2020-03-18 17:40:59,783 [myid:] - INFO  [WorkerSender[myid=1]:FastLeaderElection$Messenger$WorkerSender@492] - WorkerSender is down
2020-03-18 17:40:59,792 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@458] - WorkerReceiver is down
2020-03-18 17:41:27,193 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@540] - Wait for pending requests: 9
2020-03-18 17:41:28,194 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@555] - Wait for server to sync
2020-03-18 17:41:28,194 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@594] - Verifying state
2020-03-18 17:41:28,194 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@615] - Validating ephemeral for session id 0x300015ea5cc0000
2020-03-18 17:41:28,217 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@615] - Validating ephemeral for session id 0x100015ea6320001
2020-03-18 17:41:28,218 [myid:] - INFO  [RequestThrottler:QuorumZooKeeperServer@158] - Submitting global closeSession request for session 0x100015ea6320000
2020-03-18 17:41:28,321 [myid:] - INFO  [main-EventThread:ClientCnxn$EventThread@566] - EventThread shut down for session: 0x100015ea6320000
2020-03-18 17:41:28,321 [myid:] - INFO  [main:ZooKeeper@1618] - Session: 0x100015ea6320000 closed
2020-03-18 17:41:28,322 [myid:] - INFO  [RequestThrottler:QuorumZooKeeperServer@158] - Submitting global closeSession request for session 0x100015ea6320001
2020-03-18 17:41:28,325 [myid:127.0.0.1:13951] - WARN  [main-SendThread(127.0.0.1:13951):ClientCnxn$SendThread@1266] - An exception was thrown while closing send thread for session 0x100015ea6320001.
EndOfStreamException: Unable to read additional data from server sessionid 0x100015ea6320001, likely server has closed socket
	at org.apache.zookeeper.ClientCnxnSocketNIO.doIO(ClientCnxnSocketNIO.java:75)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:348)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1262)
2020-03-18 17:41:28,430 [myid:] - INFO  [main-EventThread:ClientCnxn$EventThread@566] - EventThread shut down for session: 0x100015ea6320001
2020-03-18 17:41:28,430 [myid:] - INFO  [main:ZooKeeper@1618] - Session: 0x100015ea6320001 closed
2020-03-18 17:41:28,431 [myid:] - INFO  [RequestThrottler:QuorumZooKeeperServer@158] - Submitting global closeSession request for session 0x300015ea5cc0000
2020-03-18 17:41:28,551 [myid:] - WARN  [NIOWorkerThread-3:NIOServerCnxn@364] - Unexpected exception
EndOfStreamException: Unable to read additional data from client, it probably closed the socket: address = /127.0.0.1:54548, session = 0x300015ea5cc0000
	at org.apache.zookeeper.server.NIOServerCnxn.handleFailedRead(NIOServerCnxn.java:163)
	at org.apache.zookeeper.server.NIOServerCnxn.doIO(NIOServerCnxn.java:326)
	at org.apache.zookeeper.server.NIOServerCnxnFactory$IOWorkRequest.doWork(NIOServerCnxnFactory.java:522)
	at org.apache.zookeeper.server.WorkerService$ScheduledWorkRequest.run(WorkerService.java:154)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2020-03-18 17:41:28,652 [myid:] - INFO  [main:ZooKeeper@1618] - Session: 0x300015ea5cc0000 closed
2020-03-18 17:41:28,652 [myid:] - INFO  [main-EventThread:ClientCnxn$EventThread@566] - EventThread shut down for session: 0x300015ea5cc0000
2020-03-18 17:41:28,653 [myid:] - INFO  [main:QuorumUtil@250] - Shutting down quorum peer QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled)
2020-03-18 17:41:28,654 [myid:] - INFO  [main:Follower@292] - shutdown Follower
2020-03-18 17:41:28,654 [myid:] - INFO  [main:LearnerZooKeeperServer@160] - Shutting down
2020-03-18 17:41:28,654 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):Follower@129] - Exception when following the leader
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:96)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:134)
	at org.apache.zookeeper.server.quorum.Learner.readPacket(Learner.java:182)
	at org.apache.zookeeper.server.quorum.Follower.followLeader(Follower.java:125)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:1455)
2020-03-18 17:41:28,654 [myid:] - ERROR [LearnerHandler-/127.0.0.1:54823:LearnerHandler@707] - Unexpected exception causing shutdown while sock still open
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:96)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:134)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:643)
2020-03-18 17:41:28,655 [myid:] - WARN  [LearnerHandler-/127.0.0.1:54823:LearnerHandler@730] - ******* GOODBYE /127.0.0.1:54823 ********
2020-03-18 17:41:28,655 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):Follower@143] - Disconnected from leader (with address: /127.0.0.1:13958). Was connected for 30935ms. Sync state: true
2020-03-18 17:41:28,655 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):Follower@292] - shutdown Follower
2020-03-18 17:41:28,654 [myid:] - INFO  [main:ZooKeeperServer@784] - shutting down
2020-03-18 17:41:28,655 [myid:] - INFO  [main:RequestThrottler@244] - Shutting down
2020-03-18 17:41:28,655 [myid:] - INFO  [RequestThrottler:RequestThrottler@205] - Draining request throttler queue
2020-03-18 17:41:28,655 [myid:] - INFO  [RequestThrottler:RequestThrottler@181] - RequestThrottler shutdown. Dropped 0 requests
2020-03-18 17:41:28,655 [myid:] - INFO  [main:FollowerRequestProcessor@148] - Shutting down
2020-03-18 17:41:28,656 [myid:] - INFO  [main:CommitProcessor@617] - Shutting down
2020-03-18 17:41:28,656 [myid:] - INFO  [FollowerRequestProcessor:1:FollowerRequestProcessor@112] - FollowerRequestProcessor exited loop!
2020-03-18 17:41:28,656 [myid:] - INFO  [CommitProcessor:1:CommitProcessor@406] - CommitProcessor exited loop!
2020-03-18 17:41:28,656 [myid:] - INFO  [main:FinalRequestProcessor@662] - shutdown of request processor complete
2020-03-18 17:41:28,671 [myid:] - INFO  [main:SyncRequestProcessor@256] - Shutting down
2020-03-18 17:41:28,673 [myid:] - INFO  [SyncThread:1:SyncRequestProcessor@225] - SyncRequestProcessor exited!
2020-03-18 17:41:28,673 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):QuorumPeer@863] - Peer state changed: looking
2020-03-18 17:41:28,673 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):QuorumPeer@1501] - PeerState set to LOOKING
2020-03-18 17:41:28,673 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled):QuorumPeer@1483] - QuorumPeer main thread exited
2020-03-18 17:41:28,674 [myid:] - INFO  [ConnnectionExpirer:NIOServerCnxnFactory$ConnectionExpirerThread@578] - ConnnectionExpirerThread interrupted
2020-03-18 17:41:28,675 [myid:] - INFO  [NIOServerCxnFactory.AcceptThread:/127.0.0.1:13951:NIOServerCnxnFactory$AcceptThread@209] - accept thread exitted run method
2020-03-18 17:41:28,676 [myid:] - INFO  [NIOServerCxnFactory.SelectorThread-0:NIOServerCnxnFactory$SelectorThread@411] - selector thread exitted run method
2020-03-18 17:41:28,678 [myid:] - INFO  [QuorumPeerListener:QuorumCnxManager$Listener@961] - Leaving listener
2020-03-18 17:41:28,679 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 1, my id = 2
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:41:28,680 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:41:28,680 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:41:28,680 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 1 my id = 2
2020-03-18 17:41:28,681 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 2, my id = 1
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:41:28,681 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:41:28,682 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:41:28,682 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 2 my id = 1
2020-03-18 17:41:28,682 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 1, my id = 3
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:41:28,682 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:41:28,682 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 3, my id = 1
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:41:28,682 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:41:28,684 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:41:28,684 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 3 my id = 1
2020-03-18 17:41:28,684 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:41:28,684 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 1 my id = 3
2020-03-18 17:41:28,684 [myid:] - INFO  [main:QuorumUtil@254] - Shutting down leader election QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled)
2020-03-18 17:41:28,685 [myid:] - INFO  [main:QuorumUtil@259] - Waiting for QuorumPeer[myid=1](plain=127.0.0.1:13951)(secure=disabled) to exit thread
2020-03-18 17:41:28,685 [myid:] - INFO  [main:QuorumUtil@250] - Shutting down quorum peer QuorumPeer[myid=2](plain=127.0.0.1:13954)(secure=disabled)
2020-03-18 17:41:28,685 [myid:] - INFO  [main:Follower@292] - shutdown Follower
2020-03-18 17:41:28,686 [myid:] - ERROR [LearnerHandler-/127.0.0.1:54542:LearnerHandler@707] - Unexpected exception causing shutdown while sock still open
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:96)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:134)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:643)
2020-03-18 17:41:28,686 [myid:] - WARN  [LearnerHandler-/127.0.0.1:54542:LearnerHandler@730] - ******* GOODBYE /127.0.0.1:54542 ********
2020-03-18 17:41:28,686 [myid:] - WARN  [QuorumPeer[myid=2](plain=127.0.0.1:13954)(secure=disabled):Follower@129] - Exception when following the leader
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:96)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:134)
	at org.apache.zookeeper.server.quorum.Learner.readPacket(Learner.java:182)
	at org.apache.zookeeper.server.quorum.Follower.followLeader(Follower.java:125)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:1455)
2020-03-18 17:41:28,686 [myid:] - INFO  [main:LearnerZooKeeperServer@160] - Shutting down
2020-03-18 17:41:28,687 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13954)(secure=disabled):Follower@143] - Disconnected from leader (with address: /127.0.0.1:13958). Was connected for 44406ms. Sync state: true
2020-03-18 17:41:28,688 [myid:] - INFO  [main:ZooKeeperServer@784] - shutting down
2020-03-18 17:41:28,688 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13954)(secure=disabled):Follower@292] - shutdown Follower
2020-03-18 17:41:28,688 [myid:] - INFO  [main:RequestThrottler@244] - Shutting down
2020-03-18 17:41:28,688 [myid:] - INFO  [RequestThrottler:RequestThrottler@205] - Draining request throttler queue
2020-03-18 17:41:28,688 [myid:] - INFO  [RequestThrottler:RequestThrottler@181] - RequestThrottler shutdown. Dropped 0 requests
2020-03-18 17:41:28,688 [myid:] - INFO  [main:FollowerRequestProcessor@148] - Shutting down
2020-03-18 17:41:28,689 [myid:] - INFO  [main:CommitProcessor@617] - Shutting down
2020-03-18 17:41:28,689 [myid:] - INFO  [FollowerRequestProcessor:2:FollowerRequestProcessor@112] - FollowerRequestProcessor exited loop!
2020-03-18 17:41:28,689 [myid:] - INFO  [CommitProcessor:2:CommitProcessor@406] - CommitProcessor exited loop!
2020-03-18 17:41:28,689 [myid:] - INFO  [main:FinalRequestProcessor@662] - shutdown of request processor complete
2020-03-18 17:41:28,732 [myid:] - INFO  [main:SyncRequestProcessor@256] - Shutting down
2020-03-18 17:41:28,733 [myid:] - INFO  [SyncThread:2:SyncRequestProcessor@225] - SyncRequestProcessor exited!
2020-03-18 17:41:28,733 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13954)(secure=disabled):QuorumPeer@863] - Peer state changed: looking
2020-03-18 17:41:28,733 [myid:] - WARN  [QuorumPeer[myid=2](plain=127.0.0.1:13954)(secure=disabled):QuorumPeer@1501] - PeerState set to LOOKING
2020-03-18 17:41:28,733 [myid:] - WARN  [QuorumPeer[myid=2](plain=127.0.0.1:13954)(secure=disabled):QuorumPeer@1483] - QuorumPeer main thread exited
2020-03-18 17:41:28,733 [myid:] - INFO  [ConnnectionExpirer:NIOServerCnxnFactory$ConnectionExpirerThread@578] - ConnnectionExpirerThread interrupted
2020-03-18 17:41:28,737 [myid:] - INFO  [NIOServerCxnFactory.AcceptThread:/127.0.0.1:13954:NIOServerCnxnFactory$AcceptThread@209] - accept thread exitted run method
2020-03-18 17:41:28,737 [myid:] - INFO  [NIOServerCxnFactory.SelectorThread-0:NIOServerCnxnFactory$SelectorThread@411] - selector thread exitted run method
2020-03-18 17:41:28,744 [myid:] - INFO  [QuorumPeerListener:QuorumCnxManager$Listener@961] - Leaving listener
2020-03-18 17:41:28,750 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 3, my id = 2
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:41:28,750 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 2, my id = 3
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:41:28,750 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:41:28,750 [myid:] - INFO  [main:QuorumUtil@254] - Shutting down leader election QuorumPeer[myid=2](plain=127.0.0.1:13954)(secure=disabled)
2020-03-18 17:41:28,750 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:41:28,750 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:41:28,751 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 3 my id = 2
2020-03-18 17:41:28,751 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:41:28,751 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 2 my id = 3
2020-03-18 17:41:28,751 [myid:] - INFO  [main:QuorumUtil@259] - Waiting for QuorumPeer[myid=2](plain=127.0.0.1:13954)(secure=disabled) to exit thread
2020-03-18 17:41:28,751 [myid:] - INFO  [main:QuorumUtil@250] - Shutting down quorum peer QuorumPeer[myid=3](plain=127.0.0.1:13957)(secure=disabled)
2020-03-18 17:41:28,752 [myid:] - INFO  [main:Leader@792] - Shutting down
2020-03-18 17:41:28,753 [myid:] - INFO  [main:Leader@798] - Shutdown called. For the reason quorum Peer shutdown
2020-03-18 17:41:28,753 [myid:] - WARN  [LearnerCnxAcceptorHandler-/127.0.0.1:13958:Leader$LearnerCnxAcceptor$LearnerCnxAcceptorHandler@523] - Exception while shutting down acceptor.
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.Leader$LearnerCnxAcceptor$LearnerCnxAcceptorHandler.acceptConnections(Leader.java:510)
	at org.apache.zookeeper.server.quorum.Leader$LearnerCnxAcceptor$LearnerCnxAcceptorHandler.run(Leader.java:493)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2020-03-18 17:41:28,754 [myid:] - INFO  [main:ZooKeeperServer@784] - shutting down
2020-03-18 17:41:28,754 [myid:] - INFO  [main:RequestThrottler@244] - Shutting down
2020-03-18 17:41:28,755 [myid:] - INFO  [RequestThrottler:RequestThrottler@205] - Draining request throttler queue
2020-03-18 17:41:28,755 [myid:] - INFO  [RequestThrottler:RequestThrottler@181] - RequestThrottler shutdown. Dropped 0 requests
2020-03-18 17:41:28,755 [myid:] - INFO  [main:SessionTrackerImpl@247] - Shutting down
2020-03-18 17:41:28,755 [myid:] - INFO  [main:LeaderRequestProcessor@79] - Shutting down
2020-03-18 17:41:28,755 [myid:] - INFO  [main:PrepRequestProcessor@1047] - Shutting down
2020-03-18 17:41:28,755 [myid:] - INFO  [main:ProposalRequestProcessor@87] - Shutting down
2020-03-18 17:41:28,756 [myid:] - INFO  [main:CommitProcessor@617] - Shutting down
2020-03-18 17:41:28,755 [myid:] - INFO  [ProcessThread(sid:3 cport:-1)::PrepRequestProcessor@159] - PrepRequestProcessor exited loop!
2020-03-18 17:41:28,756 [myid:] - INFO  [main:Leader$ToBeAppliedRequestProcessor@1106] - Shutting down
2020-03-18 17:41:28,756 [myid:] - INFO  [main:FinalRequestProcessor@662] - shutdown of request processor complete
2020-03-18 17:41:28,756 [myid:] - INFO  [main:SyncRequestProcessor@256] - Shutting down
2020-03-18 17:41:28,756 [myid:] - INFO  [CommitProcessor:3:CommitProcessor@406] - CommitProcessor exited loop!
2020-03-18 17:41:28,757 [myid:] - INFO  [SyncThread:3:SyncRequestProcessor@225] - SyncRequestProcessor exited!
2020-03-18 17:41:28,846 [myid:] - INFO  [ConnnectionExpirer:NIOServerCnxnFactory$ConnectionExpirerThread@578] - ConnnectionExpirerThread interrupted
2020-03-18 17:41:28,847 [myid:] - INFO  [NIOServerCxnFactory.AcceptThread:/127.0.0.1:13957:NIOServerCnxnFactory$AcceptThread@209] - accept thread exitted run method
2020-03-18 17:41:28,848 [myid:] - INFO  [NIOServerCxnFactory.SelectorThread-0:NIOServerCnxnFactory$SelectorThread@411] - selector thread exitted run method
2020-03-18 17:41:28,848 [myid:] - WARN  [QuorumPeer[myid=3](plain=127.0.0.1:13957)(secure=disabled):QuorumPeer@1471] - Unexpected exception
java.lang.InterruptedException
	at java.lang.Object.wait(Native Method)
	at org.apache.zookeeper.server.quorum.Leader.lead(Leader.java:730)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:1468)
2020-03-18 17:41:28,848 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13957)(secure=disabled):Leader@792] - Shutting down
2020-03-18 17:41:28,848 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13957)(secure=disabled):QuorumPeer@863] - Peer state changed: looking
2020-03-18 17:41:28,848 [myid:] - WARN  [QuorumPeer[myid=3](plain=127.0.0.1:13957)(secure=disabled):QuorumPeer@1501] - PeerState set to LOOKING
2020-03-18 17:41:28,848 [myid:] - WARN  [QuorumPeer[myid=3](plain=127.0.0.1:13957)(secure=disabled):QuorumPeer@1483] - QuorumPeer main thread exited
2020-03-18 17:41:28,853 [myid:] - INFO  [QuorumPeerListener:QuorumCnxManager$Listener@961] - Leaving listener
2020-03-18 17:41:28,855 [myid:] - INFO  [main:QuorumUtil@254] - Shutting down leader election QuorumPeer[myid=3](plain=127.0.0.1:13957)(secure=disabled)
2020-03-18 17:41:28,858 [myid:] - INFO  [main:QuorumUtil@259] - Waiting for QuorumPeer[myid=3](plain=127.0.0.1:13957)(secure=disabled) to exit thread
2020-03-18 17:41:28,860 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13951
2020-03-18 17:41:28,860 [myid:] - INFO  [main:QuorumUtil@243] - 127.0.0.1:13951 is no longer accepting client connections
2020-03-18 17:41:28,861 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13954
2020-03-18 17:41:28,864 [myid:] - INFO  [main:QuorumUtil@243] - 127.0.0.1:13954 is no longer accepting client connections
2020-03-18 17:41:28,870 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13957
2020-03-18 17:41:28,879 [myid:] - INFO  [main:QuorumUtil@243] - 127.0.0.1:13957 is no longer accepting client connections
2020-03-18 17:41:28,879 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@89] - Memory used 87781
2020-03-18 17:41:28,880 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@94] - Number of threads 55
2020-03-18 17:41:28,880 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@109] - FINISHED TEST METHOD testResyncBySnapThenDiffAfterFollowerCrashes
2020-03-18 17:41:28,880 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@76] - Error count 160
2020-03-18 17:41:28,880 [myid:] - INFO  [main:ZKTestCase$1@96] - SUCCEEDED testResyncBySnapThenDiffAfterFollowerCrashes
2020-03-18 17:41:28,880 [myid:] - INFO  [main:ZKTestCase$1@91] - FINISHED testResyncBySnapThenDiffAfterFollowerCrashes
2020-03-18 17:41:28,880 [myid:] - INFO  [main:ZKTestCase$1@86] - STARTING testFollowerWatcherResync
2020-03-18 17:41:28,881 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@84] - RUNNING TEST METHOD testFollowerWatcherResync
2020-03-18 17:41:28,883 [myid:] - INFO  [main:JMXEnv@58] - connecting to addr service:jmx:rmi://127.0.0.1/stub/rO0ABXNyAC5qYXZheC5tYW5hZ2VtZW50LnJlbW90ZS5ybWkuUk1JU2VydmVySW1wbF9TdHViAAAAAAAAAAICAAB4cgAaamF2YS5ybWkuc2VydmVyLlJlbW90ZVN0dWLp/tzJi+FlGgIAAHhyABxqYXZhLnJtaS5zZXJ2ZXIuUmVtb3RlT2JqZWN002G0kQxhMx4DAAB4cHc3AAtVbmljYXN0UmVmMgAADDE3Mi4xOC4xNC4zNAAAypt+GTCdyOTgI+f4H6IAAAFw7QNGc4AuAHg=
2020-03-18 17:41:28,896 [myid:] - INFO  [main:PortAssignment@87] - Assigned port 13960 from range 13914 - 16606.
2020-03-18 17:41:28,897 [myid:] - INFO  [main:PortAssignment@87] - Assigned port 13961 from range 13914 - 16606.
2020-03-18 17:41:28,897 [myid:] - INFO  [main:PortAssignment@87] - Assigned port 13962 from range 13914 - 16606.
2020-03-18 17:41:28,899 [myid:] - INFO  [main:PortAssignment@87] - Assigned port 13963 from range 13914 - 16606.
2020-03-18 17:41:28,900 [myid:] - INFO  [main:PortAssignment@87] - Assigned port 13964 from range 13914 - 16606.
2020-03-18 17:41:28,900 [myid:] - INFO  [main:PortAssignment@87] - Assigned port 13965 from range 13914 - 16606.
2020-03-18 17:41:28,901 [myid:] - INFO  [main:PortAssignment@87] - Assigned port 13966 from range 13914 - 16606.
2020-03-18 17:41:28,902 [myid:] - INFO  [main:PortAssignment@87] - Assigned port 13967 from range 13914 - 16606.
2020-03-18 17:41:28,902 [myid:] - INFO  [main:PortAssignment@87] - Assigned port 13968 from range 13914 - 16606.
2020-03-18 17:41:28,902 [myid:] - INFO  [main:QuorumUtil@118] - Creating QuorumPeer 1; public port 13960
2020-03-18 17:41:28,902 [myid:] - INFO  [main:ServerCnxnFactory@169] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2020-03-18 17:41:28,902 [myid:] - WARN  [main:ServerCnxnFactory@309] - maxCnxns is not configured, using default value 0.
2020-03-18 17:41:28,902 [myid:] - INFO  [main:NIOServerCnxnFactory@666] - Configuring NIO connection handler with 10s sessionless connection timeout, 1 selector thread(s), 8 worker threads, and 64 kB direct buffers.
2020-03-18 17:41:28,903 [myid:] - INFO  [main:NIOServerCnxnFactory@674] - binding to port /127.0.0.1:13960
2020-03-18 17:41:28,903 [myid:] - INFO  [main:FileTxnSnapLog@124] - zookeeper.snapshot.trust.empty : false
2020-03-18 17:41:28,904 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:41:28,904 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:41:28,904 [myid:] - INFO  [main:ZKDatabase@132] - zookeeper.snapshotSizeFactor = 0.33
2020-03-18 17:41:28,904 [myid:] - INFO  [main:ZKDatabase@152] - zookeeper.commitLogCount=500
2020-03-18 17:41:28,904 [myid:] - WARN  [main:QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:41:28,905 [myid:] - INFO  [main:QuorumUtil@118] - Creating QuorumPeer 2; public port 13963
2020-03-18 17:41:28,905 [myid:] - INFO  [main:ServerCnxnFactory@169] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2020-03-18 17:41:28,905 [myid:] - WARN  [main:ServerCnxnFactory@309] - maxCnxns is not configured, using default value 0.
2020-03-18 17:41:28,905 [myid:] - INFO  [main:NIOServerCnxnFactory@666] - Configuring NIO connection handler with 10s sessionless connection timeout, 1 selector thread(s), 8 worker threads, and 64 kB direct buffers.
2020-03-18 17:41:28,905 [myid:] - INFO  [main:NIOServerCnxnFactory@674] - binding to port /127.0.0.1:13963
2020-03-18 17:41:28,906 [myid:] - INFO  [main:FileTxnSnapLog@124] - zookeeper.snapshot.trust.empty : false
2020-03-18 17:41:28,907 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:41:28,907 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:41:28,908 [myid:] - INFO  [main:ZKDatabase@132] - zookeeper.snapshotSizeFactor = 0.33
2020-03-18 17:41:28,908 [myid:] - INFO  [main:ZKDatabase@152] - zookeeper.commitLogCount=500
2020-03-18 17:41:28,908 [myid:] - WARN  [main:QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:41:28,908 [myid:] - INFO  [main:QuorumUtil@118] - Creating QuorumPeer 3; public port 13966
2020-03-18 17:41:28,908 [myid:] - INFO  [main:ServerCnxnFactory@169] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2020-03-18 17:41:28,908 [myid:] - WARN  [main:ServerCnxnFactory@309] - maxCnxns is not configured, using default value 0.
2020-03-18 17:41:28,909 [myid:] - INFO  [main:NIOServerCnxnFactory@666] - Configuring NIO connection handler with 10s sessionless connection timeout, 1 selector thread(s), 8 worker threads, and 64 kB direct buffers.
2020-03-18 17:41:28,909 [myid:] - INFO  [main:NIOServerCnxnFactory@674] - binding to port /127.0.0.1:13966
2020-03-18 17:41:28,909 [myid:] - INFO  [main:FileTxnSnapLog@124] - zookeeper.snapshot.trust.empty : false
2020-03-18 17:41:28,910 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:41:28,910 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:41:28,910 [myid:] - INFO  [main:ZKDatabase@132] - zookeeper.snapshotSizeFactor = 0.33
2020-03-18 17:41:28,910 [myid:] - INFO  [main:ZKDatabase@152] - zookeeper.commitLogCount=500
2020-03-18 17:41:28,910 [myid:] - WARN  [main:QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:41:28,910 [myid:] - INFO  [main:QuorumUtil@250] - Shutting down quorum peer QuorumPeer
2020-03-18 17:41:28,911 [myid:] - INFO  [main:QuorumUtil@257] - No election available to shutdown QuorumPeer
2020-03-18 17:41:28,911 [myid:] - INFO  [main:QuorumUtil@259] - Waiting for QuorumPeer to exit thread
2020-03-18 17:41:28,911 [myid:] - INFO  [main:QuorumUtil@250] - Shutting down quorum peer QuorumPeer
2020-03-18 17:41:28,915 [myid:] - INFO  [main:QuorumUtil@257] - No election available to shutdown QuorumPeer
2020-03-18 17:41:28,916 [myid:] - INFO  [main:QuorumUtil@259] - Waiting for QuorumPeer to exit thread
2020-03-18 17:41:28,916 [myid:] - INFO  [main:QuorumUtil@250] - Shutting down quorum peer QuorumPeer
2020-03-18 17:41:28,917 [myid:] - INFO  [main:QuorumUtil@257] - No election available to shutdown QuorumPeer
2020-03-18 17:41:28,917 [myid:] - INFO  [main:QuorumUtil@259] - Waiting for QuorumPeer to exit thread
2020-03-18 17:41:28,918 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13960
2020-03-18 17:41:28,923 [myid:] - INFO  [main:QuorumUtil@243] - 127.0.0.1:13960 is no longer accepting client connections
2020-03-18 17:41:28,930 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13963
2020-03-18 17:41:28,933 [myid:] - INFO  [main:QuorumUtil@243] - 127.0.0.1:13963 is no longer accepting client connections
2020-03-18 17:41:28,934 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13966
2020-03-18 17:41:28,935 [myid:] - INFO  [main:QuorumUtil@243] - 127.0.0.1:13966 is no longer accepting client connections
2020-03-18 17:41:28,936 [myid:] - INFO  [main:QuorumUtil@204] - Creating QuorumPeer 1; public port 13960
2020-03-18 17:41:28,937 [myid:] - INFO  [main:ServerCnxnFactory@169] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2020-03-18 17:41:28,937 [myid:] - WARN  [main:ServerCnxnFactory@309] - maxCnxns is not configured, using default value 0.
2020-03-18 17:41:28,938 [myid:] - INFO  [main:NIOServerCnxnFactory@666] - Configuring NIO connection handler with 10s sessionless connection timeout, 1 selector thread(s), 8 worker threads, and 64 kB direct buffers.
2020-03-18 17:41:28,939 [myid:] - INFO  [main:NIOServerCnxnFactory@674] - binding to port /127.0.0.1:13960
2020-03-18 17:41:28,940 [myid:] - INFO  [main:FileTxnSnapLog@124] - zookeeper.snapshot.trust.empty : false
2020-03-18 17:41:28,940 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:41:28,940 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:41:28,941 [myid:] - INFO  [main:ZKDatabase@132] - zookeeper.snapshotSizeFactor = 0.33
2020-03-18 17:41:28,941 [myid:] - INFO  [main:ZKDatabase@152] - zookeeper.commitLogCount=500
2020-03-18 17:41:28,941 [myid:] - WARN  [main:QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:41:28,941 [myid:] - INFO  [main:FileTxnSnapLog@251] - Initialize file found, an empty database will not block voting participation
2020-03-18 17:41:28,942 [myid:] - INFO  [main:FileTxnSnapLog@470] - Snapshotting: 0x0 to /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test5953421762852633256.junit.dir/version-2/snapshot.0
2020-03-18 17:41:28,946 [myid:] - INFO  [main:ZKDatabase@289] - Snapshot loaded in 5 ms, highest zxid is 0x0, digest is 1371985504
2020-03-18 17:41:28,946 [myid:] - INFO  [main:QuorumPeer@1102] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2020-03-18 17:41:28,948 [myid:] - INFO  [main:QuorumPeer@1122] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2020-03-18 17:41:28,950 [myid:] - INFO  [main:QuorumPeer@2503] - Using 6000ms as the quorum cnxn socket timeout
2020-03-18 17:41:28,951 [myid:] - INFO  [main:QuorumCnxManager$Listener@906] - Election port bind maximum retries is 3
2020-03-18 17:41:28,952 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13962:QuorumCnxManager$Listener$ListenerHandler@1047] - My election bind port: /127.0.0.1:13962
2020-03-18 17:41:28,952 [myid:] - INFO  [main:QuorumUtil@146] - Started QuorumPeer 1
2020-03-18 17:41:28,953 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13960)(secure=disabled):QuorumPeer@1371] - LOOKING
2020-03-18 17:41:28,954 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13960)(secure=disabled):FastLeaderElection@931] - New election. My id = 1, proposed zxid=0x0
2020-03-18 17:41:28,955 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@716] - Cannot open channel to 2 at election address /127.0.0.1:13965
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:677)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:748)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:644)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:503)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:487)
	at java.lang.Thread.run(Thread.java:748)
2020-03-18 17:41:28,956 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@716] - Cannot open channel to 3 at election address /127.0.0.1:13968
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:677)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:748)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:644)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:503)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:487)
	at java.lang.Thread.run(Thread.java:748)
2020-03-18 17:41:28,956 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:1, n.state:LOOKING, n.leader:1, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:41:28,953 [myid:] - INFO  [main:QuorumUtil@204] - Creating QuorumPeer 2; public port 13963
2020-03-18 17:41:28,962 [myid:] - INFO  [main:ServerCnxnFactory@169] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2020-03-18 17:41:28,962 [myid:] - WARN  [main:ServerCnxnFactory@309] - maxCnxns is not configured, using default value 0.
2020-03-18 17:41:28,966 [myid:] - INFO  [main:NIOServerCnxnFactory@666] - Configuring NIO connection handler with 10s sessionless connection timeout, 1 selector thread(s), 8 worker threads, and 64 kB direct buffers.
2020-03-18 17:41:28,966 [myid:] - INFO  [main:NIOServerCnxnFactory@674] - binding to port /127.0.0.1:13963
2020-03-18 17:41:28,966 [myid:] - INFO  [main:FileTxnSnapLog@124] - zookeeper.snapshot.trust.empty : false
2020-03-18 17:41:28,967 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:41:28,967 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:41:28,967 [myid:] - INFO  [main:ZKDatabase@132] - zookeeper.snapshotSizeFactor = 0.33
2020-03-18 17:41:28,967 [myid:] - INFO  [main:ZKDatabase@152] - zookeeper.commitLogCount=500
2020-03-18 17:41:28,968 [myid:] - WARN  [main:QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:41:28,968 [myid:] - INFO  [main:FileTxnSnapLog@251] - Initialize file found, an empty database will not block voting participation
2020-03-18 17:41:28,969 [myid:] - INFO  [main:FileTxnSnapLog@470] - Snapshotting: 0x0 to /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test2554392132204896718.junit.dir/version-2/snapshot.0
2020-03-18 17:41:28,971 [myid:] - INFO  [main:ZKDatabase@289] - Snapshot loaded in 3 ms, highest zxid is 0x0, digest is 1371985504
2020-03-18 17:41:28,971 [myid:] - INFO  [main:QuorumPeer@1102] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2020-03-18 17:41:28,972 [myid:] - INFO  [main:QuorumPeer@1122] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2020-03-18 17:41:28,974 [myid:] - INFO  [main:QuorumPeer@2503] - Using 6000ms as the quorum cnxn socket timeout
2020-03-18 17:41:28,974 [myid:] - INFO  [main:QuorumCnxManager$Listener@906] - Election port bind maximum retries is 3
2020-03-18 17:41:28,975 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13965:QuorumCnxManager$Listener$ListenerHandler@1047] - My election bind port: /127.0.0.1:13965
2020-03-18 17:41:28,975 [myid:] - INFO  [main:QuorumUtil@146] - Started QuorumPeer 2
2020-03-18 17:41:28,976 [myid:] - INFO  [main:QuorumUtil@204] - Creating QuorumPeer 3; public port 13966
2020-03-18 17:41:28,976 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13963)(secure=disabled):QuorumPeer@1371] - LOOKING
2020-03-18 17:41:28,976 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13963)(secure=disabled):FastLeaderElection@931] - New election. My id = 2, proposed zxid=0x0
2020-03-18 17:41:28,976 [myid:] - INFO  [main:ServerCnxnFactory@169] - Using org.apache.zookeeper.server.NIOServerCnxnFactory as server connection factory
2020-03-18 17:41:28,977 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13962:QuorumCnxManager$Listener$ListenerHandler@1052] - Received connection request /127.0.0.1:55214
2020-03-18 17:41:28,977 [myid:] - WARN  [main:ServerCnxnFactory@309] - maxCnxns is not configured, using default value 0.
2020-03-18 17:41:28,978 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:2, n.state:LOOKING, n.leader:2, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:41:28,978 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:1, n.state:LOOKING, n.leader:2, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:41:28,978 [myid:] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@716] - Cannot open channel to 3 at election address /127.0.0.1:13968
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:677)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:748)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:644)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:503)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:487)
	at java.lang.Thread.run(Thread.java:748)
2020-03-18 17:41:28,977 [myid:] - WARN  [WorkerSender[myid=2]:QuorumCnxManager@716] - Cannot open channel to 3 at election address /127.0.0.1:13968
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:677)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:748)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:644)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:503)
	at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:487)
	at java.lang.Thread.run(Thread.java:748)
2020-03-18 17:41:28,979 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:2, n.state:LOOKING, n.leader:2, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:41:28,979 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:1, n.state:LOOKING, n.leader:1, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:41:28,980 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:1, n.state:LOOKING, n.leader:2, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:41:28,978 [myid:] - INFO  [main:NIOServerCnxnFactory@666] - Configuring NIO connection handler with 10s sessionless connection timeout, 1 selector thread(s), 8 worker threads, and 64 kB direct buffers.
2020-03-18 17:41:28,980 [myid:] - INFO  [main:NIOServerCnxnFactory@674] - binding to port /127.0.0.1:13966
2020-03-18 17:41:28,981 [myid:] - INFO  [main:FileTxnSnapLog@124] - zookeeper.snapshot.trust.empty : false
2020-03-18 17:41:28,981 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:41:28,982 [myid:] - INFO  [main:WatchManagerFactory@42] - Using org.apache.zookeeper.server.watch.WatchManager as watch manager
2020-03-18 17:41:28,982 [myid:] - INFO  [main:ZKDatabase@132] - zookeeper.snapshotSizeFactor = 0.33
2020-03-18 17:41:28,982 [myid:] - INFO  [main:ZKDatabase@152] - zookeeper.commitLogCount=500
2020-03-18 17:41:28,982 [myid:] - WARN  [main:QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:41:28,982 [myid:] - INFO  [main:FileTxnSnapLog@251] - Initialize file found, an empty database will not block voting participation
2020-03-18 17:41:28,983 [myid:] - INFO  [main:FileTxnSnapLog@470] - Snapshotting: 0x0 to /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test6568446435575772745.junit.dir/version-2/snapshot.0
2020-03-18 17:41:28,984 [myid:] - INFO  [main:ZKDatabase@289] - Snapshot loaded in 2 ms, highest zxid is 0x0, digest is 1371985504
2020-03-18 17:41:28,985 [myid:] - INFO  [main:QuorumPeer@1102] - currentEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2020-03-18 17:41:28,988 [myid:] - INFO  [main:QuorumPeer@1122] - acceptedEpoch not found! Creating with a reasonable default of 0. This should only happen when you are upgrading your installation
2020-03-18 17:41:28,993 [myid:] - INFO  [main:QuorumPeer@2503] - Using 6000ms as the quorum cnxn socket timeout
2020-03-18 17:41:28,993 [myid:] - INFO  [main:QuorumCnxManager$Listener@906] - Election port bind maximum retries is 3
2020-03-18 17:41:28,994 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13968:QuorumCnxManager$Listener$ListenerHandler@1047] - My election bind port: /127.0.0.1:13968
2020-03-18 17:41:28,996 [myid:] - INFO  [main:QuorumUtil@146] - Started QuorumPeer 3
2020-03-18 17:41:28,996 [myid:] - INFO  [main:QuorumUtil@149] - Checking ports 127.0.0.1:13960,127.0.0.1:13963,127.0.0.1:13966
2020-03-18 17:41:28,997 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13966)(secure=disabled):QuorumPeer@1371] - LOOKING
2020-03-18 17:41:28,997 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13966)(secure=disabled):FastLeaderElection@931] - New election. My id = 3, proposed zxid=0x0
2020-03-18 17:41:28,997 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13960
2020-03-18 17:41:28,998 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13962:QuorumCnxManager$Listener$ListenerHandler@1052] - Received connection request /127.0.0.1:55218
2020-03-18 17:41:28,999 [myid:] - INFO  [ListenerHandler-/127.0.0.1:13965:QuorumCnxManager$Listener$ListenerHandler@1052] - Received connection request /127.0.0.1:55219
2020-03-18 17:41:29,000 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:1, n.state:LOOKING, n.leader:2, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:41:29,000 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:2, n.state:LOOKING, n.leader:2, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:41:29,000 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:3, n.state:LOOKING, n.leader:3, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:41:29,003 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:3, n.state:LOOKING, n.leader:3, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:41:29,005 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:1, n.state:LOOKING, n.leader:3, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:41:29,006 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:3, n.state:LOOKING, n.leader:3, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:41:29,006 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:1, n.state:LOOKING, n.leader:3, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:41:29,006 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:1, n.state:LOOKING, n.leader:3, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:41:29,007 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:2, n.state:LOOKING, n.leader:3, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:41:29,007 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:2, n.state:LOOKING, n.leader:3, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:41:29,007 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection$Messenger$WorkerReceiver@376] - Notification: my state:LOOKING; n.sid:2, n.state:LOOKING, n.leader:3, n.round:0x1, n.peerEpoch:0x0, n.zxid:0x0, message format version:0x2, n.config version:0x0
2020-03-18 17:41:29,008 [myid:] - INFO  [NIOWorkerThread-1:NIOServerCnxn@507] - Processing stat command from /127.0.0.1:55222
2020-03-18 17:41:29,208 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13963)(secure=disabled):QuorumPeer@857] - Peer state changed: following
2020-03-18 17:41:29,208 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13960)(secure=disabled):QuorumPeer@857] - Peer state changed: following
2020-03-18 17:41:29,208 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13963)(secure=disabled):QuorumPeer@1453] - FOLLOWING
2020-03-18 17:41:29,208 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13960)(secure=disabled):QuorumPeer@1453] - FOLLOWING
2020-03-18 17:41:29,208 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13963)(secure=disabled):ZooKeeperServer@1246] - minSessionTimeout set to 4000
2020-03-18 17:41:29,209 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13963)(secure=disabled):ZooKeeperServer@1255] - maxSessionTimeout set to 40000
2020-03-18 17:41:29,209 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13963)(secure=disabled):ResponseCache@45] - Response cache size is initialized with value 400.
2020-03-18 17:41:29,209 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13960)(secure=disabled):ZooKeeperServer@1246] - minSessionTimeout set to 4000
2020-03-18 17:41:29,209 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13960)(secure=disabled):ZooKeeperServer@1255] - maxSessionTimeout set to 40000
2020-03-18 17:41:29,209 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13960)(secure=disabled):ResponseCache@45] - Response cache size is initialized with value 400.
2020-03-18 17:41:29,209 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13960)(secure=disabled):ResponseCache@45] - Response cache size is initialized with value 400.
2020-03-18 17:41:29,209 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13960)(secure=disabled):RequestPathMetricsCollector@111] - zookeeper.pathStats.slotCapacity = 60
2020-03-18 17:41:29,209 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13960)(secure=disabled):RequestPathMetricsCollector@112] - zookeeper.pathStats.slotDuration = 15
2020-03-18 17:41:29,209 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13960)(secure=disabled):RequestPathMetricsCollector@113] - zookeeper.pathStats.maxDepth = 6
2020-03-18 17:41:29,209 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13963)(secure=disabled):ResponseCache@45] - Response cache size is initialized with value 400.
2020-03-18 17:41:29,209 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13960)(secure=disabled):RequestPathMetricsCollector@114] - zookeeper.pathStats.initialDelay = 5
2020-03-18 17:41:29,209 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13960)(secure=disabled):RequestPathMetricsCollector@115] - zookeeper.pathStats.delay = 5
2020-03-18 17:41:29,209 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13963)(secure=disabled):RequestPathMetricsCollector@111] - zookeeper.pathStats.slotCapacity = 60
2020-03-18 17:41:29,209 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13963)(secure=disabled):RequestPathMetricsCollector@112] - zookeeper.pathStats.slotDuration = 15
2020-03-18 17:41:29,209 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13963)(secure=disabled):RequestPathMetricsCollector@113] - zookeeper.pathStats.maxDepth = 6
2020-03-18 17:41:29,210 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13963)(secure=disabled):RequestPathMetricsCollector@114] - zookeeper.pathStats.initialDelay = 5
2020-03-18 17:41:29,210 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13963)(secure=disabled):RequestPathMetricsCollector@115] - zookeeper.pathStats.delay = 5
2020-03-18 17:41:29,210 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13963)(secure=disabled):RequestPathMetricsCollector@116] - zookeeper.pathStats.enabled = false
2020-03-18 17:41:29,209 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13960)(secure=disabled):RequestPathMetricsCollector@116] - zookeeper.pathStats.enabled = false
2020-03-18 17:41:29,210 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13963)(secure=disabled):ZooKeeperServer@1470] - The max bytes for all large requests are set to 104857600
2020-03-18 17:41:29,210 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13960)(secure=disabled):ZooKeeperServer@1470] - The max bytes for all large requests are set to 104857600
2020-03-18 17:41:29,210 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13963)(secure=disabled):ZooKeeperServer@1484] - The large request threshold is set to -1
2020-03-18 17:41:29,210 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13960)(secure=disabled):ZooKeeperServer@1484] - The large request threshold is set to -1
2020-03-18 17:41:29,210 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13963)(secure=disabled):ZooKeeperServer@329] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 clientPortListenBacklog -1 datadir /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test2554392132204896718.junit.dir/version-2 snapdir /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test2554392132204896718.junit.dir/version-2
2020-03-18 17:41:29,210 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13960)(secure=disabled):ZooKeeperServer@329] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 clientPortListenBacklog -1 datadir /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test5953421762852633256.junit.dir/version-2 snapdir /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test5953421762852633256.junit.dir/version-2
2020-03-18 17:41:29,210 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13963)(secure=disabled):Follower@75] - FOLLOWING - LEADER ELECTION TOOK - 234 MS
2020-03-18 17:41:29,210 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13960)(secure=disabled):Follower@75] - FOLLOWING - LEADER ELECTION TOOK - 256 MS
2020-03-18 17:41:29,210 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13960)(secure=disabled):QuorumPeer@863] - Peer state changed: following - discovery
2020-03-18 17:41:29,210 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13963)(secure=disabled):QuorumPeer@863] - Peer state changed: following - discovery
2020-03-18 17:41:29,211 [myid:] - WARN  [LeaderConnector-/127.0.0.1:13967:Learner$LeaderConnector@392] - Unexpected exception, tries=0, remaining init limit=6000, connecting to /127.0.0.1:13967
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.Learner.sockConnect(Learner.java:255)
	at org.apache.zookeeper.server.quorum.Learner$LeaderConnector.connectToLeader(Learner.java:366)
	at org.apache.zookeeper.server.quorum.Learner$LeaderConnector.run(Learner.java:324)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2020-03-18 17:41:29,211 [myid:] - WARN  [LeaderConnector-/127.0.0.1:13967:Learner$LeaderConnector@392] - Unexpected exception, tries=0, remaining init limit=6000, connecting to /127.0.0.1:13967
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.zookeeper.server.quorum.Learner.sockConnect(Learner.java:255)
	at org.apache.zookeeper.server.quorum.Learner$LeaderConnector.connectToLeader(Learner.java:366)
	at org.apache.zookeeper.server.quorum.Learner$LeaderConnector.run(Learner.java:324)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2020-03-18 17:41:29,212 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13966)(secure=disabled):QuorumPeer@857] - Peer state changed: leading
2020-03-18 17:41:29,212 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13966)(secure=disabled):QuorumPeer@1465] - LEADING
2020-03-18 17:41:29,213 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13966)(secure=disabled):ZooKeeperServer@1246] - minSessionTimeout set to 4000
2020-03-18 17:41:29,213 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13966)(secure=disabled):ZooKeeperServer@1255] - maxSessionTimeout set to 40000
2020-03-18 17:41:29,213 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13966)(secure=disabled):ResponseCache@45] - Response cache size is initialized with value 400.
2020-03-18 17:41:29,213 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13966)(secure=disabled):ResponseCache@45] - Response cache size is initialized with value 400.
2020-03-18 17:41:29,213 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13966)(secure=disabled):RequestPathMetricsCollector@111] - zookeeper.pathStats.slotCapacity = 60
2020-03-18 17:41:29,213 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13966)(secure=disabled):RequestPathMetricsCollector@112] - zookeeper.pathStats.slotDuration = 15
2020-03-18 17:41:29,213 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13966)(secure=disabled):RequestPathMetricsCollector@113] - zookeeper.pathStats.maxDepth = 6
2020-03-18 17:41:29,213 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13966)(secure=disabled):RequestPathMetricsCollector@114] - zookeeper.pathStats.initialDelay = 5
2020-03-18 17:41:29,213 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13966)(secure=disabled):RequestPathMetricsCollector@115] - zookeeper.pathStats.delay = 5
2020-03-18 17:41:29,213 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13966)(secure=disabled):RequestPathMetricsCollector@116] - zookeeper.pathStats.enabled = false
2020-03-18 17:41:29,213 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13966)(secure=disabled):ZooKeeperServer@1470] - The max bytes for all large requests are set to 104857600
2020-03-18 17:41:29,213 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13966)(secure=disabled):ZooKeeperServer@1484] - The large request threshold is set to -1
2020-03-18 17:41:29,214 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13966)(secure=disabled):ZooKeeperServer@329] - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 clientPortListenBacklog -1 datadir /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test6568446435575772745.junit.dir/version-2 snapdir /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test6568446435575772745.junit.dir/version-2
2020-03-18 17:41:29,214 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13966)(secure=disabled):Leader@581] - LEADING - LEADER ELECTION TOOK - 217 MS
2020-03-18 17:41:29,214 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13966)(secure=disabled):QuorumPeer@863] - Peer state changed: leading - discovery
2020-03-18 17:41:29,214 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13966)(secure=disabled):FileTxnSnapLog@470] - Snapshotting: 0x0 to /Users/liaosheng/project/apache-zookeeper-3.6.0/zookeeper-server/target/surefire/test6568446435575772745.junit.dir/version-2/snapshot.0
2020-03-18 17:41:29,216 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13966)(secure=disabled):ZooKeeperServer@519] - Snapshot taken in 1 ms
2020-03-18 17:41:29,270 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13960
2020-03-18 17:41:29,271 [myid:] - INFO  [NIOWorkerThread-2:NIOServerCnxn@507] - Processing stat command from /127.0.0.1:55233
2020-03-18 17:41:29,317 [myid:] - INFO  [LeaderConnector-/127.0.0.1:13967:Learner$LeaderConnector@328] - Successfully connected to leader, using address: /127.0.0.1:13967
2020-03-18 17:41:29,317 [myid:] - INFO  [LeaderConnector-/127.0.0.1:13967:Learner$LeaderConnector@328] - Successfully connected to leader, using address: /127.0.0.1:13967
2020-03-18 17:41:29,318 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55235:LearnerHandler@504] - Follower sid: 2 : info : 127.0.0.1:13964:13965:participant;127.0.0.1:13963
2020-03-18 17:41:29,318 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55236:LearnerHandler@504] - Follower sid: 1 : info : 127.0.0.1:13961:13962:participant;127.0.0.1:13960
2020-03-18 17:41:29,320 [myid:] - WARN  [QuorumPeer[myid=3](plain=127.0.0.1:13966)(secure=disabled):QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:41:29,322 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13963)(secure=disabled):QuorumPeer@863] - Peer state changed: following - synchronization
2020-03-18 17:41:29,322 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55235:ZKDatabase@345] - On disk txn sync enabled with snapshotSizeFactor 0.33
2020-03-18 17:41:29,322 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55236:ZKDatabase@345] - On disk txn sync enabled with snapshotSizeFactor 0.33
2020-03-18 17:41:29,322 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55236:LearnerHandler@800] - Synchronizing with Learner sid: 1 maxCommittedLog=0x0 minCommittedLog=0x0 lastProcessedZxid=0x0 peerLastZxid=0x0
2020-03-18 17:41:29,322 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13960)(secure=disabled):QuorumPeer@863] - Peer state changed: following - synchronization
2020-03-18 17:41:29,322 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55236:LearnerHandler@845] - Sending DIFF zxid=0x0 for peer sid: 1
2020-03-18 17:41:29,322 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55235:LearnerHandler@800] - Synchronizing with Learner sid: 2 maxCommittedLog=0x0 minCommittedLog=0x0 lastProcessedZxid=0x0 peerLastZxid=0x0
2020-03-18 17:41:29,323 [myid:] - INFO  [LearnerHandler-/127.0.0.1:55235:LearnerHandler@845] - Sending DIFF zxid=0x0 for peer sid: 2
2020-03-18 17:41:29,323 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13966)(secure=disabled):QuorumPeer@863] - Peer state changed: leading - synchronization
2020-03-18 17:41:29,324 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13963)(secure=disabled):Learner@509] - Getting a diff from the leader 0x0
2020-03-18 17:41:29,324 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13960)(secure=disabled):Learner@509] - Getting a diff from the leader 0x0
2020-03-18 17:41:29,324 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13963)(secure=disabled):QuorumPeer@868] - Peer state changed: following - synchronization - diff
2020-03-18 17:41:29,324 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13960)(secure=disabled):QuorumPeer@868] - Peer state changed: following - synchronization - diff
2020-03-18 17:41:29,325 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13963)(secure=disabled):Learner@675] - Learner received NEWLEADER message
2020-03-18 17:41:29,325 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13960)(secure=disabled):Learner@675] - Learner received NEWLEADER message
2020-03-18 17:41:29,325 [myid:] - WARN  [QuorumPeer[myid=2](plain=127.0.0.1:13963)(secure=disabled):QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:41:29,325 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13960)(secure=disabled):QuorumPeer@1784] - configFilename is null! This should only happen in tests.
2020-03-18 17:41:29,327 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13966)(secure=disabled):Leader@1501] - Have quorum of supporters, sids: [[1, 3],[1, 3]]; starting up and setting last processed zxid: 0x100000000
2020-03-18 17:41:29,327 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13966)(secure=disabled):CommitProcessor@476] - Configuring CommitProcessor with readBatchSize -1 commitBatchSize 1
2020-03-18 17:41:29,327 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13966)(secure=disabled):CommitProcessor@438] - Configuring CommitProcessor with 4 worker threads.
2020-03-18 17:41:29,328 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13966)(secure=disabled):ContainerManager@83] - Using checkIntervalMs=60000 maxPerMinute=10000 maxNeverUsedIntervalMs=0
2020-03-18 17:41:29,328 [myid:] - INFO  [QuorumPeer[myid=3](plain=127.0.0.1:13966)(secure=disabled):QuorumPeer@863] - Peer state changed: leading - broadcast
2020-03-18 17:41:29,328 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13963)(secure=disabled):Learner@659] - Learner received UPTODATE message
2020-03-18 17:41:29,328 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13960)(secure=disabled):Learner@659] - Learner received UPTODATE message
2020-03-18 17:41:29,328 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13963)(secure=disabled):QuorumPeer@868] - Peer state changed: following - synchronization
2020-03-18 17:41:29,328 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13960)(secure=disabled):QuorumPeer@868] - Peer state changed: following - synchronization
2020-03-18 17:41:29,328 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13963)(secure=disabled):CommitProcessor@476] - Configuring CommitProcessor with readBatchSize -1 commitBatchSize 1
2020-03-18 17:41:29,329 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13963)(secure=disabled):CommitProcessor@438] - Configuring CommitProcessor with 4 worker threads.
2020-03-18 17:41:29,329 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13960)(secure=disabled):CommitProcessor@476] - Configuring CommitProcessor with readBatchSize -1 commitBatchSize 1
2020-03-18 17:41:29,329 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13960)(secure=disabled):CommitProcessor@438] - Configuring CommitProcessor with 4 worker threads.
2020-03-18 17:41:29,330 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13963)(secure=disabled):QuorumPeer@863] - Peer state changed: following - broadcast
2020-03-18 17:41:29,330 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13960)(secure=disabled):QuorumPeer@863] - Peer state changed: following - broadcast
2020-03-18 17:41:29,522 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13960
2020-03-18 17:41:29,523 [myid:] - INFO  [NIOWorkerThread-3:NIOServerCnxn@507] - Processing stat command from /127.0.0.1:55238
2020-03-18 17:41:29,523 [myid:] - INFO  [NIOWorkerThread-3:StatCommand@52] - Stat command output
2020-03-18 17:41:29,524 [myid:] - INFO  [main:QuorumUtil@152] - 127.0.0.1:13960 is accepting client connections
2020-03-18 17:41:29,524 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13963
2020-03-18 17:41:29,525 [myid:] - INFO  [NIOWorkerThread-1:NIOServerCnxn@507] - Processing stat command from /127.0.0.1:55239
2020-03-18 17:41:29,525 [myid:] - INFO  [NIOWorkerThread-1:StatCommand@52] - Stat command output
2020-03-18 17:41:29,525 [myid:] - INFO  [main:QuorumUtil@152] - 127.0.0.1:13963 is accepting client connections
2020-03-18 17:41:29,526 [myid:] - INFO  [main:FourLetterWordMain@93] - connecting to 127.0.0.1 13966
2020-03-18 17:41:29,526 [myid:] - INFO  [NIOWorkerThread-1:NIOServerCnxn@507] - Processing stat command from /127.0.0.1:55240
2020-03-18 17:41:29,527 [myid:] - INFO  [NIOWorkerThread-1:StatCommand@52] - Stat command output
2020-03-18 17:41:29,527 [myid:] - INFO  [main:QuorumUtil@152] - 127.0.0.1:13966 is accepting client connections
2020-03-18 17:41:29,527 [myid:] - INFO  [main:JMXEnv@191] - JMXEnv.dump() follows
2020-03-18 17:41:29,529 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.2
2020-03-18 17:41:29,530 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1
2020-03-18 17:41:29,530 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1,name2=Follower,name3=InMemoryDataTree
2020-03-18 17:41:29,530 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.3
2020-03-18 17:41:29,530 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.3
2020-03-18 17:41:29,530 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id1
2020-03-18 17:41:29,530 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.2
2020-03-18 17:41:29,530 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id2
2020-03-18 17:41:29,531 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.1
2020-03-18 17:41:29,531 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3
2020-03-18 17:41:29,531 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.2,name2=Follower,name3=InMemoryDataTree
2020-03-18 17:41:29,531 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.3,name2=Leader,name3=Learner_Connections,name4="127.0.0.1:55236",name5="id:1"
2020-03-18 17:41:29,531 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.3,name2=Leader
2020-03-18 17:41:29,531 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.3,name2=Leader,name3=Learner_Connections,name4="127.0.0.1:55235",name5="id:2"
2020-03-18 17:41:29,531 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.2
2020-03-18 17:41:29,532 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.1
2020-03-18 17:41:29,532 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.3
2020-03-18 17:41:29,532 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.3,name2=Leader,name3=InMemoryDataTree
2020-03-18 17:41:29,532 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1,name2=Follower
2020-03-18 17:41:29,532 [myid:] - INFO  [main:JMXEnv@199] - bean:org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.2,name2=Follower
2020-03-18 17:41:29,533 [myid:] - INFO  [main:JMXEnv@116] - expect:InMemoryDataTree
2020-03-18 17:41:29,534 [myid:] - INFO  [main:JMXEnv@119] - found:InMemoryDataTree org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1,name2=Follower,name3=InMemoryDataTree
2020-03-18 17:41:29,534 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id1,name1=replica.1,name2=
2020-03-18 17:41:29,535 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id1,name1=replica.1,name2= org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1,name2=Follower
2020-03-18 17:41:29,535 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id2,name1=replica.2,name2=
2020-03-18 17:41:29,535 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id2,name1=replica.2,name2= org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.2,name2=Follower,name3=InMemoryDataTree
2020-03-18 17:41:29,536 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id3,name1=replica.3,name2=
2020-03-18 17:41:29,536 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id3,name1=replica.3,name2= org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.3,name2=Leader,name3=Learner_Connections,name4="127.0.0.1:55236",name5="id:1"
2020-03-18 17:41:29,536 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id1,name1=replica.1
2020-03-18 17:41:29,536 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id1,name1=replica.1 org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.1
2020-03-18 17:41:29,536 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id1,name1=replica.2
2020-03-18 17:41:29,536 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id1,name1=replica.2 org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.2
2020-03-18 17:41:29,536 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id1,name1=replica.3
2020-03-18 17:41:29,536 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id1,name1=replica.3 org.apache.ZooKeeperService:name0=ReplicatedServer_id1,name1=replica.3
2020-03-18 17:41:29,537 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id2,name1=replica.1
2020-03-18 17:41:29,537 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id2,name1=replica.1 org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.1
2020-03-18 17:41:29,537 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id2,name1=replica.2
2020-03-18 17:41:29,537 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id2,name1=replica.2 org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.2
2020-03-18 17:41:29,537 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id2,name1=replica.3
2020-03-18 17:41:29,538 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id2,name1=replica.3 org.apache.ZooKeeperService:name0=ReplicatedServer_id2,name1=replica.3
2020-03-18 17:41:29,538 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id3,name1=replica.1
2020-03-18 17:41:29,538 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id3,name1=replica.1 org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.1
2020-03-18 17:41:29,538 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id3,name1=replica.2
2020-03-18 17:41:29,538 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id3,name1=replica.2 org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.2
2020-03-18 17:41:29,538 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id3,name1=replica.3
2020-03-18 17:41:29,538 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id3,name1=replica.3 org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.3,name2=Leader
2020-03-18 17:41:29,538 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id1
2020-03-18 17:41:29,539 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id1 org.apache.ZooKeeperService:name0=ReplicatedServer_id1
2020-03-18 17:41:29,539 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id2
2020-03-18 17:41:29,539 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id2 org.apache.ZooKeeperService:name0=ReplicatedServer_id2
2020-03-18 17:41:29,539 [myid:] - INFO  [main:JMXEnv@116] - expect:name0=ReplicatedServer_id3
2020-03-18 17:41:29,539 [myid:] - INFO  [main:JMXEnv@119] - found:name0=ReplicatedServer_id3 org.apache.ZooKeeperService:name0=ReplicatedServer_id3
2020-03-18 17:41:29,539 [myid:] - INFO  [main:FollowerResyncConcurrencyTest@700] - Connecting to follower: 1
2020-03-18 17:41:29,540 [myid:] - INFO  [main:ZooKeeper@1005] - Initiating client connection, connectString=localhost:13960 sessionTimeout=30000 watcher=org.apache.zookeeper.test.ClientBase$CountdownWatcher@314c508a
2020-03-18 17:41:29,540 [myid:] - INFO  [main:ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes
2020-03-18 17:41:29,540 [myid:] - INFO  [main:ClientCnxn@1703] - zookeeper.request.timeout value is 0. feature enabled=false
2020-03-18 17:41:29,543 [myid:localhost:13960] - INFO  [main-SendThread(localhost:13960):ClientCnxn$SendThread@1154] - Opening socket connection to server localhost/0:0:0:0:0:0:0:1:13960.
2020-03-18 17:41:29,543 [myid:localhost:13960] - INFO  [main-SendThread(localhost:13960):ClientCnxn$SendThread@1156] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2020-03-18 17:41:29,543 [myid:localhost:13960] - WARN  [main-SendThread(localhost:13960):ClientCnxn$SendThread@1272] - Session 0x0 for sever localhost/0:0:0:0:0:0:0:1:13960, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:717)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:342)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1262)
2020-03-18 17:41:30,251 [myid:] - INFO  [SessionTracker:SessionTrackerImpl@170] - SessionTrackerImpl exited loop!
2020-03-18 17:41:30,656 [myid:localhost:13960] - INFO  [main-SendThread(localhost:13960):ClientCnxn$SendThread@1154] - Opening socket connection to server localhost/127.0.0.1:13960.
2020-03-18 17:41:30,657 [myid:localhost:13960] - INFO  [main-SendThread(localhost:13960):ClientCnxn$SendThread@1156] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2020-03-18 17:41:30,658 [myid:localhost:13960] - INFO  [main-SendThread(localhost:13960):ClientCnxn$SendThread@986] - Socket connection established, initiating session, client: /127.0.0.1:55515, server: localhost/127.0.0.1:13960
2020-03-18 17:41:30,660 [myid:] - WARN  [QuorumPeer[myid=2](plain=127.0.0.1:13963)(secure=disabled):Follower@170] - Got zxid 0x100000001 expected 0x1
2020-03-18 17:41:30,660 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13960)(secure=disabled):Follower@170] - Got zxid 0x100000001 expected 0x1
2020-03-18 17:41:30,660 [myid:] - INFO  [SyncThread:3:FileTxnLog@284] - Creating new log file: log.100000001
2020-03-18 17:41:30,661 [myid:] - INFO  [SyncThread:1:FileTxnLog@284] - Creating new log file: log.100000001
2020-03-18 17:41:30,661 [myid:] - INFO  [SyncThread:2:FileTxnLog@284] - Creating new log file: log.100000001
2020-03-18 17:41:30,662 [myid:] - INFO  [CommitProcessor:3:LeaderSessionTracker@104] - Committing global session 0x100015f55b50000
2020-03-18 17:41:30,662 [myid:] - INFO  [CommitProcessor:2:LearnerSessionTracker@116] - Committing global session 0x100015f55b50000
2020-03-18 17:41:30,662 [myid:] - INFO  [CommitProcessor:1:LearnerSessionTracker@116] - Committing global session 0x100015f55b50000
2020-03-18 17:41:30,664 [myid:localhost:13960] - INFO  [main-SendThread(localhost:13960):ClientCnxn$SendThread@1420] - Session establishment complete on server localhost/127.0.0.1:13960, session id = 0x100015f55b50000, negotiated timeout = 30000
2020-03-18 17:41:30,668 [myid:] - INFO  [main:ZooKeeper@1005] - Initiating client connection, connectString=localhost:13960 sessionTimeout=30000 watcher=org.apache.zookeeper.test.FollowerResyncConcurrencyTest$MyWatcher@6b67034
2020-03-18 17:41:30,669 [myid:] - INFO  [main:ClientCnxnSocket@239] - jute.maxbuffer value is 1048575 Bytes
2020-03-18 17:41:30,669 [myid:] - INFO  [main:ClientCnxn@1703] - zookeeper.request.timeout value is 0. feature enabled=false
2020-03-18 17:41:30,670 [myid:localhost:13960] - INFO  [main-SendThread(localhost:13960):ClientCnxn$SendThread@1154] - Opening socket connection to server localhost/127.0.0.1:13960.
2020-03-18 17:41:30,670 [myid:localhost:13960] - INFO  [main-SendThread(localhost:13960):ClientCnxn$SendThread@1156] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2020-03-18 17:41:30,671 [myid:localhost:13960] - INFO  [main-SendThread(localhost:13960):ClientCnxn$SendThread@986] - Socket connection established, initiating session, client: /127.0.0.1:55516, server: localhost/127.0.0.1:13960
2020-03-18 17:41:30,672 [myid:] - INFO  [CommitProcessor:3:LeaderSessionTracker@104] - Committing global session 0x100015f55b50001
2020-03-18 17:41:30,672 [myid:] - INFO  [CommitProcessor:1:LearnerSessionTracker@116] - Committing global session 0x100015f55b50001
2020-03-18 17:41:30,672 [myid:] - INFO  [CommitProcessor:2:LearnerSessionTracker@116] - Committing global session 0x100015f55b50001
2020-03-18 17:41:30,672 [myid:localhost:13960] - INFO  [main-SendThread(localhost:13960):ClientCnxn$SendThread@1420] - Session establishment complete on server localhost/127.0.0.1:13960, session id = 0x100015f55b50001, negotiated timeout = 30000
2020-03-18 17:41:30,677 [myid:] - INFO  [main:ClientCnxnSocketNIO@362] - testableCloseSocket() called
2020-03-18 17:41:30,678 [myid:] - WARN  [NIOWorkerThread-4:NIOServerCnxn@364] - Unexpected exception
EndOfStreamException: Unable to read additional data from client, it probably closed the socket: address = /127.0.0.1:55516, session = 0x100015f55b50001
	at org.apache.zookeeper.server.NIOServerCnxn.handleFailedRead(NIOServerCnxn.java:163)
	at org.apache.zookeeper.server.NIOServerCnxn.doIO(NIOServerCnxn.java:326)
	at org.apache.zookeeper.server.NIOServerCnxnFactory$IOWorkRequest.doWork(NIOServerCnxnFactory.java:522)
	at org.apache.zookeeper.server.WorkerService$ScheduledWorkRequest.run(WorkerService.java:154)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2020-03-18 17:41:30,734 [myid:] - INFO  [WorkerSender[myid=3]:FastLeaderElection$Messenger$WorkerSender@492] - WorkerSender is down
2020-03-18 17:41:30,735 [myid:] - INFO  [WorkerReceiver[myid=2]:FastLeaderElection$Messenger$WorkerReceiver@458] - WorkerReceiver is down
2020-03-18 17:41:30,734 [myid:] - INFO  [WorkerSender[myid=1]:FastLeaderElection$Messenger$WorkerSender@492] - WorkerSender is down
2020-03-18 17:41:30,734 [myid:] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection$Messenger$WorkerReceiver@458] - WorkerReceiver is down
2020-03-18 17:41:30,736 [myid:] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection$Messenger$WorkerReceiver@458] - WorkerReceiver is down
2020-03-18 17:41:30,736 [myid:] - INFO  [WorkerSender[myid=2]:FastLeaderElection$Messenger$WorkerSender@492] - WorkerSender is down
2020-03-18 17:41:40,674 [myid:localhost:13960] - WARN  [main-SendThread(localhost:13960):ClientCnxn$SendThread@1272] - Session 0x100015f55b50001 for sever localhost/127.0.0.1:13960, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
java.nio.channels.CancelledKeyException
	at sun.nio.ch.SelectionKeyImpl.ensureValid(SelectionKeyImpl.java:73)
	at sun.nio.ch.SelectionKeyImpl.interestOps(SelectionKeyImpl.java:77)
	at org.apache.zookeeper.ClientCnxnSocketNIO.enableWrite(ClientCnxnSocketNIO.java:377)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:353)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1262)
2020-03-18 17:41:42,083 [myid:localhost:13960] - INFO  [main-SendThread(localhost:13960):ClientCnxn$SendThread@1154] - Opening socket connection to server localhost/0:0:0:0:0:0:0:1:13960.
2020-03-18 17:41:42,083 [myid:localhost:13960] - INFO  [main-SendThread(localhost:13960):ClientCnxn$SendThread@1156] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2020-03-18 17:41:42,084 [myid:localhost:13960] - WARN  [main-SendThread(localhost:13960):ClientCnxn$SendThread@1272] - Session 0x100015f55b50001 for sever localhost/0:0:0:0:0:0:0:1:13960, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:717)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:342)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1262)
2020-03-18 17:41:43,972 [myid:localhost:13960] - INFO  [main-SendThread(localhost:13960):ClientCnxn$SendThread@1154] - Opening socket connection to server localhost/0:0:0:0:0:0:0:1:13960.
2020-03-18 17:41:43,972 [myid:localhost:13960] - INFO  [main-SendThread(localhost:13960):ClientCnxn$SendThread@1156] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2020-03-18 17:41:43,973 [myid:localhost:13960] - WARN  [main-SendThread(localhost:13960):ClientCnxn$SendThread@1272] - Session 0x100015f55b50001 for sever localhost/0:0:0:0:0:0:0:1:13960, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:717)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:342)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1262)
2020-03-18 17:41:45,708 [myid:localhost:13960] - INFO  [main-SendThread(localhost:13960):ClientCnxn$SendThread@1154] - Opening socket connection to server localhost/0:0:0:0:0:0:0:1:13960.
2020-03-18 17:41:45,708 [myid:localhost:13960] - INFO  [main-SendThread(localhost:13960):ClientCnxn$SendThread@1156] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2020-03-18 17:41:45,709 [myid:localhost:13960] - WARN  [main-SendThread(localhost:13960):ClientCnxn$SendThread@1272] - Session 0x100015f55b50001 for sever localhost/0:0:0:0:0:0:0:1:13960, Closing socket connection. Attempting reconnect except it is a SessionExpiredException.
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:717)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:342)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1262)
2020-03-18 17:41:47,038 [myid:localhost:13960] - INFO  [main-SendThread(localhost:13960):ClientCnxn$SendThread@1154] - Opening socket connection to server localhost/127.0.0.1:13960.
2020-03-18 17:41:47,038 [myid:localhost:13960] - INFO  [main-SendThread(localhost:13960):ClientCnxn$SendThread@1156] - SASL config status: Will not attempt to authenticate using SASL (unknown error)
2020-03-18 17:41:47,039 [myid:localhost:13960] - INFO  [main-SendThread(localhost:13960):ClientCnxn$SendThread@986] - Socket connection established, initiating session, client: /127.0.0.1:56174, server: localhost/127.0.0.1:13960
2020-03-18 17:41:47,041 [myid:] - INFO  [NIOWorkerThread-7:Learner@137] - Revalidating client: 0x100015f55b50001
2020-03-18 17:41:47,042 [myid:localhost:13960] - INFO  [main-SendThread(localhost:13960):ClientCnxn$SendThread@1420] - Session establishment complete on server localhost/127.0.0.1:13960, session id = 0x100015f55b50001, negotiated timeout = 30000
2020-03-18 17:41:52,051 [myid:] - INFO  [RequestThrottler:QuorumZooKeeperServer@158] - Submitting global closeSession request for session 0x100015f55b50000
2020-03-18 17:41:52,054 [myid:localhost:13960] - WARN  [main-SendThread(localhost:13960):ClientCnxn$SendThread@1266] - An exception was thrown while closing send thread for session 0x100015f55b50000.
EndOfStreamException: Unable to read additional data from server sessionid 0x100015f55b50000, likely server has closed socket
	at org.apache.zookeeper.ClientCnxnSocketNIO.doIO(ClientCnxnSocketNIO.java:75)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:348)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1262)
2020-03-18 17:41:52,157 [myid:] - INFO  [main:ZooKeeper@1618] - Session: 0x100015f55b50000 closed
2020-03-18 17:41:52,157 [myid:] - INFO  [main-EventThread:ClientCnxn$EventThread@566] - EventThread shut down for session: 0x100015f55b50000
2020-03-18 17:41:52,158 [myid:] - INFO  [RequestThrottler:QuorumZooKeeperServer@158] - Submitting global closeSession request for session 0x100015f55b50001
2020-03-18 17:41:52,263 [myid:] - INFO  [main:ZooKeeper@1618] - Session: 0x100015f55b50001 closed
2020-03-18 17:41:52,263 [myid:] - INFO  [main-EventThread:ClientCnxn$EventThread@566] - EventThread shut down for session: 0x100015f55b50001
2020-03-18 17:41:52,263 [myid:] - INFO  [main:QuorumUtil@250] - Shutting down quorum peer QuorumPeer[myid=1](plain=127.0.0.1:13960)(secure=disabled)
2020-03-18 17:41:52,264 [myid:] - INFO  [main:Follower@292] - shutdown Follower
2020-03-18 17:41:52,264 [myid:] - INFO  [main:LearnerZooKeeperServer@160] - Shutting down
2020-03-18 17:41:52,264 [myid:] - INFO  [main:ZooKeeperServer@784] - shutting down
2020-03-18 17:41:52,264 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13960)(secure=disabled):Follower@129] - Exception when following the leader
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:96)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:134)
	at org.apache.zookeeper.server.quorum.Learner.readPacket(Learner.java:182)
	at org.apache.zookeeper.server.quorum.Follower.followLeader(Follower.java:125)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:1455)
2020-03-18 17:41:52,264 [myid:] - ERROR [LearnerHandler-/127.0.0.1:55236:LearnerHandler@707] - Unexpected exception causing shutdown while sock still open
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:96)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:134)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:643)
2020-03-18 17:41:52,265 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13960)(secure=disabled):Follower@143] - Disconnected from leader (with address: /127.0.0.1:13967). Was connected for 22947ms. Sync state: true
2020-03-18 17:41:52,264 [myid:] - INFO  [main:RequestThrottler@244] - Shutting down
2020-03-18 17:41:52,265 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13960)(secure=disabled):Follower@292] - shutdown Follower
2020-03-18 17:41:52,265 [myid:] - WARN  [LearnerHandler-/127.0.0.1:55236:LearnerHandler@730] - ******* GOODBYE /127.0.0.1:55236 ********
2020-03-18 17:41:52,265 [myid:] - INFO  [RequestThrottler:RequestThrottler@205] - Draining request throttler queue
2020-03-18 17:41:52,266 [myid:] - INFO  [RequestThrottler:RequestThrottler@181] - RequestThrottler shutdown. Dropped 0 requests
2020-03-18 17:41:52,266 [myid:] - INFO  [main:FollowerRequestProcessor@148] - Shutting down
2020-03-18 17:41:52,266 [myid:] - INFO  [main:CommitProcessor@617] - Shutting down
2020-03-18 17:41:52,266 [myid:] - INFO  [FollowerRequestProcessor:1:FollowerRequestProcessor@112] - FollowerRequestProcessor exited loop!
2020-03-18 17:41:52,267 [myid:] - INFO  [CommitProcessor:1:CommitProcessor@406] - CommitProcessor exited loop!
2020-03-18 17:41:52,267 [myid:] - INFO  [main:FinalRequestProcessor@662] - shutdown of request processor complete
2020-03-18 17:41:52,268 [myid:] - INFO  [main:SyncRequestProcessor@256] - Shutting down
2020-03-18 17:41:52,268 [myid:] - INFO  [SyncThread:1:SyncRequestProcessor@225] - SyncRequestProcessor exited!
2020-03-18 17:41:52,269 [myid:] - INFO  [QuorumPeer[myid=1](plain=127.0.0.1:13960)(secure=disabled):QuorumPeer@863] - Peer state changed: looking
2020-03-18 17:41:52,269 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13960)(secure=disabled):QuorumPeer@1501] - PeerState set to LOOKING
2020-03-18 17:41:52,269 [myid:] - INFO  [ConnnectionExpirer:NIOServerCnxnFactory$ConnectionExpirerThread@578] - ConnnectionExpirerThread interrupted
2020-03-18 17:41:52,269 [myid:] - WARN  [QuorumPeer[myid=1](plain=127.0.0.1:13960)(secure=disabled):QuorumPeer@1483] - QuorumPeer main thread exited
2020-03-18 17:41:52,269 [myid:] - INFO  [NIOServerCxnFactory.AcceptThread:/127.0.0.1:13960:NIOServerCnxnFactory$AcceptThread@209] - accept thread exitted run method
2020-03-18 17:41:52,269 [myid:] - INFO  [NIOServerCxnFactory.SelectorThread-0:NIOServerCnxnFactory$SelectorThread@411] - selector thread exitted run method
2020-03-18 17:41:52,270 [myid:] - INFO  [QuorumPeerListener:QuorumCnxManager$Listener@961] - Leaving listener
2020-03-18 17:41:52,270 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 1, my id = 2
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:41:52,270 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 1, my id = 3
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:41:52,271 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:41:52,270 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:41:52,270 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 2, my id = 1
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:41:52,271 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:41:52,271 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 2 my id = 1
2020-03-18 17:41:52,271 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:41:52,271 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 1 my id = 3
2020-03-18 17:41:52,271 [myid:] - INFO  [main:QuorumUtil@254] - Shutting down leader election QuorumPeer[myid=1](plain=127.0.0.1:13960)(secure=disabled)
2020-03-18 17:41:52,271 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:41:52,272 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 3 my id = 1
2020-03-18 17:41:52,271 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 3, my id = 1
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:41:52,272 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:41:52,270 [myid:] - WARN  [RecvWorker:1:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:41:52,272 [myid:] - INFO  [main:QuorumUtil@259] - Waiting for QuorumPeer[myid=1](plain=127.0.0.1:13960)(secure=disabled) to exit thread
2020-03-18 17:41:52,272 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:41:52,272 [myid:] - WARN  [SendWorker:1:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 1 my id = 2
2020-03-18 17:41:52,272 [myid:] - INFO  [main:QuorumUtil@250] - Shutting down quorum peer QuorumPeer[myid=2](plain=127.0.0.1:13963)(secure=disabled)
2020-03-18 17:41:52,273 [myid:] - INFO  [main:Follower@292] - shutdown Follower
2020-03-18 17:41:52,273 [myid:] - INFO  [main:LearnerZooKeeperServer@160] - Shutting down
2020-03-18 17:41:52,273 [myid:] - INFO  [main:ZooKeeperServer@784] - shutting down
2020-03-18 17:41:52,273 [myid:] - WARN  [QuorumPeer[myid=2](plain=127.0.0.1:13963)(secure=disabled):Follower@129] - Exception when following the leader
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:96)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:134)
	at org.apache.zookeeper.server.quorum.Learner.readPacket(Learner.java:182)
	at org.apache.zookeeper.server.quorum.Follower.followLeader(Follower.java:125)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:1455)
2020-03-18 17:41:52,273 [myid:] - ERROR [LearnerHandler-/127.0.0.1:55235:LearnerHandler@707] - Unexpected exception causing shutdown while sock still open
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:96)
	at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:85)
	at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:134)
	at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:643)
2020-03-18 17:41:52,274 [myid:] - WARN  [LearnerHandler-/127.0.0.1:55235:LearnerHandler@730] - ******* GOODBYE /127.0.0.1:55235 ********
2020-03-18 17:41:52,274 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13963)(secure=disabled):Follower@143] - Disconnected from leader (with address: /127.0.0.1:13967). Was connected for 22956ms. Sync state: true
2020-03-18 17:41:52,274 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13963)(secure=disabled):Follower@292] - shutdown Follower
2020-03-18 17:41:52,273 [myid:] - INFO  [main:RequestThrottler@244] - Shutting down
2020-03-18 17:41:52,274 [myid:] - INFO  [RequestThrottler:RequestThrottler@205] - Draining request throttler queue
2020-03-18 17:41:52,275 [myid:] - INFO  [RequestThrottler:RequestThrottler@181] - RequestThrottler shutdown. Dropped 0 requests
2020-03-18 17:41:52,275 [myid:] - INFO  [main:FollowerRequestProcessor@148] - Shutting down
2020-03-18 17:41:52,275 [myid:] - INFO  [main:CommitProcessor@617] - Shutting down
2020-03-18 17:41:52,275 [myid:] - INFO  [FollowerRequestProcessor:2:FollowerRequestProcessor@112] - FollowerRequestProcessor exited loop!
2020-03-18 17:41:52,275 [myid:] - INFO  [main:FinalRequestProcessor@662] - shutdown of request processor complete
2020-03-18 17:41:52,275 [myid:] - INFO  [CommitProcessor:2:CommitProcessor@406] - CommitProcessor exited loop!
2020-03-18 17:41:52,276 [myid:] - INFO  [main:SyncRequestProcessor@256] - Shutting down
2020-03-18 17:41:52,277 [myid:] - INFO  [SyncThread:2:SyncRequestProcessor@225] - SyncRequestProcessor exited!
2020-03-18 17:41:52,277 [myid:] - INFO  [QuorumPeer[myid=2](plain=127.0.0.1:13963)(secure=disabled):QuorumPeer@863] - Peer state changed: looking
2020-03-18 17:41:52,277 [myid:] - WARN  [QuorumPeer[myid=2](plain=127.0.0.1:13963)(secure=disabled):QuorumPeer@1501] - PeerState set to LOOKING
2020-03-18 17:41:52,278 [myid:] - WARN  [QuorumPeer[myid=2](plain=127.0.0.1:13963)(secure=disabled):QuorumPeer@1483] - QuorumPeer main thread exited
2020-03-18 17:41:52,277 [myid:] - INFO  [ConnnectionExpirer:NIOServerCnxnFactory$ConnectionExpirerThread@578] - ConnnectionExpirerThread interrupted
2020-03-18 17:41:52,277 [myid:] - INFO  [NIOServerCxnFactory.AcceptThread:/127.0.0.1:13963:NIOServerCnxnFactory$AcceptThread@209] - accept thread exitted run method
2020-03-18 17:41:52,278 [myid:] - INFO  [NIOServerCxnFactory.SelectorThread-0:NIOServerCnxnFactory$SelectorThread@411] - selector thread exitted run method
2020-03-18 17:41:52,279 [myid:] - INFO  [QuorumPeerListener:QuorumCnxManager$Listener@961] - Leaving listener
2020-03-18 17:41:52,279 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:41:52,279 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 3, my id = 2
java.net.SocketException: Socket closed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readInt(DataInputStream.java:387)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:41:52,279 [myid:] - WARN  [RecvWorker:3:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:41:52,279 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1374] - Connection broken for id 2, my id = 3
java.io.EOFException
	at java.io.DataInputStream.readInt(DataInputStream.java:392)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:1362)
2020-03-18 17:41:52,279 [myid:] - WARN  [RecvWorker:2:QuorumCnxManager$RecvWorker@1380] - Interrupting SendWorker
2020-03-18 17:41:52,279 [myid:] - INFO  [main:QuorumUtil@254] - Shutting down leader election QuorumPeer[myid=2](plain=127.0.0.1:13963)(secure=disabled)
2020-03-18 17:41:52,279 [myid:] - WARN  [SendWorker:3:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 3 my id = 2
2020-03-18 17:41:52,280 [myid:] - INFO  [main:QuorumUtil@259] - Waiting for QuorumPeer[myid=2](plain=127.0.0.1:13963)(secure=disabled) to exit thread
2020-03-18 17:41:52,280 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@1262] - Interrupted while waiting for message on queue
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:2014)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2088)
	at org.apache.zookeeper.util.CircularBlockingQueue.poll(CircularBlockingQueue.java:105)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:1425)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$900(QuorumCnxManager.java:97)
	at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:1251)
2020-03-18 17:41:52,280 [myid:] - INFO  [main:QuorumUtil@250] - Shutting down quorum peer QuorumPeer[myid=3](plain=127.0.0.1:13966)(secure=disabled)
2020-03-18 17:41:52,280 [myid:] - WARN  [SendWorker:2:QuorumCnxManager$SendWorker@1274] - Send worker leaving thread id 2 my id = 3
2020-03-18 17:41:52,280 [myid:] - INFO  [main:Leader@792] - Shutting down
2020-03-18 17:41:52,280 [myid:] - INFO  [main:Leader@798] - Shutdown called. For the reason quorum Peer shutdown
2020-03-18 17:41:52,281 [myid:] - INFO  [main:ZooKeeperServer@784] - shutting down
2020-03-18 17:41:52,281 [myid:] - WARN  [LearnerCnxAcceptorHandler-/127.0.0.1:13967:Leader$LearnerCnxAcceptor$LearnerCnxAcceptorHandler@523] - Exception while shutting down acceptor.
java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:545)
	at java.net.ServerSocket.accept(ServerSocket.java:513)
	at org.apache.zookeeper.server.quorum.Leader$LearnerCnxAcceptor$LearnerCnxAcceptorHandler.acceptConnections(Leader.java:510)
	at org.apache.zookeeper.server.quorum.Leader$LearnerCnxAcceptor$LearnerCnxAcceptorHandler.run(Leader.java:493)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
2020-03-18 17:41:52,281 [myid:] - INFO  [main:RequestThrottler@244] - Shutting down
2020-03-18 17:41:52,281 [myid:] - INFO  [RequestThrottler:RequestThrottler@205] - Draining request throttler queue
2020-03-18 17:41:52,282 [myid:] - INFO  [RequestThrottler:RequestThrottler@181] - RequestThrottler shutdown. Dropped 0 requests
2020-03-18 17:41:52,282 [myid:] - INFO  [main:SessionTrackerImpl@247] - Shutting down
2020-03-18 17:41:52,282 [myid:] - INFO  [main:LeaderRequestProcessor@79] - Shutting down
2020-03-18 17:41:52,282 [myid:] - INFO  [main:PrepRequestProcessor@1047] - Shutting down
2020-03-18 17:41:52,282 [myid:] - INFO  [main:ProposalRequestProcessor@87] - Shutting down
2020-03-18 17:41:52,282 [myid:] - INFO  [main:CommitProcessor@617] - Shutting down
2020-03-18 17:41:52,282 [myid:] - INFO  [ProcessThread(sid:3 cport:-1)::PrepRequestProcessor@159] - PrepRequestProcessor exited loop!
